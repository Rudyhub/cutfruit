(function(e){function t(n){if(r[n])return r[n].exports;var a=r[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e['default']}:function(){return e};return t.d(r,'a',r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p='',t(t.s=8)})([function(e){'use strict';var t=window.localStorage,r=window.sessionStorage,n={winw:window.innerWidth,winh:window.innerHeight,gameID:'wwpgameID001',time:4e3,freezename:'icebanana',freezetime:2e3,score:0,life:3,best:0,max:6,min:1,scoreTxt:'YOUR BEST  ',lifeTxt:'LIFE NUM  ',status:'wait',update:null,reset:function(){this.score=0,this.life=parseInt(r.getItem(this.gameID))}};t.getItem(n.gameID)||t.setItem(n.gameID,0),n.best=t.getItem(n.gameID),r.setItem(n.gameID,n.life),e.exports=n},function(e,t,r){'use strict';function n(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function a(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function o(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&'function'==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?'symbol':typeof e},s=function(){function e(e,t){for(var r=0,n;r<t.length;r++)n=t[r],n.enumerable=n.enumerable||!1,n.configurable=!0,'value'in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),d=r(2),l=r(0),u=function(e){function t(e){n(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.timers=[],r}return o(t,e),s(t,[{key:'timer',value:function(e){var t=new d.ticker.Ticker;return t.add(e),this.timers.push(t),t}},{key:'clearTimer',value:function(e,t){try{e.stop(),e.remove(t),e.destroy()}catch(e){}this.timers.splice(0,1)}},{key:'animate',value:function(e,r,a){function o(){var r=h.elapsedMS;for(var i in s)e[i]+=d[i]*r;c+=r,c>=u&&(t.clearTimer(h,o),a&&a())}if(e&&'object'===('undefined'==typeof r?'undefined':i(r))){var n={width:e.width,height:e.height,alpha:e.alpha,rotation:e.rotation,scale:e.scale,x:e.x,y:e.y},s={duration:800},d={};for(var l in r)'number'==typeof r[l]&&(s[l]=r[l]);r=null;var u=s.duration;for(var p in delete s.duration,s)d[p]=(s[p]-n[p])/u;var c=0,t=this,h=t.timer(o);return h.start(),h}}},{key:'motion',value:function(e,r,n,a,o,i,s,d,l){function u(){var r=f.elapsedMS;e.x+=r*t,e.y+=i*r+h*c*r+.5*c*r*r,e.rotation+=d,h+=r,h>=s&&(p.clearTimer(f,u),l&&l())}var p=this,c=2*(o-a-i*s)/(s*s),h=0,t=(n-r)/s;e.y=a,e.x=r;var f=p.timer(u);return f.start(),f}}]),t}(d.Application),p=new u({width:l.winw,height:l.winh,backgroundColor:0});e.exports=p},function(e,r,t){'use strict';var s=Math.round,H=Math.sqrt,T=Math.sin,E=Math.cos,C=Math.PI,k=Math.floor;(function(a){var z='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&'function'==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?'symbol':typeof e},n,o,i,t,t;!function(a){if('object'==z(r)&&'undefined'!=typeof e)e.exports=a();else{o=[],n=a,i='function'==typeof n?n.apply(r,o):n,!(void 0!==i&&(e.exports=i))}}(function(){var r=Math.sign,S=Math.ceil,M=Math.atan2,B=Math.min,y=String.fromCharCode,W=Math.abs,P=Math.max,U;return function d(u,e,r){function n(o,s){if(!e[o]){if(!u[o]){if(!s&&'function'==typeof t&&t)return t(o,!0);if(i)return i(o,!0);var p=new Error('Cannot find module \''+o+'\'');throw p.code='MODULE_NOT_FOUND',p}var c=e[o]={exports:{}};u[o][0].call(c.exports,function(e){var t=u[o][1][e];return n(t||e)},c,c.exports,d,u,e,r)}return e[o].exports}for(var i='function'==typeof t&&t,a=0;a<r.length;a++)n(r[a]);return n}({1:[function(a,t,e){'use restrict';function r(r){var n=32;return r&=-r,r&&n--,65535&r&&(n-=16),16711935&r&&(n-=8),252645135&r&&(n-=4),858993459&r&&(n-=2),1431655765&r&&(n-=1),n}e.INT_BITS=32,e.INT_MAX=2147483647,e.INT_MIN=-2147483648,e.sign=function(e){return(0<e)-(0>e)},e.abs=function(r){var t=r>>31;return(r^t)-t},e.min=function(r,t){return t^(r^t)&-(r<t)},e.max=function(r,t){return r^(r^t)&-(r<t)},e.isPow2=function(e){return!(e&e-1)&&e},e.log2=function(n){var t,e;return t=(65535<n)<<4,n>>>=t,e=(255<n)<<3,n>>>=e,t|=e,e=(15<n)<<2,n>>>=e,t|=e,e=(3<n)<<1,n>>>=e,(t|=e)|n>>1},e.log10=function(e){return 1e9<=e?9:1e8<=e?8:1e7<=e?7:1e6<=e?6:1e5<=e?5:1e4<=e?4:1e3<=e?3:100<=e?2:10<=e?1:0},e.popCount=function(e){return e-=1431655765&e>>>1,16843009*(252645135&(e=(858993459&e)+(858993459&e>>>2))+(e>>>4))>>>24},e.countTrailingZeros=r,e.nextPow2=function(e){return e+=0===e,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)+1},e.prevPow2=function(e){return e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)-(e>>>1)},e.parity=function(e){return e^=e>>>16,e^=e>>>8,e^=e>>>4,1&27030>>>(e&=15)};var n=Array(256);!function(a){for(var t=0;256>t;++t){var e=t,r=t,n=7;for(e>>>=1;e;e>>>=1)r<<=1,r|=1&e,--n;a[t]=255&r<<n}}(n),e.reverse=function(e){return n[255&e]<<24|n[255&e>>>8]<<16|n[255&e>>>16]<<8|n[255&e>>>24]},e.interleave2=function(r,t){return r&=65535,r=16711935&(r|r<<8),r=252645135&(r|r<<4),r=858993459&(r|r<<2),r=1431655765&(r|r<<1),t&=65535,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),r|t<<1},e.deinterleave2=function(r,t){return r=1431655765&r>>>t,r=858993459&(r|r>>>1),r=252645135&(r|r>>>2),r=16711935&(r|r>>>4),(r=65535&(r|r>>>16))<<16>>16},e.interleave3=function(n,t,e){return n&=1023,n=4278190335&(n|n<<16),n=251719695&(n|n<<8),n=3272356035&(n|n<<4),n=1227133513&(n|n<<2),t&=1023,t=4278190335&(t|t<<16),t=251719695&(t|t<<8),t=3272356035&(t|t<<4),t=1227133513&(t|t<<2),n|=t<<1,e&=1023,e=4278190335&(e|e<<16),e=251719695&(e|e<<8),e=3272356035&(e|e<<4),e=1227133513&(e|e<<2),n|e<<2},e.deinterleave3=function(r,t){return r=1227133513&r>>>t,r=3272356035&(r|r>>>2),r=251719695&(r|r>>>4),r=4278190335&(r|r>>>8),(r=1023&(r|r>>>16))<<22>>22},e.nextCombination=function(n){var t=n|n-1;return t+1|(~t&-~t)-1>>>r(n)+1}},{}],2:[function(r,t){function e(s,t,e){e=e||2;var r=t&&t.length,c=r?t[0]*e:s.length,o=D(s,0,c,e,!0),m=[];if(!o)return m;var u,h,l,d,f,p,_;if(r&&(o=i(s,t,o,e)),s.length>80*e){u=l=s[0],h=d=s[1];for(var y=e;y<c;y+=e)f=s[y],p=s[y+1],f<u&&(u=f),p<h&&(h=p),f>l&&(l=f),p>d&&(d=p);_=P(l-u,d-h)}return L(o,m,e,u,h,_),m}function D(a,t,e,r,n){var d,o;if(n===0<R(a,t,e,r))for(d=t;d<e;d+=r)o=S(d,a[d],a[d+1],o);else for(d=e-r;d>=t;d-=r)o=S(d,a[d],a[d+1],o);return o&&y(o,o.next)&&(M(o),o=o.next),o}function I(a,o){if(!a)return a;o||(o=a);var e=a,n;do if(n=!1,e.steiner||!y(e,e.next)&&0!==_(e.prev,e,e.next))e=e.next;else{if(M(e),(e=o=e.prev)===e.next)return null;n=!0}while(n||e!==o);return o}function L(l,t,e,r,n,i,c){if(l){!c&&i&&h(l,r,n,i);for(var g=l,m,f;l.prev!==l.next;)if(m=l.prev,f=l.next,i?a(l,r,n,i):o(l))t.push(m.i/e),t.push(l.i/e),t.push(f.i/e),M(l),l=f.next,g=f.next;else if((l=f)===g){c?1===c?(l=s(l,t,e),L(l,t,e,r,n,i,2)):2==c&&u(l,t,e,r,n,i):L(I(l),t,e,r,n,i,1);break}}}function o(a){var t=a.prev,e=a,r=a.next;if(0<=_(t,e,r))return!1;for(var n=a.next.next;n!==a.prev;){if(g(t.x,t.y,e.x,e.y,r.x,r.y,n.x,n.y)&&0<=_(n.prev,n,n.next))return!1;n=n.next}return!0}function a(p,t,e,r){var n=p.prev,i=p,o=p.next;if(0<=_(n,i,o))return!1;for(var s=n.x<i.x?n.x<o.x?n.x:o.x:i.x<o.x?i.x:o.x,a=n.y<i.y?n.y<o.y?n.y:o.y:i.y<o.y?i.y:o.y,m=n.x>i.x?n.x>o.x?n.x:o.x:i.x>o.x?i.x:o.x,h=n.y>i.y?n.y>o.y?n.y:o.y:i.y>o.y?i.y:o.y,l=c(s,a,t,e,r),y=c(m,h,t,e,r),d=p.nextZ;d&&d.z<=y;){if(d!==p.prev&&d!==p.next&&g(n.x,n.y,i.x,i.y,o.x,o.y,d.x,d.y)&&0<=_(d.prev,d,d.next))return!1;d=d.nextZ}for(d=p.prevZ;d&&d.z>=l;){if(d!==p.prev&&d!==p.next&&g(n.x,n.y,i.x,i.y,o.x,o.y,d.x,d.y)&&0<=_(d.prev,d,d.next))return!1;d=d.prevZ}return!0}function s(a,t,e){var r=a;do{var n=r.prev,i=r.next.next;!y(n,i)&&x(n,r,r.next,i)&&T(n,i)&&T(i,n)&&(t.push(n.i/e),t.push(r.i/e),t.push(i.i/e),M(r),M(r.next),r=a=i),r=r.next}while(r!==a);return r}function u(o,t,e,r,n,i){var a=o;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&m(a,s)){var d=E(a,s);return a=I(a,a.next),d=I(d,d.next),L(a,t,e,r,n,i),void L(d,t,e,r,n,i)}s=s.next}a=a.next}while(a!==o)}function i(o,t,e,r){var i=[],p,s,a,u,h;for(p=0,s=t.length;p<s;p++)a=t[p]*r,u=p<s-1?t[p+1]*r:o.length,h=D(o,a,u,r,!1),h===h.next&&(h.steiner=!0),i.push(f(h));for(i.sort(n),p=0;p<i.length;p++)d(i[p],e),e=I(e,e.next);return e}function n(r,t){return r.x-t.x}function d(n,t){if(t=l(n,t)){var e=E(t,n);I(e,e.next)}}function l(p,t){var e=t,n=p.x,i=p.y,o=-1/0,s;do{if(i<=e.y&&i>=e.next.y){var f=e.x+(i-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(f<=n&&f>o){if(o=f,f===n){if(i===e.y)return e;if(i===e.next.y)return e.next}s=e.x<e.next.x?e:e.next}}e=e.next}while(e!==t);if(!s)return null;if(n===o)return s.prev;var a=s,h=s.x,l=s.y,c=1/0,d;for(e=s.next;e!==a;)n>=e.x&&e.x>=h&&g(i<l?n:o,i,h,l,i<l?o:n,i,e.x,e.y)&&((d=W(i-e.y)/(n-e.x))<c||d===c&&e.x>s.x)&&T(e,p)&&(s=e,c=d),e=e.next;return s}function h(a,t,e,r){var n=a;do null===n.z&&(n.z=c(n.x,n.y,t,e,r)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next;while(n!==a);n.prevZ.nextZ=null,n.prevZ=null,p(n)}function p(d){var t=1,l,e,r,n,i,o,s,a;do{for(e=d,d=null,i=null,o=0;e;){for(o++,r=e,s=0,l=0;l<t&&(s++,r=r.nextZ);l++);for(a=t;0<s||0<a&&r;)0===s?(n=r,r=r.nextZ,a--):0!==a&&r?e.z<=r.z?(n=e,e=e.nextZ,s--):(n=r,r=r.nextZ,a--):(n=e,e=e.nextZ,s--),i?i.nextZ=n:d=n,n.prevZ=i,i=n;e=r}i.nextZ=null,t*=2}while(1<o);return d}function c(a,t,e,r,n){return a=32767*(a-e)/n,t=32767*(t-r)/n,a=16711935&(a|a<<8),a=252645135&(a|a<<4),a=858993459&(a|a<<2),a=1431655765&(a|a<<1),t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),a|t<<1}function f(n){var t=n,e=n;do t.x<e.x&&(e=t),t=t.next;while(t!==n);return e}function g(d,t,e,r,n,i,o,s){return 0<=(n-o)*(t-s)-(d-o)*(i-s)&&0<=(d-o)*(r-s)-(e-o)*(t-s)&&0<=(e-o)*(i-s)-(n-o)*(r-s)}function m(r,t){return r.next.i!==t.i&&r.prev.i!==t.i&&!b(r,t)&&T(r,t)&&T(t,r)&&v(r,t)}function _(n,t,e){return(t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y)}function y(r,t){return r.x===t.x&&r.y===t.y}function x(a,t,e,r){return!!(y(a,t)&&y(e,r)||y(a,r)&&y(e,t))||0<_(a,t,e)!=0<_(a,t,r)&&0<_(e,r,a)!=0<_(e,r,t)}function b(n,t){var e=n;do{if(e.i!==n.i&&e.next.i!==n.i&&e.i!==t.i&&e.next.i!==t.i&&x(e,e.next,n,t))return!0;e=e.next}while(e!==n);return!1}function T(r,t){return 0>_(r.prev,r,r.next)?0<=_(r,t,r.next)&&0<=_(r,r.prev,t):0>_(r,t,r.prev)||0>_(r,r.next,t)}function v(a,t){var e=a,r=!1,s=(a.x+t.x)/2,i=(a.y+t.y)/2;do e.y>i!=e.next.y>i&&s<(e.next.x-e.x)*(i-e.y)/(e.next.y-e.y)+e.x&&(r=!r),e=e.next;while(e!==a);return r}function E(a,t){var e=new C(a.i,a.x,a.y),r=new C(t.i,t.x,t.y),n=a.next,i=t.prev;return a.next=t,t.prev=a,e.next=n,n.prev=e,r.next=e,e.prev=r,i.next=r,r.prev=i,r}function S(a,t,e,r){var n=new C(a,t,e);return r?(n.next=r.next,n.prev=r,r.next.prev=n,r.next=n):(n.prev=n,n.next=n),n}function M(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function C(n,t,e){this.i=n,this.x=t,this.y=e,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function R(a,t,e,r){for(var n=0,i=t,o=e-r;i<e;i+=r)n+=(a[o]-a[i])*(a[i+1]+a[o+1]),o=i;return n}t.exports=e,e.deviation=function(g,t,e,r){var n=t&&t.length,i=n?t[0]*e:g.length,o=W(R(g,0,i,e));if(n)for(var s=0,a=t.length;s<a;s++){var u=t[s]*e,h=s<a-1?t[s+1]*e:g.length;o-=W(R(g,u,h,e))}var l=0;for(s=0;s<r.length;s+=3){var c=r[s]*e,d=r[s+1]*e,f=r[s+2]*e;l+=W((g[c]-g[f])*(g[d+1]-g[c+1])-(g[c]-g[d])*(g[f+1]-g[c+1]))}return 0===o&&0===l?0:W((l-o)/o)},e.flatten=function(a){for(var t=a[0][0].length,d={vertices:[],holes:[],dimensions:t},r=0,n=0;n<a.length;n++){for(var i=0;i<a[n].length;i++)for(var o=0;o<t;o++)d.vertices.push(a[n][i][o]);0<n&&(r+=a[n-1].length,d.holes.push(r))}return d}},{}],3:[function(r,t){function d(){}function l(n,t,e){this.fn=n,this.context=t,this.once=e||!1}function e(){this._events=new d,this._eventsCount=0}var n=Object.prototype.hasOwnProperty,p='~';Object.create&&(d.prototype=Object.create(null),new d().__proto__||(p=!1)),e.prototype.eventNames=function(){var a=[],r,t;if(0===this._eventsCount)return a;for(t in r=this._events)n.call(r,t)&&a.push(p?t.slice(1):t);return Object.getOwnPropertySymbols?a.concat(Object.getOwnPropertySymbols(r)):a},e.prototype.listeners=function(a,t){var e=p?p+a:a,r=this._events[e];if(t)return!!r;if(!r)return[];if(r.fn)return[r.fn];for(var d=0,i=r.length,o=Array(i);d<i;d++)o[d]=r[d].fn;return o},e.prototype.emit=function(a,t,e,r,n,i){var o=p?p+a:a;if(!this._events[o])return!1;var s=this._events[o],l=arguments.length,c,g;if(s.fn){switch(s.once&&this.removeListener(a,s.fn,void 0,!0),l){case 1:return s.fn.call(s.context),!0;case 2:return s.fn.call(s.context,t),!0;case 3:return s.fn.call(s.context,t,e),!0;case 4:return s.fn.call(s.context,t,e,r),!0;case 5:return s.fn.call(s.context,t,e,r,n),!0;case 6:return s.fn.call(s.context,t,e,r,n,i),!0;}for(g=1,c=Array(l-1);g<l;g++)c[g-1]=arguments[g];s.fn.apply(s.context,c)}else{var h=s.length,f;for(g=0;g<h;g++)switch(s[g].once&&this.removeListener(a,s[g].fn,void 0,!0),l){case 1:s[g].fn.call(s[g].context);break;case 2:s[g].fn.call(s[g].context,t);break;case 3:s[g].fn.call(s[g].context,t,e);break;case 4:s[g].fn.call(s[g].context,t,e,r);break;default:if(!c)for(f=1,c=Array(l-1);f<l;f++)c[f-1]=arguments[f];s[g].fn.apply(s[g].context,c);}}return!0},e.prototype.on=function(a,t,e){var r=new l(t,e||this),n=p?p+a:a;return this._events[n]?this._events[n].fn?this._events[n]=[this._events[n],r]:this._events[n].push(r):(this._events[n]=r,this._eventsCount++),this},e.prototype.once=function(a,t,e){var r=new l(t,e||this,!0),n=p?p+a:a;return this._events[n]?this._events[n].fn?this._events[n]=[this._events[n],r]:this._events[n].push(r):(this._events[n]=r,this._eventsCount++),this},e.prototype.removeListener=function(n,t,a,r){var i=p?p+n:n;if(!this._events[i])return this;if(!t)return 0==--this._eventsCount?this._events=new d:delete this._events[i],this;var o=this._events[i];if(o.fn)o.fn!==t||r&&!o.once||a&&o.context!==a||(0==--this._eventsCount?this._events=new d:delete this._events[i]);else{for(var s=0,u=[],c=o.length;s<c;s++)(o[s].fn!==t||r&&!o[s].once||a&&o[s].context!==a)&&u.push(o[s]);u.length?this._events[i]=1===u.length?u[0]:u:0==--this._eventsCount?this._events=new d:delete this._events[i]}return this},e.prototype.removeAllListeners=function(r){var t;return r?(t=p?p+r:r,this._events[t]&&(0==--this._eventsCount?this._events=new d:delete this._events[t])):(this._events=new d,this._eventsCount=0),this},e.prototype.off=e.prototype.removeListener,e.prototype.addListener=e.prototype.on,e.prototype.setMaxListeners=function(){return this},e.prefixed=p,e.EventEmitter=e,void 0!==t&&(t.exports=e)},{}],4:[function(n,x){!function(r){var T=/iPhone/i,n=/iPod/i,i=/iPad/i,o=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,s=/Android/i,a=/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,u=/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,h=/Windows Phone/i,l=/(?=.*\bWindows\b)(?=.*\bARM\b)/i,c=/BlackBerry/i,d=/BB10/i,f=/Opera Mini/i,p=/(CriOS|Chrome)(?=.*\bMobile\b)/i,v=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,y=/(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)/i,g=function(r,t){return r.test(t)},e=function(m){var t=m||navigator.userAgent,e=t.split('[FBAN');if(void 0!==e[1]&&(t=e[0]),e=t.split('Twitter'),void 0!==e[1]&&(t=e[0]),this.apple={phone:g(T,t),ipod:g(n,t),tablet:!g(T,t)&&g(i,t),device:g(T,t)||g(n,t)||g(i,t)},this.amazon={phone:g(a,t),tablet:!g(a,t)&&g(u,t),device:g(a,t)||g(u,t)},this.android={phone:g(a,t)||g(o,t),tablet:!g(a,t)&&!g(o,t)&&(g(u,t)||g(s,t)),device:g(a,t)||g(u,t)||g(o,t)||g(s,t)},this.windows={phone:g(h,t),tablet:g(l,t),device:g(h,t)||g(l,t)},this.other={blackberry:g(c,t),blackberry10:g(d,t),opera:g(f,t),firefox:g(v,t),chrome:g(p,t),device:g(c,t)||g(d,t)||g(f,t)||g(v,t)||g(p,t)},this.seven_inch=g(y,t),this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch,this.phone=this.apple.phone||this.android.phone||this.windows.phone,this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet,'undefined'==typeof window)return this},m=function(){var r=new e;return r.Class=e,r};void 0!==x&&x.exports&&'undefined'==typeof window?x.exports=e:void 0!==x&&x.exports&&'undefined'!=typeof window?x.exports=m():'function'==typeof U&&U.amd?U('isMobile',[],r.isMobile=m()):r.isMobile=m()}(this)},{}],5:[function(d,t,e){function l(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}function r(r,t){return r._head?(r._tail._next=t,t._prev=r._tail,r._tail=t):(r._head=t,r._tail=t),t._owner=r,t}Object.defineProperty(e,'__esModule',{value:!0});var n=function(){function a(a,o){for(var e=0,r;e<o.length;e++)r=o[e],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}return function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}}(),o=function(){function a(t,e,r){void 0===e&&(e=!1),l(this,a),this._fn=t,this._once=e,this._thisArg=r,this._next=this._prev=this._owner=null}return n(a,[{key:'detach',value:function(){return null!==this._owner&&(this._owner.detach(this),!0)}}]),a}(),i=function(){function e(){l(this,e),this._head=this._tail=void 0}return n(e,[{key:'handlers',value:function(){var n=!(0>=arguments.length||void 0===arguments[0])&&arguments[0],t=this._head;if(n)return!!t;for(var a=[];t;)a.push(t),t=t._next;return a}},{key:'has',value:function(e){if(!(e instanceof o))throw new Error('MiniSignal#has(): First arg must be a MiniSignalBinding object.');return e._owner===this}},{key:'dispatch',value:function(){var e=this._head;if(!e)return!1;for(;e;)e._once&&this.detach(e),e._fn.apply(e._thisArg,arguments),e=e._next;return!0}},{key:'add',value:function(n){var a=1>=arguments.length||void 0===arguments[1]?null:arguments[1];if('function'!=typeof n)throw new Error('MiniSignal#add(): First arg must be a Function.');return r(this,new o(n,!1,a))}},{key:'once',value:function(n){var a=1>=arguments.length||void 0===arguments[1]?null:arguments[1];if('function'!=typeof n)throw new Error('MiniSignal#once(): First arg must be a Function.');return r(this,new o(n,!0,a))}},{key:'detach',value:function(e){if(!(e instanceof o))throw new Error('MiniSignal#detach(): First arg must be a MiniSignalBinding object.');return e._owner===this?(e._prev&&(e._prev._next=e._next),e._next&&(e._next._prev=e._prev),e===this._head?(this._head=e._next,null===e._next&&(this._tail=null)):e===this._tail&&(this._tail=e._prev,this._tail._next=null),e._owner=null,this):this}},{key:'detachAll',value:function(){var e=this._head;if(!e)return this;for(this._head=this._tail=null;e;)e._owner=null,e=e._next;return this}}]),e}();i.MiniSignalBinding=o,e.default=i,t.exports=e.default},{}],6:[function(r,t){function e(e){if(null===e||void 0===e)throw new TypeError('Object.assign cannot be called with null or undefined');return Object(e)}var n=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var a=new String('abc');if(a[5]='de','5'===Object.getOwnPropertyNames(a)[0])return!1;for(var o={},e=0;10>e;e++)o['_'+y(e)]=e;if('0123456789'!==Object.getOwnPropertyNames(o).map(function(e){return o[e]}).join(''))return!1;var r={};return['a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t'].forEach(function(e){r[e]=e}),'abcdefghijklmnopqrst'===Object.keys(Object.assign({},r)).join('')}catch(e){return!1}}()?Object.assign:function(i){for(var t=e(i),s=1,d,r;s<arguments.length;s++){for(var u in d=Object(arguments[s]),d)a.call(d,u)&&(t[u]=d[u]);if(n){r=n(d);for(var l=0;l<r.length;l++)o.call(d,r[l])&&(t[r[l]]=d[r[l]])}}return t}},{}],7:[function(r,t){t.exports=function(a,t){t=t||{};for(var s={key:['source','protocol','authority','userInfo','user','password','host','port','relative','path','directory','file','query','anchor'],q:{name:'queryKey',parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},e=s.parser[t.strictMode?'strict':'loose'].exec(a),r={},n=14;n--;)r[s.key[n]]=e[n]||'';return r[s.q.name]={},r[s.key[12]].replace(s.q.parser,function(a,t,e){t&&(r[s.q.name][t]=e)}),r}},{}],8:[function(n,t,d){(function(a){function l(a,t){for(var o=0,r=a.length-1,n;0<=r;r--)n=a[r],'.'===n?a.splice(r,1):'..'===n?(a.splice(r,1),o++):o&&(a.splice(r,1),o--);if(t)for(;o--;o)a.unshift('..');return a}function e(a,t){if(a.filter)return a.filter(t);for(var e=[],r=0;r<a.length;r++)t(a[r],r,a)&&e.push(a[r]);return e}var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,i=function(e){return r.exec(e).slice(1)};d.resolve=function(){for(var t='',r=!1,n=arguments.length-1,o;-1<=n&&!r;n--){if(o=0<=n?arguments[n]:a.cwd(),'string'!=typeof o)throw new TypeError('Arguments to path.resolve must be strings');o&&(t=o+'/'+t,r='/'===o.charAt(0))}return t=l(e(t.split('/'),function(e){return!!e}),!r).join('/'),(r?'/':'')+t||'.'},d.normalize=function(r){var t=d.isAbsolute(r),a='/'===n(r,-1);return r=l(e(r.split('/'),function(e){return!!e}),!t).join('/'),r||t||(r='.'),r&&a&&(r+='/'),(t?'/':'')+r},d.isAbsolute=function(e){return'/'===e.charAt(0)},d.join=function(){var r=Array.prototype.slice.call(arguments,0);return d.normalize(e(r,function(e){if('string'!=typeof e)throw new TypeError('Arguments to path.join must be strings');return e}).join('/'))},d.relative=function(r,t){function e(n){for(var t=0;t<n.length&&''===n[t];t++);for(var e=n.length-1;0<=e&&''===n[e];e--);return t>e?[]:n.slice(t,e-t+1)}r=d.resolve(r).substr(1),t=d.resolve(t).substr(1);for(var n=e(r.split('/')),i=e(t.split('/')),o=B(n.length,i.length),s=o,a=0;a<o;a++)if(n[a]!==i[a]){s=a;break}for(var l=[],a=s;a<n.length;a++)l.push('..');return l=l.concat(i.slice(s)),l.join('/')},d.sep='/',d.delimiter=':',d.dirname=function(a){var t=i(a),e=t[0],r=t[1];return e||r?(r&&(r=r.substr(0,r.length-1)),e+r):'.'},d.basename=function(n,t){var e=i(n)[2];return t&&e.substr(-1*t.length)===t&&(e=e.substr(0,e.length-t.length)),e},d.extname=function(e){return i(e)[3]};var n=function(n,t,e){return n.substr(t,e)}}).call(this,n('_process'))},{_process:26}],9:[function(r,t){var a=new ArrayBuffer(0),o=function(n,t,e,r){this.gl=n,this.buffer=n.createBuffer(),this.type=t||n.ARRAY_BUFFER,this.drawType=r||n.STATIC_DRAW,this.data=a,e&&this.upload(e),this._updateID=0};o.prototype.upload=function(a,t,e){e||this.bind();var r=this.gl;a=a||this.data,t=t||0,this.data.byteLength>=a.byteLength?r.bufferSubData(this.type,t,a):r.bufferData(this.type,a,this.drawType),this.data=a},o.prototype.bind=function(){this.gl.bindBuffer(this.type,this.buffer)},o.createVertexBuffer=function(n,t,e){return new o(n,n.ARRAY_BUFFER,t,e)},o.createIndexBuffer=function(n,t,e){return new o(n,n.ELEMENT_ARRAY_BUFFER,t,e)},o.create=function(a,t,e,r){return new o(a,t,e,r)},o.prototype.destroy=function(){this.gl.deleteBuffer(this.buffer)},t.exports=o},{}],10:[function(r,t){var d=r('./GLTexture'),n=function(n,t,e){this.gl=n,this.framebuffer=n.createFramebuffer(),this.stencil=null,this.texture=null,this.width=t||100,this.height=e||100};n.prototype.enableTexture=function(r){var t=this.gl;this.texture=r||new d(t),this.texture.bind(),this.bind(),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture.texture,0)},n.prototype.enableStencil=function(){if(!this.stencil){var e=this.gl;this.stencil=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,this.stencil),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,this.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,this.width,this.height)}},n.prototype.clear=function(a,t,e,r){this.bind();var n=this.gl;n.clearColor(a,t,e,r),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT)},n.prototype.bind=function(){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer)},n.prototype.unbind=function(){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,null)},n.prototype.resize=function(n,t){var e=this.gl;this.width=n,this.height=t,this.texture&&this.texture.uploadData(null,n,t),this.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,this.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,n,t))},n.prototype.destroy=function(){var e=this.gl;this.texture&&this.texture.destroy(),e.deleteFramebuffer(this.framebuffer),this.gl=null,this.stencil=null,this.texture=null},n.createRGBA=function(o,t,e){var r=d.fromData(o,null,t,e);r.enableNearestScaling(),r.enableWrapClamp();var i=new n(o,t,e);return i.enableTexture(r),i.unbind(),i},n.createFloat32=function(i,t,e,r){var o=new d.fromData(i,r,t,e);o.enableNearestScaling(),o.enableWrapClamp();var s=new n(i,t,e);return s.enableTexture(o),s.unbind(),s},t.exports=n},{"./GLTexture":12}],11:[function(r,t){var d=r('./shader/compileProgram'),n=r('./shader/extractAttributes'),i=r('./shader/extractUniforms'),o=r('./shader/setPrecision'),s=r('./shader/generateUniformAccessObject'),e=function(a,t,e,r,l){this.gl=a,r&&(t=o(t,r),e=o(e,r)),this.program=d(a,t,e,l),this.attributes=n(a,this.program),this.uniformData=i(a,this.program),this.uniforms=s(a,this.uniformData)};e.prototype.bind=function(){this.gl.useProgram(this.program)},e.prototype.destroy=function(){this.attributes=null,this.uniformData=null,this.uniforms=null,this.gl.deleteProgram(this.program)},t.exports=e},{"./shader/compileProgram":17,"./shader/extractAttributes":19,"./shader/extractUniforms":20,"./shader/generateUniformAccessObject":21,"./shader/setPrecision":25}],12:[function(r,t){var a=function(n,t,e,r,a){this.gl=n,this.texture=n.createTexture(),this.mipmap=!1,this.premultiplyAlpha=!1,this.width=t||-1,this.height=e||-1,this.format=r||n.RGBA,this.type=a||n.UNSIGNED_BYTE};a.prototype.upload=function(a){this.bind();var t=this.gl;t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha);var e=a.videoWidth||a.width,r=a.videoHeight||a.height;r!==this.height||e!==this.width?t.texImage2D(t.TEXTURE_2D,0,this.format,this.format,this.type,a):t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.format,this.type,a),this.width=e,this.height=r};var e=!1;a.prototype.uploadData=function(a,t,o){this.bind();var r=this.gl;if(a instanceof Float32Array){if(!e){if(!r.getExtension('OES_texture_float'))throw new Error('floating point textures not available');e=!0}this.type=r.FLOAT}else this.type=this.type||r.UNSIGNED_BYTE;r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),t!==this.width||o!==this.height?r.texImage2D(r.TEXTURE_2D,0,this.format,t,o,0,this.format,this.type,a||null):r.texSubImage2D(r.TEXTURE_2D,0,0,0,t,o,this.format,this.type,a||null),this.width=t,this.height=o},a.prototype.bind=function(r){var t=this.gl;void 0!==r&&t.activeTexture(t.TEXTURE0+r),t.bindTexture(t.TEXTURE_2D,this.texture)},a.prototype.unbind=function(){var e=this.gl;e.bindTexture(e.TEXTURE_2D,null)},a.prototype.minFilter=function(r){var t=this.gl;this.bind(),this.mipmap?t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,r?t.LINEAR_MIPMAP_LINEAR:t.NEAREST_MIPMAP_NEAREST):t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,r?t.LINEAR:t.NEAREST)},a.prototype.magFilter=function(r){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,r?t.LINEAR:t.NEAREST)},a.prototype.enableMipmap=function(){var e=this.gl;this.bind(),this.mipmap=!0,e.generateMipmap(e.TEXTURE_2D)},a.prototype.enableLinearScaling=function(){this.minFilter(!0),this.magFilter(!0)},a.prototype.enableNearestScaling=function(){this.minFilter(!1),this.magFilter(!1)},a.prototype.enableWrapClamp=function(){var e=this.gl;this.bind(),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)},a.prototype.enableWrapRepeat=function(){var e=this.gl;this.bind(),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT)},a.prototype.enableWrapMirrorRepeat=function(){var e=this.gl;this.bind(),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.MIRRORED_REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.MIRRORED_REPEAT)},a.prototype.destroy=function(){this.gl.deleteTexture(this.texture)},a.fromSource=function(n,t,e){var r=new a(n);return r.premultiplyAlpha=e||!1,r.upload(t),r},a.fromData=function(n,t,e,r){var i=new a(n);return i.uploadData(t,e,r),i},t.exports=a},{}],13:[function(r,t){function a(n,t){if(this.nativeVaoExtension=null,a.FORCE_NATIVE||(this.nativeVaoExtension=n.getExtension('OES_vertex_array_object')||n.getExtension('MOZ_OES_vertex_array_object')||n.getExtension('WEBKIT_OES_vertex_array_object')),this.nativeState=t,this.nativeVaoExtension){this.nativeVao=this.nativeVaoExtension.createVertexArrayOES();var e=n.getParameter(n.MAX_VERTEX_ATTRIBS);this.nativeState={tempAttribState:Array(e),attribState:Array(e)}}this.gl=n,this.attributes=[],this.indexBuffer=null,this.dirty=!1}var o=r('./setVertexAttribArrays');a.prototype.constructor=a,t.exports=a,a.FORCE_NATIVE=!1,a.prototype.bind=function(){return this.nativeVao?(this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.dirty&&(this.dirty=!1,this.activate())):this.activate(),this},a.prototype.unbind=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(null),this},a.prototype.activate=function(){for(var a=this.gl,t=null,e=0,r;e<this.attributes.length;e++)r=this.attributes[e],t!==r.buffer&&(r.buffer.bind(),t=r.buffer),a.vertexAttribPointer(r.attribute.location,r.attribute.size,r.type||a.FLOAT,r.normalized||!1,r.stride||0,r.start||0);return o(a,this.attributes,this.nativeState),this.indexBuffer&&this.indexBuffer.bind(),this},a.prototype.addAttribute=function(a,s,d,r,n,i){return this.attributes.push({buffer:a,attribute:s,location:s.location,type:d||this.gl.FLOAT,normalized:r||!1,stride:n||0,start:i||0}),this.dirty=!0,this},a.prototype.addIndex=function(e){return this.indexBuffer=e,this.dirty=!0,this},a.prototype.clear=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.attributes.length=0,this.indexBuffer=null,this},a.prototype.draw=function(a,t,e){var r=this.gl;return this.indexBuffer?r.drawElements(a,t||this.indexBuffer.data.length,r.UNSIGNED_SHORT,2*(e||0)):r.drawArrays(a,e,t||this.getSize()),this},a.prototype.destroy=function(){this.gl=null,this.indexBuffer=null,this.attributes=null,this.nativeState=null,this.nativeVao&&this.nativeVaoExtension.deleteVertexArrayOES(this.nativeVao),this.nativeVaoExtension=null,this.nativeVao=null},a.prototype.getSize=function(){var e=this.attributes[0];return e.buffer.data.length/(e.stride/4||e.attribute.size)}},{"./setVertexAttribArrays":16}],14:[function(r,t){t.exports=function(n,t){var e=n.getContext('webgl',t)||n.getContext('experimental-webgl',t);if(!e)throw new Error('This browser does not support webGL. Try using the canvas renderer');return e}},{}],15:[function(r,t){var e={createContext:r('./createContext'),setVertexAttribArrays:r('./setVertexAttribArrays'),GLBuffer:r('./GLBuffer'),GLFramebuffer:r('./GLFramebuffer'),GLShader:r('./GLShader'),GLTexture:r('./GLTexture'),VertexArrayObject:r('./VertexArrayObject'),shader:r('./shader')};void 0!==t&&t.exports&&(t.exports=e),'undefined'!=typeof window&&(window.PIXI=window.PIXI||{},window.PIXI.glCore=e)},{"./GLBuffer":9,"./GLFramebuffer":10,"./GLShader":11,"./GLTexture":12,"./VertexArrayObject":13,"./createContext":14,"./setVertexAttribArrays":16,"./shader":22}],16:[function(r,t){t.exports=function(a,t,e){var r;if(e){var n=e.tempAttribState,i=e.attribState;for(r=0;r<n.length;r++)n[r]=!1;for(r=0;r<t.length;r++)n[t[r].attribute.location]=!0;for(r=0;r<i.length;r++)i[r]!==n[r]&&(i[r]=n[r],e.attribState[r]?a.enableVertexAttribArray(r):a.disableVertexAttribArray(r))}else for(r=0;r<t.length;r++){var o=t[r];a.enableVertexAttribArray(o.attribute.location)}}},{}],17:[function(r,t){var n=function(a,t,e){var r=a.createShader(t);return a.shaderSource(r,e),a.compileShader(r),a.getShaderParameter(r,a.COMPILE_STATUS)?r:(console.log(a.getShaderInfoLog(r)),null)};t.exports=function(i,t,e,r){var d=n(i,i.VERTEX_SHADER,t),o=n(i,i.FRAGMENT_SHADER,e),s=i.createProgram();if(i.attachShader(s,d),i.attachShader(s,o),r)for(var a in r)i.bindAttribLocation(s,r[a],a);return i.linkProgram(s),i.getProgramParameter(s,i.LINK_STATUS)||(console.error('Pixi.js Error: Could not initialize shader.'),console.error('gl.VALIDATE_STATUS',i.getProgramParameter(s,i.VALIDATE_STATUS)),console.error('gl.getError()',i.getError()),''!==i.getProgramInfoLog(s)&&console.warn('Pixi.js Warning: gl.getProgramInfoLog()',i.getProgramInfoLog(s)),i.deleteProgram(s),s=null),i.deleteShader(d),i.deleteShader(o),s}},{}],18:[function(r,t){var n=function(n){for(var t=Array(n),e=0;e<t.length;e++)t[e]=!1;return t};t.exports=function(r,t){return'float'===r?0:'vec2'===r?new Float32Array(2*t):'vec3'===r?new Float32Array(3*t):'vec4'===r?new Float32Array(4*t):'int'===r||'sampler2D'===r?0:'ivec2'===r?new Int32Array(2*t):'ivec3'===r?new Int32Array(3*t):'ivec4'===r?new Int32Array(4*t):'bool'!=r&&('bvec2'===r?n(2*t):'bvec3'===r?n(3*t):'bvec4'===r?n(4*t):'mat2'===r?new Float32Array([1,0,0,1]):'mat3'===r?new Float32Array([1,0,0,0,1,0,0,0,1]):'mat4'===r?new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]):void 0)}},{}],19:[function(r,t){var o=r('./mapType'),n=r('./mapSize'),i=function(a,t,e,r){gl.vertexAttribPointer(this.location,this.size,a||gl.FLOAT,t||!1,e||0,r||0)};t.exports=function(d,t){for(var e={},r=d.getProgramParameter(t,d.ACTIVE_ATTRIBUTES),l=0;l<r;l++){var a=d.getActiveAttrib(t,l),u=o(d,a.type);e[a.name]={type:u,size:n(u),location:d.getAttribLocation(t,a.name),pointer:i}}return e}},{"./mapSize":23,"./mapType":24}],20:[function(r,t){var o=r('./mapType'),n=r('./defaultValue');t.exports=function(i,t){for(var e={},r=i.getProgramParameter(t,i.ACTIVE_UNIFORMS),d=0;d<r;d++){var s=i.getActiveUniform(t,d),a=s.name.replace(/\[.*?\]/,''),l=o(i,s.type);e[a]={type:l,size:s.size,location:i.getUniformLocation(t,a),value:n(l,s.size)}}return e}},{"./defaultValue":18,"./mapType":24}],21:[function(r,t){var p=function(r){var t='return this.data.%%.value;'.replace('%%',r);return new Function(t)},i=function(o,t){var e='this.data.%%.value = value;\nvar location = this.data.%%.location;'.replace(/%%/g,o),n;return n=1===t.size?a[t.type]:s[t.type],n&&(e+='\nthis.gl.'+n+';'),new Function('value',e)},o=function(a,t){for(var e=t,r=0,n;r<a.length-1;r++)n=e[a[r]]||{data:{}},e[a[r]]=n,e=n;return e},a={float:'uniform1f(location, value)',vec2:'uniform2f(location, value[0], value[1])',vec3:'uniform3f(location, value[0], value[1], value[2])',vec4:'uniform4f(location, value[0], value[1], value[2], value[3])',int:'uniform1i(location, value)',ivec2:'uniform2i(location, value[0], value[1])',ivec3:'uniform3i(location, value[0], value[1], value[2])',ivec4:'uniform4i(location, value[0], value[1], value[2], value[3])',bool:'uniform1i(location, value)',bvec2:'uniform2i(location, value[0], value[1])',bvec3:'uniform3i(location, value[0], value[1], value[2])',bvec4:'uniform4i(location, value[0], value[1], value[2], value[3])',mat2:'uniformMatrix2fv(location, false, value)',mat3:'uniformMatrix3fv(location, false, value)',mat4:'uniformMatrix4fv(location, false, value)',sampler2D:'uniform1i(location, value)'},s={float:'uniform1fv(location, value)',vec2:'uniform2fv(location, value)',vec3:'uniform3fv(location, value)',vec4:'uniform4fv(location, value)',int:'uniform1iv(location, value)',ivec2:'uniform2iv(location, value)',ivec3:'uniform3iv(location, value)',ivec4:'uniform4iv(location, value)',bool:'uniform1iv(location, value)',bvec2:'uniform2iv(location, value)',bvec3:'uniform3iv(location, value)',bvec4:'uniform4iv(location, value)',sampler2D:'uniform1iv(location, value)'};t.exports=function(s,f){for(var e={data:{},gl:s},r=Object.keys(f),n=0;n<r.length;n++){var a=r[n],u=a.split('.'),h=u[u.length-1],l=o(u,e),c=f[a];l.data[h]=c,l.gl=s,Object.defineProperty(l,h,{get:p(h),set:i(h,c)})}return e}},{}],22:[function(r,t){t.exports={compileProgram:r('./compileProgram'),defaultValue:r('./defaultValue'),extractAttributes:r('./extractAttributes'),extractUniforms:r('./extractUniforms'),generateUniformAccessObject:r('./generateUniformAccessObject'),setPrecision:r('./setPrecision'),mapSize:r('./mapSize'),mapType:r('./mapType')}},{"./compileProgram":17,"./defaultValue":18,"./extractAttributes":19,"./extractUniforms":20,"./generateUniformAccessObject":21,"./mapSize":23,"./mapType":24,"./setPrecision":25}],23:[function(r,t){var e={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};t.exports=function(r){return e[r]}},{}],24:[function(r,t){var a=null,e={FLOAT:'float',FLOAT_VEC2:'vec2',FLOAT_VEC3:'vec3',FLOAT_VEC4:'vec4',INT:'int',INT_VEC2:'ivec2',INT_VEC3:'ivec3',INT_VEC4:'ivec4',BOOL:'bool',BOOL_VEC2:'bvec2',BOOL_VEC3:'bvec3',BOOL_VEC4:'bvec4',FLOAT_MAT2:'mat2',FLOAT_MAT3:'mat3',FLOAT_MAT4:'mat4',SAMPLER_2D:'sampler2D'};t.exports=function(o,t){if(!a){var d=Object.keys(e);a={};for(var r=0,n;r<d.length;++r)n=d[r],a[o[n]]=e[n]}return a[t]}},{}],25:[function(r,t){t.exports=function(r,t){return'precision'===r.substring(0,9)?r:'precision '+t+' float;\n'+r}},{}],26:[function(r,t){function e(){throw new Error('setTimeout has not been defined')}function n(){throw new Error('clearTimeout has not been defined')}function i(r){if(f===setTimeout)return setTimeout(r,0);if((f===e||!f)&&setTimeout)return f=setTimeout,setTimeout(r,0);try{return f(r,0)}catch(t){try{return f.call(null,r,0)}catch(t){return f.call(this,r,0)}}}function o(e){if(m===clearTimeout)return clearTimeout(e);if((m===n||!m)&&clearTimeout)return m=clearTimeout,clearTimeout(e);try{return m(e)}catch(t){try{return m.call(null,e)}catch(t){return m.call(this,e)}}}function s(){x&&g&&(x=!1,g.length?_=g.concat(_):b=-1,_.length&&a())}function a(){if(!x){var r=i(s);x=!0;for(var t=_.length;t;){for(g=_,_=[];++b<t;)g&&g[b].run();b=-1,t=_.length}g=null,x=!1,o(r)}}function u(r,t){this.fun=r,this.array=t}function h(){}var l=t.exports={},f,m;!function(){try{f='function'==typeof setTimeout?setTimeout:e}catch(r){f=e}try{m='function'==typeof clearTimeout?clearTimeout:n}catch(e){m=n}}();var _=[],x=!1,b=-1,g;l.nextTick=function(n){var t=Array(arguments.length-1);if(1<arguments.length)for(var e=1;e<arguments.length;e++)t[e-1]=arguments[e];_.push(new u(n,t)),1!==_.length||x||i(a)},u.prototype.run=function(){this.fun.apply(null,this.array)},l.title='browser',l.browser=!0,l.env={},l.argv=[],l.version='',l.versions={},l.on=h,l.addListener=h,l.once=h,l.off=h,l.removeListener=h,l.removeAllListeners=h,l.emit=h,l.prependListener=h,l.prependOnceListener=h,l.listeners=function(){return[]},l.binding=function(){throw new Error('process.binding is not supported')},l.cwd=function(){return'/'},l.chdir=function(){throw new Error('process.chdir is not supported')},l.umask=function(){return 0}},{}],27:[function(o,v,X){(function(G){!function(W){function H(e){throw new RangeError(A[e])}function o(a,t){for(var e=a.length,r=[];e--;)r[e]=t(a[e]);return r}function i(a,t){var e=a.split('@'),r='';return 1<e.length&&(r=e[0]+'@',a=e[1]),a=a.replace(O,'.'),r+o(a.split('.'),t).join('.')}function j(a){for(var t=[],n=0,i=a.length,o,e;n<i;)o=a.charCodeAt(n++),55296<=o&&56319>=o&&n<i?(e=a.charCodeAt(n++),56320==(64512&e)?t.push(((1023&o)<<10)+(1023&e)+65536):(t.push(o),n--)):t.push(o);return t}function Y(e){return o(e,function(r){var t='';return 65535<r&&(r-=65536,t+=L(55296|1023&r>>>10),r=56320|1023&r),t+=L(r)}).join('')}function V(e){return 10>e-48?e-22:26>e-65?e-65:26>e-97?e-97:T}function a(r,t){return r+22+75*(26>r)-((0!=t)<<5)}function q(a,t,e){var r=0;for(a=e?I(a/_):a>>1,a+=I(a/t);a>D*E>>1;r+=T)a=I(a/D);return I(r+(D+1)*a/(a+m))}function s(o){var t=[],d=o.length,l=0,h=P,g=S,m,e,r,n,i,s,a,u,c,_;for(e=o.lastIndexOf(C),0>e&&(e=0),r=0;r<e;++r)128<=o.charCodeAt(r)&&H('not-basic'),t.push(o.charCodeAt(r));for(n=0<e?e+1:0;n<d;){for(i=l,s=1,a=T;n>=d&&H('invalid-input'),u=V(o.charCodeAt(n++)),(u>=T||u>I((K-l)/s))&&H('overflow'),l+=u*s,c=a<=g?w:a>=g+E?E:a-g,!(u<c);a+=T)_=T-c,s>I(K/_)&&H('overflow'),s*=_;m=t.length+1,g=q(l-i,m,0==i),I(l/m)>K-h&&H('overflow'),h+=I(l/m),l%=m,t.splice(l++,0,h)}return Y(t)}function d(o){var t=[],d,e,r,n,i,s,u,c,l,h,f,x,y,g,m;for(o=j(o),x=o.length,d=P,e=0,i=S,s=0;s<x;++s)128>(f=o[s])&&t.push(L(f));for(r=n=t.length,n&&t.push(C);r<x;){for(u=K,s=0;s<x;++s)(f=o[s])>=d&&f<u&&(u=f);for(y=r+1,u-d>I((K-e)/y)&&H('overflow'),e+=(u-d)*y,d=u,s=0;s<x;++s)if(f=o[s],f<d&&++e>K&&H('overflow'),f==d){for(c=e,l=T;h=l<=i?w:l>=i+E?E:l-i,!(c<h);l+=T)m=c-h,g=T-h,t.push(L(a(h+m%g,0))),c=I(m/g);t.push(L(a(c,0))),i=q(e,y,r==n),e=0,++r}++e,++d}return t.join('')}var l='object'==('undefined'==typeof X?'undefined':z(X))&&X&&!X.nodeType&&X,c='object'==('undefined'==typeof v?'undefined':z(v))&&v&&!v.nodeType&&v,g='object'==('undefined'==typeof G?'undefined':z(G))&&G;g.global!==g&&g.window!==g&&g.self!==g||(W=g);var K=2147483647,T=36,w=1,E=26,m=38,_=700,S=72,P=128,C='-',M=/^xn--/,R=/[^\x20-\x7E]/,O=/[\x2E\u3002\uFF0E\uFF61]/g,A={overflow:'Overflow: input needs wider integers to process',"not-basic":'Illegal input >= 0x80 (not a basic code point)',"invalid-input":'Invalid input'},D=T-w,I=k,L=y,N,b;if(N={version:'1.4.1',ucs2:{decode:j,encode:Y},decode:s,encode:d,toASCII:function(e){return i(e,function(e){return R.test(e)?'xn--'+d(e):e})},toUnicode:function(e){return i(e,function(e){return M.test(e)?s(e.slice(4).toLowerCase()):e})}},'function'==typeof U&&'object'==z(U.amd)&&U.amd)U('punycode',function(){return N});else if(!(l&&c))W.punycode=N;else if(v.exports==l)c.exports=N;else for(b in N)N.hasOwnProperty(b)&&(l[b]=N[b])}(this)}).call(this,'undefined'==typeof a?'undefined'==typeof self?'undefined'==typeof window?{}:window:self:a)},{}],28:[function(r,t){function e(r,t){return Object.prototype.hasOwnProperty.call(r,t)}t.exports=function(i,g,m,r){g=g||'&',m=m||'=';var o={};if('string'!=typeof i||0===i.length)return o;var s=/\+/g;i=i.split(g);var a=1e3;r&&'number'==typeof r.maxKeys&&(a=r.maxKeys);var u=i.length;0<a&&u>a&&(u=a);for(var h=0;h<u;++h){var l=i[h].replace(s,'%20'),_=l.indexOf(m),y,c,d,f;0<=_?(y=l.substr(0,_),c=l.substr(_+1)):(y=l,c=''),d=decodeURIComponent(y),f=decodeURIComponent(c),e(o,d)?n(o[d])?o[d].push(f):o[d]=[o[d],f]:o[d]=f}return o};var n=Array.isArray||function(e){return'[object Array]'===Object.prototype.toString.call(e)}},{}],29:[function(r,t){function d(a,t){if(a.map)return a.map(t);for(var e=[],r=0;r<a.length;r++)e.push(t(a[r],r));return e}var n=function(e){switch('undefined'==typeof e?'undefined':z(e)){case'string':return e;case'boolean':return e?'true':'false';case'number':return isFinite(e)?e:'';default:return'';}};t.exports=function(l,u,e,r){return u=u||'&',e=e||'=',null===l&&(l=void 0),'object'==('undefined'==typeof l?'undefined':z(l))?d(o(l),function(t){var r=encodeURIComponent(n(t))+e;return i(l[t])?d(l[t],function(e){return r+encodeURIComponent(n(e))}).join(u):r+encodeURIComponent(n(l[t]))}).join(u):r?encodeURIComponent(n(r))+e+encodeURIComponent(n(l)):''};var i=Array.isArray||function(e){return'[object Array]'===Object.prototype.toString.call(e)},o=Object.keys||function(n){var t=[];for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&t.push(e);return t}},{}],30:[function(n,t,e){e.decode=e.parse=n('./decode'),e.encode=e.stringify=n('./encode')},{"./decode":28,"./encode":29}],31:[function(r,t){t.exports=function(a,t,e){var r=a.length,i;if(!(t>=r||0===e)){e=t+e>r?r-t:e;var n=r-e;for(i=t;i<n;++i)a[i]=a[i+e];a.length=n}}},{}],32:[function(g,t,e){function r(e){return e&&e.__esModule?e:{default:e}}function m(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}e.__esModule=!0;var _='function'==typeof Symbol&&'symbol'==z(Symbol.iterator)?function(e){return'undefined'==typeof e?'undefined':z(e)}:function(e){return e&&'function'==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?'symbol':'undefined'==typeof e?'undefined':z(e)},n=g('mini-signals'),o=r(n),a=g('parse-uri'),i=r(a),s=g('./async'),l=function(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t.default=n,t}(s),u=g('./Resource'),d=r(u),c=/(#[\w-]+)?$/,p=function(){function a(){var i=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:'',t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:10;m(this,a),this.baseUrl=e,this.progress=0,this.loading=!1,this.defaultQueryString='',this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(e,t){return i._loadResource(e,t)},this._queue=l.queue(this._boundLoadResource,t),this._queue.pause(),this.resources={},this.onProgress=new o.default,this.onError=new o.default,this.onLoad=new o.default,this.onStart=new o.default,this.onComplete=new o.default}return a.prototype.add=function(o,t,p,f){if(Array.isArray(o)){for(var g=0;g<o.length;++g)this.add(o[g]);return this}if('object'===(void 0===o?'undefined':_(o))&&(f=t||o.callback||o.onComplete,p=o,t=o.url,o=o.name||o.key||o.url),'string'!=typeof t&&(f=p,p=t,t=o),'string'!=typeof t)throw new Error('No url passed to add resource to loader.');if('function'==typeof p&&(f=p,p=null),this.loading&&(!p||!p.parentResource))throw new Error('Cannot add resources while the loader is running.');if(this.resources[o])throw new Error('Resource named "'+o+'" already exists.');if(t=this._prepareUrl(t),this.resources[o]=new d.default(o,t,p),'function'==typeof f&&this.resources[o].onAfterMiddleware.once(f),this.loading){for(var i=p.parentResource,s=[],a=0;a<i.children.length;++a)i.children[a].isComplete||s.push(i.children[a]);var u=i.progressChunk*(s.length+1),h=u/(s.length+2);i.children.push(this.resources[o]),i.progressChunk=h;for(var l=0;l<s.length;++l)s[l].progressChunk=h;this.resources[o].progressChunk=h}return this._queue.push(this.resources[o]),this},a.prototype.pre=function(e){return this._beforeMiddleware.push(e),this},a.prototype.use=function(e){return this._afterMiddleware.push(e),this},a.prototype.reset=function(){for(var r in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){var t=this.resources[r];t._onLoadBinding&&t._onLoadBinding.detach(),t.isLoading&&t.abort()}return this.resources={},this},a.prototype.load=function(n){if('function'==typeof n&&this.onComplete.once(n),this.loading)return this;for(var a=100/this._queue._tasks.length,e=0;e<this._queue._tasks.length;++e)this._queue._tasks[e].data.progressChunk=a;return this.loading=!0,this.onStart.dispatch(this),this._queue.resume(),this},a.prototype._prepareUrl=function(a){var t=(0,i.default)(a,{strictMode:!0}),e;if(e=t.protocol||!t.path||0===a.indexOf('//')?a:this.baseUrl.length&&this.baseUrl.lastIndexOf('/')!==this.baseUrl.length-1&&'/'!==a.charAt(0)?this.baseUrl+'/'+a:this.baseUrl+a,this.defaultQueryString){var r=c.exec(e)[0];e=e.substr(0,e.length-r.length),e+=-1===e.indexOf('?')?'?'+this.defaultQueryString:'&'+this.defaultQueryString,e+=r}return e},a.prototype._loadResource=function(a,t){var o=this;a._dequeue=t,l.eachSeries(this._beforeMiddleware,function(t,e){t.call(o,a,function(){e(a.isComplete?{}:null)})},function(){a.isComplete?o._onLoad(a):(a._onLoadBinding=a.onComplete.once(o._onLoad,o),a.load())},!0)},a.prototype._onComplete=function(){this.loading=!1,this.onComplete.dispatch(this,this.resources)},a.prototype._onLoad=function(a){var t=this;a._onLoadBinding=null,this._resourcesParsing.push(a),a._dequeue(),l.eachSeries(this._afterMiddleware,function(e,r){e.call(t,a,r)},function(){a.onAfterMiddleware.dispatch(a),t.progress+=a.progressChunk,t.onProgress.dispatch(t,a),a.error?t.onError.dispatch(a.error,t,a):t.onLoad.dispatch(t,a),t._resourcesParsing.splice(t._resourcesParsing.indexOf(a),1),t._queue.idle()&&0===t._resourcesParsing.length&&(t.progress=100,t._onComplete())},!0)},a}();e.default=p},{"./Resource":33,"./async":34,"mini-signals":5,"parse-uri":7}],33:[function(g,t,e){function r(e){return e&&e.__esModule?e:{default:e}}function m(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}function i(){}function n(n,t,e){t&&0===t.indexOf('.')&&(t=t.substring(1)),t&&(n[t]=e)}function o(e){return e.toString().replace('object ','')}e.__esModule=!0;var a=function(){function a(a,o){for(var e=0,r;e<o.length;e++)r=o[e],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}return function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}}(),s=g('parse-uri'),u=r(s),l=g('mini-signals'),c=r(l),d=window.XDomainRequest&&!('withCredentials'in new XMLHttpRequest),h=null,p=function(){function s(t,a,o){if(m(this,s),'string'!=typeof t||'string'!=typeof a)throw new Error('Both name and url are required for constructing a resource.');o=o||{},this._flags=0,this._setFlag(s.STATUS_FLAGS.DATA_URL,0===a.indexOf('data:')),this.name=t,this.url=a,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===o.crossOrigin?'anonymous':o.crossOrigin,this.loadType=o.loadType||this._determineLoadType(),this.xhrType=o.xhrType,this.metadata=o.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=s.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=i,this._onLoadBinding=null,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this._boundXdrOnTimeout=this._xdrOnTimeout.bind(this),this.onStart=new c.default,this.onProgress=new c.default,this.onComplete=new c.default,this.onAfterMiddleware=new c.default}return s.setExtensionLoadType=function(t,e){n(s._loadTypeMap,t,e)},s.setExtensionXhrType=function(t,e){n(s._xhrTypeMap,t,e)},s.prototype.complete=function(){if(this.data&&this.data.removeEventListener&&(this.data.removeEventListener('error',this._boundOnError,!1),this.data.removeEventListener('load',this._boundComplete,!1),this.data.removeEventListener('progress',this._boundOnProgress,!1),this.data.removeEventListener('canplaythrough',this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener('error',this._boundXhrOnError,!1),this.xhr.removeEventListener('abort',this._boundXhrOnAbort,!1),this.xhr.removeEventListener('progress',this._boundOnProgress,!1),this.xhr.removeEventListener('load',this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null)),this.isComplete)throw new Error('Complete called again for an already completed resource.');this._setFlag(s.STATUS_FLAGS.COMPLETE,!0),this._setFlag(s.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},s.prototype.abort=function(t){if(!this.error){if(this.error=new Error(t),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=s.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this.complete()}},s.prototype.load=function(t){var e=this;if(!this.isLoading){if(this.isComplete)return void(t&&setTimeout(function(){return t(e)},1));switch(t&&this.onComplete.once(t),this._setFlag(s.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&'string'==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case s.LOAD_TYPE.IMAGE:this.type=s.TYPE.IMAGE,this._loadElement('image');break;case s.LOAD_TYPE.AUDIO:this.type=s.TYPE.AUDIO,this._loadSourceElement('audio');break;case s.LOAD_TYPE.VIDEO:this.type=s.TYPE.VIDEO,this._loadSourceElement('video');break;case s.LOAD_TYPE.XHR:default:d&&this.crossOrigin?this._loadXdr():this._loadXhr();}}},s.prototype._hasFlag=function(e){return!!(this._flags&e)},s.prototype._setFlag=function(r,n){this._flags=n?this._flags|r:this._flags&~r},s.prototype._loadElement=function(e){this.data=this.metadata.loadElement?this.metadata.loadElement:'image'===e&&void 0!==window.Image?new Image:document.createElement(e),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener('error',this._boundOnError,!1),this.data.addEventListener('load',this._boundComplete,!1),this.data.addEventListener('progress',this._boundOnProgress,!1)},s.prototype._loadSourceElement=function(a){if(this.data=this.metadata.loadElement?this.metadata.loadElement:'audio'===a&&void 0!==window.Audio?new Audio:document.createElement(a),null===this.data)return void this.abort('Unsupported element: '+a);if(!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var t=this.metadata.mimeType,e=0;e<this.url.length;++e)this.data.appendChild(this._createSource(a,this.url[e],Array.isArray(t)?t[e]:t));else{var r=this.metadata.mimeType;this.data.appendChild(this._createSource(a,this.url,Array.isArray(r)?r[0]:r))}this.data.addEventListener('error',this._boundOnError,!1),this.data.addEventListener('load',this._boundComplete,!1),this.data.addEventListener('progress',this._boundOnProgress,!1),this.data.addEventListener('canplaythrough',this._boundComplete,!1),this.data.load()},s.prototype._loadXhr=function(){'string'!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XMLHttpRequest;t.open('GET',this.url,!0),t.responseType=this.xhrType===s.XHR_RESPONSE_TYPE.JSON||this.xhrType===s.XHR_RESPONSE_TYPE.DOCUMENT?s.XHR_RESPONSE_TYPE.TEXT:this.xhrType,t.addEventListener('error',this._boundXhrOnError,!1),t.addEventListener('abort',this._boundXhrOnAbort,!1),t.addEventListener('progress',this._boundOnProgress,!1),t.addEventListener('load',this._boundXhrOnLoad,!1),t.send()},s.prototype._loadXdr=function(){'string'!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XDomainRequest;e.timeout=5e3,e.onerror=this._boundXhrOnError,e.ontimeout=this._boundXdrOnTimeout,e.onprogress=this._boundOnProgress,e.onload=this._boundXhrOnLoad,e.open('GET',this.url,!0),setTimeout(function(){return e.send()},1)},s.prototype._createSource=function(a,t,e){e||(e=a+'/'+this._getExtension(t));var r=document.createElement('source');return r.src=t,r.type=e,r},s.prototype._onError=function(e){this.abort('Failed to load element using: '+e.target.nodeName)},s.prototype._onProgress=function(e){e&&e.lengthComputable&&this.onProgress.dispatch(this,e.loaded/e.total)},s.prototype._xhrOnError=function(){var e=this.xhr;this.abort(o(e)+' Request failed. Status: '+e.status+', text: "'+e.statusText+'"')},s.prototype._xhrOnAbort=function(){this.abort(o(this.xhr)+' Request was aborted by the user.')},s.prototype._xdrOnTimeout=function(){this.abort(o(this.xhr)+' Request timed out.')},s.prototype._xhrOnLoad=function(){var t=this.xhr,e='',r=void 0===t.status?200:t.status;if(''!==t.responseType&&'text'!==t.responseType&&void 0!==t.responseType||(e=t.responseText),0===r&&0<e.length?r=200:1223==r&&(r=204),2!=(0|r/100))return void this.abort('['+t.status+'] '+t.statusText+': '+t.responseURL);if(this.xhrType===s.XHR_RESPONSE_TYPE.TEXT)this.data=e,this.type=s.TYPE.TEXT;else if(this.xhrType===s.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(e),this.type=s.TYPE.JSON}catch(e){return void this.abort('Error trying to parse loaded json: '+e)}else if(this.xhrType===s.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var n=new DOMParser;this.data=n.parseFromString(e,'text/xml')}else{var a=document.createElement('div');a.innerHTML=e,this.data=a}this.type=s.TYPE.XML}catch(e){return void this.abort('Error trying to parse loaded xml: '+e)}else this.data=t.response||e;this.complete()},s.prototype._determineCrossOrigin=function(a,t){if(0===a.indexOf('data:'))return'';t=t||window.location,h||(h=document.createElement('a')),h.href=a,a=(0,u.default)(h.href,{strictMode:!0});var e=!a.port&&''===t.port||a.port===t.port,r=a.protocol?a.protocol+':':'';return a.host===t.hostname&&e&&r===t.protocol?'':'anonymous'},s.prototype._determineXhrType=function(){return s._xhrTypeMap[this.extension]||s.XHR_RESPONSE_TYPE.TEXT},s.prototype._determineLoadType=function(){return s._loadTypeMap[this.extension]||s.LOAD_TYPE.XHR},s.prototype._getExtension=function(){var a=this.url,t='';if(this.isDataUrl){var e=a.indexOf('/');t=a.substring(e+1,a.indexOf(';',e))}else{var r=a.indexOf('?'),n=a.indexOf('#'),i=B(-1<r?r:a.length,-1<n?n:a.length);a=a.substring(0,i),t=a.substring(a.lastIndexOf('.')+1)}return t.toLowerCase()},s.prototype._getMimeFromXhrType=function(t){switch(t){case s.XHR_RESPONSE_TYPE.BUFFER:return'application/octet-binary';case s.XHR_RESPONSE_TYPE.BLOB:return'application/blob';case s.XHR_RESPONSE_TYPE.DOCUMENT:return'application/xml';case s.XHR_RESPONSE_TYPE.JSON:return'application/json';case s.XHR_RESPONSE_TYPE.DEFAULT:case s.XHR_RESPONSE_TYPE.TEXT:default:return'text/plain';}},a(s,[{key:'isDataUrl',get:function(){return this._hasFlag(s.STATUS_FLAGS.DATA_URL)}},{key:'isComplete',get:function(){return this._hasFlag(s.STATUS_FLAGS.COMPLETE)}},{key:'isLoading',get:function(){return this._hasFlag(s.STATUS_FLAGS.LOADING)}}]),s}();e.default=p,p.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},p.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},p.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},p.XHR_RESPONSE_TYPE={DEFAULT:'text',BUFFER:'arraybuffer',BLOB:'blob',DOCUMENT:'document',JSON:'json',TEXT:'text'},p._loadTypeMap={gif:p.LOAD_TYPE.IMAGE,png:p.LOAD_TYPE.IMAGE,bmp:p.LOAD_TYPE.IMAGE,jpg:p.LOAD_TYPE.IMAGE,jpeg:p.LOAD_TYPE.IMAGE,tif:p.LOAD_TYPE.IMAGE,tiff:p.LOAD_TYPE.IMAGE,webp:p.LOAD_TYPE.IMAGE,tga:p.LOAD_TYPE.IMAGE,svg:p.LOAD_TYPE.IMAGE,"svg+xml":p.LOAD_TYPE.IMAGE,mp3:p.LOAD_TYPE.AUDIO,ogg:p.LOAD_TYPE.AUDIO,wav:p.LOAD_TYPE.AUDIO,mp4:p.LOAD_TYPE.VIDEO,webm:p.LOAD_TYPE.VIDEO},p._xhrTypeMap={xhtml:p.XHR_RESPONSE_TYPE.DOCUMENT,html:p.XHR_RESPONSE_TYPE.DOCUMENT,htm:p.XHR_RESPONSE_TYPE.DOCUMENT,xml:p.XHR_RESPONSE_TYPE.DOCUMENT,tmx:p.XHR_RESPONSE_TYPE.DOCUMENT,svg:p.XHR_RESPONSE_TYPE.DOCUMENT,tsx:p.XHR_RESPONSE_TYPE.DOCUMENT,gif:p.XHR_RESPONSE_TYPE.BLOB,png:p.XHR_RESPONSE_TYPE.BLOB,bmp:p.XHR_RESPONSE_TYPE.BLOB,jpg:p.XHR_RESPONSE_TYPE.BLOB,jpeg:p.XHR_RESPONSE_TYPE.BLOB,tif:p.XHR_RESPONSE_TYPE.BLOB,tiff:p.XHR_RESPONSE_TYPE.BLOB,webp:p.XHR_RESPONSE_TYPE.BLOB,tga:p.XHR_RESPONSE_TYPE.BLOB,json:p.XHR_RESPONSE_TYPE.JSON,text:p.XHR_RESPONSE_TYPE.TEXT,txt:p.XHR_RESPONSE_TYPE.TEXT,ttf:p.XHR_RESPONSE_TYPE.BUFFER,otf:p.XHR_RESPONSE_TYPE.BUFFER},p.EMPTY_GIF='data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=='},{"mini-signals":5,"parse-uri":7}],34:[function(a,t,e){function d(){}function r(r){return function(){if(null===r)throw new Error('Callback was already called.');var t=r;r=null,t.apply(this,arguments)}}e.__esModule=!0,e.eachSeries=function(d,t,e,r){var n=0,i=d.length;!function o(s){return s||n===i?void(e&&e(s)):void(r?setTimeout(function(){t(d[n++],o)},1):t(d[n++],o))}()},e.queue=function(o,t){function l(n,a,e){if(null!=e&&'function'!=typeof e)throw new Error('task callback must be a function');if(s.started=!0,null==n&&s.idle())return void setTimeout(function(){return s.drain()},1);var o={data:n,callback:'function'==typeof e?e:d};a?s._tasks.unshift(o):s._tasks.push(o),setTimeout(function(){return s.process()},1)}function u(e){return function(){i-=1,e.callback.apply(e,arguments),null!=arguments[0]&&s.error(arguments[0],e.data),i<=s.concurrency-s.buffer&&s.unsaturated(),s.idle()&&s.drain(),s.process()}}if(null==t)t=1;else if(0===t)throw new Error('Concurrency must not be zero');var i=0,s={_tasks:[],concurrency:t,saturated:d,unsaturated:d,buffer:t/4,empty:d,drain:d,error:d,started:!1,paused:!1,push:function(r,t){l(r,!1,t)},kill:function(){i=0,s.drain=d,s.started=!1,s._tasks=[]},unshift:function(r,t){l(r,!0,t)},process:function(){for(;!s.paused&&i<s.concurrency&&s._tasks.length;){var t=s._tasks.shift();0===s._tasks.length&&s.empty(),i+=1,i===s.concurrency&&s.saturated(),o(t.data,r(u(t)))}},length:function(){return s._tasks.length},running:function(){return i},idle:function(){return 0===s._tasks.length+i},pause:function(){!0!==s.paused&&(s.paused=!0)},resume:function(){if(!1!==s.paused){s.paused=!1;for(var e=1;e<=s.concurrency;e++)s.process()}}};return s}},{}],35:[function(n,t,e){e.__esModule=!0,e.encodeBinary=function(i){for(var t='',e=0;e<i.length;){for(var d=[0,0,0],n=[0,0,0,0],o=0;o<d.length;++o)d[o]=e<i.length?255&i.charCodeAt(e++):0;switch(n[0]=d[0]>>2,n[1]=(3&d[0])<<4|d[1]>>4,n[2]=(15&d[1])<<2|d[2]>>6,n[3]=63&d[2],e-(i.length-1)){case 2:n[3]=64,n[2]=64;break;case 1:n[3]=64;}for(var s=0;s<n.length;++s)t+=r.charAt(n[s])}return t};var r='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/='},{}],36:[function(r,t){var e=r('./Loader').default,n=r('./Resource').default,a=r('./async'),o=r('./b64');e.Resource=n,e.async=a,e.base64=o,t.exports=e,t.exports.default=e},{"./Loader":32,"./Resource":33,"./async":34,"./b64":35}],37:[function(i,t,e){function r(e){return e&&e.__esModule?e:{default:e}}e.__esModule=!0;var n='function'==typeof Symbol&&'symbol'==z(Symbol.iterator)?function(e){return'undefined'==typeof e?'undefined':z(e)}:function(e){return e&&'function'==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?'symbol':'undefined'==typeof e?'undefined':z(e)};e.blobMiddlewareFactory=function(){return function(a,t){if(!a.data)return void t();if(a.xhr&&a.xhrType===s.default.XHR_RESPONSE_TYPE.BLOB)if(!(window.Blob&&'string'!=typeof a.data)){var e=a.xhr.getResponseHeader('content-type');if(e&&0===e.indexOf('image'))return a.data=new Image,a.data.src='data:'+e+';base64,'+d.default.encodeBinary(a.xhr.responseText),a.type=s.default.TYPE.IMAGE,void(a.data.onload=function(){a.data.onload=null,t()})}else if(0===a.data.type.indexOf('image')){var o=function(){var e=u.createObjectURL(a.data);return a.blob=a.data,a.data=new Image,a.data.src=e,a.type=s.default.TYPE.IMAGE,a.data.onload=function(){u.revokeObjectURL(e),a.data.onload=null,t()},{v:void 0}}();if('object'===(void 0===o?'undefined':n(o)))return o.v}t()}};var o=i('../../Resource'),s=r(o),a=i('../../b64'),d=r(a),u=window.URL||window.webkitURL},{"../../Resource":33,"../../b64":35}],38:[function(a,t,e){function f(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function r(n,t,e){if(n&&q.isObject(n)&&n instanceof f)return n;var r=new f;return r.parse(n,t,e),r}var n=a('punycode'),q=a('./util');e.parse=r,e.resolve=function(n,t){return r(n,!1,!0).resolve(t)},e.resolveObject=function(n,t){return n?r(n,!1,!0).resolveObject(t):t},e.format=function(e){return q.isString(e)&&(e=r(e)),e instanceof f?e.format():f.prototype.format.call(e)},e.Url=f;var u=/^([a-z0-9.+-]+:)/i,o=/:[0-9]*$/,i=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,s=['{','}','|','\\','^','`'].concat(['<','>','"','`',' ','\r','\n','\t']),d=['\''].concat(s),l=['%','/','?',';','#'].concat(d),p=['/','?','#'],c=/^[+a-z0-9A-Z_-]{0,63}$/,h=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,g={javascript:!0,"javascript:":!0},m={javascript:!0,"javascript:":!0},x={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},_=a('querystring');f.prototype.parse=function(y,b,e){if(!q.isString(y))throw new TypeError('Parameter \'url\' must be a string, not '+('undefined'==typeof y?'undefined':z(y)));var T=y.indexOf('?'),v=-1!==T&&T<y.indexOf('#')?'?':'#',w=y.split(v),o=/\\/g;w[0]=w[0].replace(o,'/'),y=w.join(v);var s=y;if(s=s.trim(),!e&&1===y.split('#').length){var a=i.exec(s);if(a)return this.path=s,this.href=s,this.pathname=a[1],a[2]?(this.search=a[2],this.query=b?_.parse(this.search.substr(1)):this.search.substr(1)):b&&(this.search='',this.query={}),this}var K=u.exec(s);if(K){K=K[0];var f=K.toLowerCase();this.protocol=f,s=s.substr(K.length)}if(e||K||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var Z='//'===s.substr(0,2);!Z||K&&m[K]||(s=s.substr(2),this.slashes=!0)}if(!m[K]&&(Z||K&&!x[K])){for(var J=-1,S=0,O;S<p.length;S++)O=s.indexOf(p[S]),-1!==O&&(-1==J||O<J)&&(J=O);var P,M;M=-1===J?s.lastIndexOf('@'):s.lastIndexOf('@',J),-1!==M&&(P=s.slice(0,M),s=s.slice(M+1),this.auth=decodeURIComponent(P)),J=-1;for(var S=0,O;S<l.length;S++)O=s.indexOf(l[S]),-1!==O&&(-1===J||O<J)&&(J=O);-1===J&&(J=s.length),this.host=s.slice(0,J),s=s.slice(J),this.parseHost(),this.hostname=this.hostname||'';var C='['===this.hostname[0]&&']'===this.hostname[this.hostname.length-1];if(!C)for(var Q=this.hostname.split(/\./),S=0,A=Q.length,I;S<A;S++)if(I=Q[S],I&&!I.match(c)){for(var D='',L=0,N=I.length;L<N;L++)D+=127<I.charCodeAt(L)?'x':I[L];if(!D.match(c)){var F=Q.slice(0,S),B=Q.slice(S+1),k=I.match(h);k&&(F.push(k[1]),B.unshift(k[2])),B.length&&(s='/'+B.join('.')+s),this.hostname=F.join('.');break}}this.hostname=255<this.hostname.length?'':this.hostname.toLowerCase(),C||(this.hostname=n.toASCII(this.hostname));var j=this.port?':'+this.port:'',U=this.hostname||'';this.host=U+j,this.href+=this.host,C&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),'/'!==s[0]&&(s='/'+s))}if(!g[f])for(var S=0,A=d.length,X;S<A;S++)if(X=d[S],-1!==s.indexOf(X)){var G=encodeURIComponent(X);G===X&&(G=escape(X)),s=s.split(X).join(G)}var W=s.indexOf('#');-1!==W&&(this.hash=s.substr(W),s=s.slice(0,W));var H=s.indexOf('?');if(-1===H?b&&(this.search='',this.query={}):(this.search=s.substr(H),this.query=s.substr(H+1),b&&(this.query=_.parse(this.query)),s=s.slice(0,H)),s&&(this.pathname=s),x[f]&&this.hostname&&!this.pathname&&(this.pathname='/'),this.pathname||this.search){var j=this.pathname||'',Y=this.search||'';this.path=j+Y}return this.href=this.format(),this},f.prototype.format=function(){var a=this.auth||'';a&&(a=encodeURIComponent(a),a=a.replace(/%3A/i,':'),a+='@');var t=this.protocol||'',d=this.pathname||'',r=this.hash||'',n=!1,i='';this.host?n=a+this.host:this.hostname&&(n=a+(-1===this.hostname.indexOf(':')?this.hostname:'['+this.hostname+']'),this.port&&(n+=':'+this.port)),this.query&&q.isObject(this.query)&&Object.keys(this.query).length&&(i=_.stringify(this.query));var o=this.search||i&&'?'+i||'';return t&&':'!==t.substr(-1)&&(t+=':'),this.slashes||(!t||x[t])&&!1!==n?(n='//'+(n||''),d&&'/'!==d.charAt(0)&&(d='/'+d)):n||(n=''),r&&'#'!==r.charAt(0)&&(r='#'+r),o&&'?'!==o.charAt(0)&&(o='?'+o),d=d.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),o=o.replace('#','%23'),t+n+d+o+r},f.prototype.resolve=function(e){return this.resolveObject(r(e,!1,!0)).format()},f.prototype.resolveObject=function(n){if(q.isString(n)){var t=new f;t.parse(n,!1,!0),n=t}for(var e=new f,r=Object.keys(this),i=0,o;i<r.length;i++)o=r[i],e[o]=this[o];if(e.hash=n.hash,''===n.href)return e.href=e.format(),e;if(n.slashes&&!n.protocol){for(var s=Object.keys(n),a=0,u;a<s.length;a++)u=s[a],'protocol'!==u&&(e[u]=n[u]);return x[e.protocol]&&e.hostname&&!e.pathname&&(e.path=e.pathname='/'),e.href=e.format(),e}if(n.protocol&&n.protocol!==e.protocol){if(!x[n.protocol]){for(var l=Object.keys(n),c=0,d;c<l.length;c++)d=l[c],e[d]=n[d];return e.href=e.format(),e}if(e.protocol=n.protocol,n.host||m[n.protocol])e.pathname=n.pathname;else{for(var h=(n.pathname||'').split('/');h.length&&!(n.host=h.shift()););n.host||(n.host=''),n.hostname||(n.hostname=''),''!==h[0]&&h.unshift(''),2>h.length&&h.unshift(''),e.pathname=h.join('/')}if(e.search=n.search,e.query=n.query,e.host=n.host||'',e.auth=n.auth,e.hostname=n.hostname||n.host,e.port=n.port,e.pathname||e.search){var p=e.pathname||'',T=e.search||'';e.path=p+T}return e.slashes=e.slashes||n.slashes,e.href=e.format(),e}var y=e.pathname&&'/'===e.pathname.charAt(0),g=n.host||n.pathname&&'/'===n.pathname.charAt(0),v=g||y||e.host&&n.pathname,A=v,D=e.pathname&&e.pathname.split('/')||[],h=n.pathname&&n.pathname.split('/')||[],w=e.protocol&&!x[e.protocol];if(w&&(e.hostname='',e.port=null,e.host&&(''===D[0]?D[0]=e.host:D.unshift(e.host)),e.host='',n.protocol&&(n.hostname=null,n.port=null,n.host&&(''===h[0]?h[0]=n.host:h.unshift(n.host)),n.host=null),v=v&&(''===h[0]||''===D[0])),g)e.host=n.host||''===n.host?n.host:e.host,e.hostname=n.hostname||''===n.hostname?n.hostname:e.hostname,e.search=n.search,e.query=n.query,D=h;else if(h.length)D||(D=[]),D.pop(),D=D.concat(h),e.search=n.search,e.query=n.query;else if(!q.isNullOrUndefined(n.search)){if(w){e.hostname=e.host=D.shift();var E=!!(e.host&&0<e.host.indexOf('@'))&&e.host.split('@');E&&(e.auth=E.shift(),e.host=e.hostname=E.shift())}return e.search=n.search,e.query=n.query,q.isNull(e.pathname)&&q.isNull(e.search)||(e.path=(e.pathname?e.pathname:'')+(e.search?e.search:'')),e.href=e.format(),e}if(!D.length)return e.pathname=null,e.path=e.search?'/'+e.search:null,e.href=e.format(),e;for(var S=D.slice(-1)[0],O=(e.host||n.host||1<D.length)&&('.'===S||'..'===S)||''===S,P=0,M=D.length;0<=M;M--)S=D[M],'.'===S?D.splice(M,1):'..'===S?(D.splice(M,1),P++):P&&(D.splice(M,1),P--);if(!v&&!A)for(;P--;P)D.unshift('..');!v||''===D[0]||D[0]&&'/'===D[0].charAt(0)||D.unshift(''),O&&'/'!==D.join('/').substr(-1)&&D.push('');var C=''===D[0]||D[0]&&'/'===D[0].charAt(0);if(w){e.hostname=e.host=C?'':D.length?D.shift():'';var E=!!(e.host&&0<e.host.indexOf('@'))&&e.host.split('@');E&&(e.auth=E.shift(),e.host=e.hostname=E.shift())}return v=v||e.host&&D.length,v&&!C&&D.unshift(''),D.length?e.pathname=D.join('/'):(e.pathname=null,e.path=null),q.isNull(e.pathname)&&q.isNull(e.search)||(e.path=(e.pathname?e.pathname:'')+(e.search?e.search:'')),e.auth=n.auth||e.auth,e.slashes=e.slashes||n.slashes,e.href=e.format(),e},f.prototype.parseHost=function(){var r=this.host,t=o.exec(r);t&&(t=t[0],':'!==t&&(this.port=t.substr(1)),r=r.substr(0,r.length-t.length)),r&&(this.hostname=r)}},{"./util":39,punycode:27,querystring:30}],39:[function(r,t){t.exports={isString:function(e){return'string'==typeof e},isObject:function(e){return'object'==('undefined'==typeof e?'undefined':z(e))&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},{}],40:[function(d,t,e){function r(e){return e&&e.__esModule?e:{default:e}}function n(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}e.__esModule=!0;var i=d('../core'),f=function(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t.default=n,t}(i),o=d('ismobilejs'),a=r(o),s=d('./accessibleTarget'),u=r(s);f.utils.mixins.delayMixin(f.DisplayObject.prototype,u.default);var l=100,c=2,p=function(){function o(t){n(this,o),(a.default.tablet||a.default.phone)&&!navigator.isCocoonJS&&this.createTouchHook();var e=document.createElement('div');e.style.width=l+'px',e.style.height=l+'px',e.style.position='absolute',e.style.top=0+'px',e.style.left=0+'px',e.style.zIndex=c,this.div=e,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=t,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this.isActive=!1,this.isMobileAccessabillity=!1,window.addEventListener('keydown',this._onKeyDown,!1)}return o.prototype.createTouchHook=function(){var r=this,t=document.createElement('button');t.style.width='1px',t.style.height='1px',t.style.position='absolute',t.style.top='-1000px',t.style.left='-1000px',t.style.zIndex=2,t.style.backgroundColor='#FF0000',t.title='HOOK DIV',t.addEventListener('focus',function(){r.isMobileAccessabillity=!0,r.activate(),document.body.removeChild(t)}),document.body.appendChild(t)},o.prototype.activate=function(){this.isActive||(this.isActive=!0,window.document.addEventListener('mousemove',this._onMouseMove,!0),window.removeEventListener('keydown',this._onKeyDown,!1),this.renderer.on('postrender',this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},o.prototype.deactivate=function(){this.isActive&&!this.isMobileAccessabillity&&(this.isActive=!1,window.document.removeEventListener('mousemove',this._onMouseMove),window.addEventListener('keydown',this._onKeyDown,!1),this.renderer.off('postrender',this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},o.prototype.updateAccessibleObjects=function(n){if(n.visible){n.accessible&&n.interactive&&(n._accessibleActive||this.addChild(n),n.renderId=this.renderId);for(var t=n.children,e=t.length-1;0<=e;e--)this.updateAccessibleObjects(t[e])}},o.prototype.update=function(){if(this.renderer.renderingToScreen){this.updateAccessibleObjects(this.renderer._lastObjectRendered);var s=this.renderer.view.getBoundingClientRect(),t=s.width/this.renderer.width,e=s.height/this.renderer.height,r=this.div;r.style.left=s.left+'px',r.style.top=s.top+'px',r.style.width=this.renderer.width+'px',r.style.height=this.renderer.height+'px';for(var n=0,i;n<this.children.length;n++)if(i=this.children[n],i.renderId!==this.renderId)i._accessibleActive=!1,f.utils.removeItems(this.children,n,1),this.div.removeChild(i._accessibleDiv),this.pool.push(i._accessibleDiv),i._accessibleDiv=null,n--,0===this.children.length&&this.deactivate();else{r=i._accessibleDiv;var o=i.hitArea,a=i.worldTransform;i.hitArea?(r.style.left=(a.tx+o.x*a.a)*t+'px',r.style.top=(a.ty+o.y*a.d)*e+'px',r.style.width=o.width*a.a*t+'px',r.style.height=o.height*a.d*e+'px'):(o=i.getBounds(),this.capHitArea(o),r.style.left=o.x*t+'px',r.style.top=o.y*e+'px',r.style.width=o.width*t+'px',r.style.height=o.height*e+'px')}this.renderId++}},o.prototype.capHitArea=function(e){0>e.x&&(e.width+=e.x,e.x=0),0>e.y&&(e.height+=e.y,e.y=0),e.x+e.width>this.renderer.width&&(e.width=this.renderer.width-e.x),e.y+e.height>this.renderer.height&&(e.height=this.renderer.height-e.y)},o.prototype.addChild=function(r){var t=this.pool.pop();t||(t=document.createElement('button'),t.style.width=l+'px',t.style.height=l+'px',t.style.backgroundColor=this.debug?'rgba(255,0,0,0.5)':'transparent',t.style.position='absolute',t.style.zIndex=c,t.style.borderStyle='none',t.addEventListener('click',this._onClick.bind(this)),t.addEventListener('focus',this._onFocus.bind(this)),t.addEventListener('focusout',this._onFocusOut.bind(this))),r.accessibleTitle?t.title=r.accessibleTitle:r.accessibleTitle||r.accessibleHint||(t.title='displayObject '+this.tabIndex),r.accessibleHint&&t.setAttribute('aria-label',r.accessibleHint),r._accessibleActive=!0,r._accessibleDiv=t,t.displayObject=r,this.children.push(r),this.div.appendChild(r._accessibleDiv),r._accessibleDiv.tabIndex=r.tabIndex},o.prototype._onClick=function(r){var t=this.renderer.plugins.interaction;t.dispatchEvent(r.target.displayObject,'click',t.eventData)},o.prototype._onFocus=function(r){var t=this.renderer.plugins.interaction;t.dispatchEvent(r.target.displayObject,'mouseover',t.eventData)},o.prototype._onFocusOut=function(r){var t=this.renderer.plugins.interaction;t.dispatchEvent(r.target.displayObject,'mouseout',t.eventData)},o.prototype._onKeyDown=function(e){9===e.keyCode&&this.activate()},o.prototype._onMouseMove=function(){this.deactivate()},o.prototype.destroy=function(){this.div=null;for(var e=0;e<this.children.length;e++)this.children[e].div=null;window.document.removeEventListener('mousemove',this._onMouseMove),window.removeEventListener('keydown',this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},o}();e.default=p,f.WebGLRenderer.registerPlugin('accessibility',p),f.CanvasRenderer.registerPlugin('accessibility',p)},{"../core":65,"./accessibleTarget":41,ismobilejs:4}],41:[function(n,t,e){e.__esModule=!0,e.default={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:!1}},{}],42:[function(a,t,e){function r(e){return e&&e.__esModule?e:{default:e}}e.__esModule=!0;var n=a('./accessibleTarget');Object.defineProperty(e,'accessibleTarget',{enumerable:!0,get:function(){return r(n).default}});var i=a('./AccessibilityManager');Object.defineProperty(e,'AccessibilityManager',{enumerable:!0,get:function(){return r(i).default}})},{"./AccessibilityManager":40,"./accessibleTarget":41}],43:[function(p,t,e){function r(e){return e&&e.__esModule?e:{default:e}}function g(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}e.__esModule=!0;var n=function(){function a(a,o){for(var e=0,r;e<o.length;e++)r=o[e],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}return function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}}(),i=p('./autoDetectRenderer'),o=p('./display/Container'),s=r(o),u=p('./ticker'),a=p('./settings'),l=r(a),c=p('./const'),d=function(){function d(t,p,r,n,c){g(this,d),'number'==typeof t&&(t=Object.assign({width:t,height:p||l.default.RENDER_OPTIONS.height,forceCanvas:!!n,sharedTicker:!!c},r)),this._options=t=Object.assign({autoStart:!0,sharedTicker:!1,forceCanvas:!1,sharedLoader:!1},t),this.renderer=(0,i.autoDetectRenderer)(t),this.stage=new s.default,this._ticker=null,this.ticker=t.sharedTicker?u.shared:new u.Ticker,t.autoStart&&this.start()}return d.prototype.render=function(){this.renderer.render(this.stage)},d.prototype.stop=function(){this._ticker.stop()},d.prototype.start=function(){this._ticker.start()},d.prototype.destroy=function(r){var t=this._ticker;this.ticker=null,t.destroy(),this.stage.destroy(),this.stage=null,this.renderer.destroy(r),this.renderer=null,this._options=null},n(d,[{key:'ticker',set:function(e){this._ticker&&this._ticker.remove(this.render,this),this._ticker=e,e&&e.add(this.render,this,c.UPDATE_PRIORITY.LOW)},get:function(){return this._ticker}},{key:'view',get:function(){return this.renderer.view}},{key:'screen',get:function(){return this.renderer.screen}}]),d}();e.default=d},{"./autoDetectRenderer":45,"./const":46,"./display/Container":48,"./settings":101,"./ticker":120}],44:[function(d,t,e){function p(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}function n(r,n){if(!r)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==('undefined'==typeof n?'undefined':z(n))||'function'==typeof n)?n:r}function r(r,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+('undefined'==typeof n?'undefined':z(n)));r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(r,n):r.__proto__=n)}function i(n,t){if(n instanceof Array){if('precision'!==n[0].substring(0,9)){var e=n.slice(0);return e.unshift('precision '+t+' float;'),e}}else if('precision'!==n.substring(0,9))return'precision '+t+' float;\n'+n;return n}e.__esModule=!0;var o=d('pixi-gl-core'),a=d('./settings'),s=function(e){return e&&e.__esModule?e:{default:e}}(a),u=function(d){function t(e,r,o){return p(this,t),n(this,d.call(this,e,i(r,s.default.PRECISION_VERTEX),i(o,s.default.PRECISION_FRAGMENT)))}return r(t,d),t}(o.GLShader);e.default=u},{"./settings":101,"pixi-gl-core":15}],45:[function(i,t,e){function r(e){return e&&e.__esModule?e:{default:e}}e.__esModule=!0,e.autoDetectRenderer=function(s,t,e,r){var n=s&&s.forceCanvas;return void 0!==r&&(n=r),!n&&o.isWebGLSupported()?new u.default(s,t,e):new a.default(s,t,e)};var n=i('./utils'),o=function(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t.default=n,t}(n),s=i('./renderers/canvas/CanvasRenderer'),a=r(s),d=i('./renderers/webgl/WebGLRenderer'),u=r(d)},{"./renderers/canvas/CanvasRenderer":77,"./renderers/webgl/WebGLRenderer":84,"./utils":124}],46:[function(n,t,e){e.__esModule=!0,e.VERSION='4.5.5',e.PI_2=2*C,e.RAD_TO_DEG=180/C,e.DEG_TO_RAD=C/180,e.RENDERER_TYPE={UNKNOWN:0,WEBGL:1,CANVAS:2},e.BLEND_MODES={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,NORMAL_NPM:17,ADD_NPM:18,SCREEN_NPM:19},e.DRAW_MODES={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},e.SCALE_MODES={LINEAR:0,NEAREST:1},e.WRAP_MODES={CLAMP:0,REPEAT:1,MIRRORED_REPEAT:2},e.GC_MODES={AUTO:0,MANUAL:1},e.URL_FILE_EXTENSION=/\.(\w{3,4})(?:$|\?|#)/i,e.DATA_URI=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;(charset=[\w-]+|base64))?,(.*)/i,e.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,e.SHAPES={POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},e.PRECISION={LOW:'lowp',MEDIUM:'mediump',HIGH:'highp'},e.TRANSFORM_MODE={STATIC:0,DYNAMIC:1},e.TEXT_GRADIENT={LINEAR_VERTICAL:0,LINEAR_HORIZONTAL:1},e.UPDATE_PRIORITY={INTERACTION:50,HIGH:25,NORMAL:0,LOW:-25,UTILITY:-50}},{}],47:[function(a,t,e){function r(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}e.__esModule=!0;var n=a('../math'),i=function(){function e(){r(this,e),this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null}return e.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},e.prototype.clear=function(){this.updateID++,this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},e.prototype.getRectangle=function(e){return this.minX>this.maxX||this.minY>this.maxY?n.Rectangle.EMPTY:(e=e||new n.Rectangle(0,0,1,1),e.x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)},e.prototype.addPoint=function(e){this.minX=B(this.minX,e.x),this.maxX=P(this.maxX,e.x),this.minY=B(this.minY,e.y),this.maxY=P(this.maxY,e.y)},e.prototype.addQuad=function(a){var t=this.minX,e=this.minY,r=this.maxX,n=this.maxY,i=a[0],o=a[1];t=i<t?i:t,e=o<e?o:e,r=i>r?i:r,n=o>n?o:n,i=a[2],o=a[3],t=i<t?i:t,e=o<e?o:e,r=i>r?i:r,n=o>n?o:n,i=a[4],o=a[5],t=i<t?i:t,e=o<e?o:e,r=i>r?i:r,n=o>n?o:n,i=a[6],o=a[7],t=i<t?i:t,e=o<e?o:e,r=i>r?i:r,n=o>n?o:n,this.minX=t,this.minY=e,this.maxX=r,this.maxY=n},e.prototype.addFrame=function(m,t,e,r,n){var i=m.worldTransform,o=i.a,s=i.b,a=i.c,u=i.d,h=i.tx,l=i.ty,c=this.minX,d=this.minY,f=this.maxX,p=this.maxY,_=o*t+a*e+h,y=s*t+u*e+l;c=_<c?_:c,d=y<d?y:d,f=_>f?_:f,p=y>p?y:p,_=o*r+a*e+h,y=s*r+u*e+l,c=_<c?_:c,d=y<d?y:d,f=_>f?_:f,p=y>p?y:p,_=o*t+a*n+h,y=s*t+u*n+l,c=_<c?_:c,d=y<d?y:d,f=_>f?_:f,p=y>p?y:p,_=o*r+a*n+h,y=s*r+u*n+l,c=_<c?_:c,d=y<d?y:d,f=_>f?_:f,p=y>p?y:p,this.minX=c,this.minY=d,this.maxX=f,this.maxY=p},e.prototype.addVertices=function(x,t,e,r){for(var n=x.worldTransform,i=n.a,o=n.b,s=n.c,a=n.d,u=n.tx,h=n.ty,l=this.minX,c=this.minY,d=this.maxX,f=this.maxY,p=e;p<r;p+=2){var b=t[p],y=t[p+1],g=i*b+s*y+u,m=a*y+o*b+h;l=g<l?g:l,c=m<c?m:c,d=g>d?g:d,f=m>f?m:f}this.minX=l,this.minY=c,this.maxX=d,this.maxY=f},e.prototype.addBounds=function(a){var t=this.minX,e=this.minY,r=this.maxX,n=this.maxY;this.minX=a.minX<t?a.minX:t,this.minY=a.minY<e?a.minY:e,this.maxX=a.maxX>r?a.maxX:r,this.maxY=a.maxY>n?a.maxY:n},e.prototype.addBoundsMask=function(d,t){var e=d.minX>t.minX?d.minX:t.minX,r=d.minY>t.minY?d.minY:t.minY,n=d.maxX<t.maxX?d.maxX:t.maxX,i=d.maxY<t.maxY?d.maxY:t.maxY;if(e<=n&&r<=i){var o=this.minX,s=this.minY,a=this.maxX,l=this.maxY;this.minX=e<o?e:o,this.minY=r<s?r:s,this.maxX=n>a?n:a,this.maxY=i>l?i:l}},e.prototype.addBoundsArea=function(d,t){var e=d.minX>t.x?d.minX:t.x,r=d.minY>t.y?d.minY:t.y,n=d.maxX<t.x+t.width?d.maxX:t.x+t.width,i=d.maxY<t.y+t.height?d.maxY:t.y+t.height;if(e<=n&&r<=i){var o=this.minX,s=this.minY,a=this.maxX,l=this.maxY;this.minX=e<o?e:o,this.minY=r<s?r:s,this.maxX=n>a?n:a,this.maxY=i>l?i:l}},e}();e.default=i},{"../math":70}],48:[function(d,t,e){function p(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}function n(r,n){if(!r)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==('undefined'==typeof n?'undefined':z(n))||'function'==typeof n)?n:r}function r(r,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+('undefined'==typeof n?'undefined':z(n)));r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(r,n):r.__proto__=n)}e.__esModule=!0;var o=function(){function a(a,o){for(var e=0,r;e<o.length;e++)r=o[e],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}return function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}}(),i=d('../utils'),a=d('./DisplayObject'),s=function(e){return e&&e.__esModule?e:{default:e}}(a),u=function(a){function t(){p(this,t);var e=n(this,a.call(this));return e.children=[],e}return r(t,a),t.prototype.onChildrenChange=function(){},t.prototype.addChild=function(n){var t=arguments.length;if(1<t)for(var e=0;e<t;e++)this.addChild(arguments[e]);else n.parent&&n.parent.removeChild(n),n.parent=this,n.transform._parentID=-1,this.children.push(n),this._boundsID++,this.onChildrenChange(this.children.length-1),n.emit('added',this);return n},t.prototype.addChildAt=function(r,t){if(0>t||t>this.children.length)throw new Error(r+'addChildAt: The index '+t+' supplied is out of bounds '+this.children.length);return r.parent&&r.parent.removeChild(r),r.parent=this,r.transform._parentID=-1,this.children.splice(t,0,r),this._boundsID++,this.onChildrenChange(t),r.emit('added',this),r},t.prototype.swapChildren=function(a,t){if(a!==t){var e=this.getChildIndex(a),r=this.getChildIndex(t);this.children[e]=t,this.children[r]=a,this.onChildrenChange(e<r?e:r)}},t.prototype.getChildIndex=function(r){var t=this.children.indexOf(r);if(-1===t)throw new Error('The supplied DisplayObject must be a child of the caller');return t},t.prototype.setChildIndex=function(n,t){if(0>t||t>=this.children.length)throw new Error('The supplied index is out of bounds');var e=this.getChildIndex(n);(0,i.removeItems)(this.children,e,1),this.children.splice(t,0,n),this.onChildrenChange(t)},t.prototype.getChildAt=function(e){if(0>e||e>=this.children.length)throw new Error('getChildAt: Index ('+e+') does not exist.');return this.children[e]},t.prototype.removeChild=function(a){var t=arguments.length;if(1<t)for(var e=0;e<t;e++)this.removeChild(arguments[e]);else{var r=this.children.indexOf(a);if(-1===r)return null;a.parent=null,a.transform._parentID=-1,(0,i.removeItems)(this.children,r,1),this._boundsID++,this.onChildrenChange(r),a.emit('removed',this)}return a},t.prototype.removeChildAt=function(r){var t=this.getChildAt(r);return t.parent=null,t.transform._parentID=-1,(0,i.removeItems)(this.children,r,1),this._boundsID++,this.onChildrenChange(r),t.emit('removed',this),t},t.prototype.removeChildren=function(){var d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=arguments[1],l=d,r='number'==typeof t?t:this.children.length,n=r-l,i;if(0<n&&n<=r){i=this.children.splice(l,n);for(var o=0;o<i.length;++o)i[o].parent=null,i[o].transform&&(i[o].transform._parentID=-1);this._boundsID++,this.onChildrenChange(d);for(var s=0;s<i.length;++s)i[s].emit('removed',this);return i}if(0==n&&0===this.children.length)return[];throw new RangeError('removeChildren: numeric values are outside the acceptable range.')},t.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var n=0,t=this.children.length,e;n<t;++n)e=this.children[n],e.visible&&e.updateTransform()},t.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var r=0,t;r<this.children.length;r++)t=this.children[r],t.visible&&t.renderable&&(t.calculateBounds(),t._mask?(t._mask.calculateBounds(),this._bounds.addBoundsMask(t._bounds,t._mask._bounds)):t.filterArea?this._bounds.addBoundsArea(t._bounds,t.filterArea):this._bounds.addBounds(t._bounds));this._lastBoundsID=this._boundsID},t.prototype._calculateBounds=function(){},t.prototype.renderWebGL=function(n){if(this.visible&&!(0>=this.worldAlpha)&&this.renderable)if(this._mask||this._filters)this.renderAdvancedWebGL(n);else{this._renderWebGL(n);for(var t=0,e=this.children.length;t<e;++t)this.children[t].renderWebGL(n)}},t.prototype.renderAdvancedWebGL=function(a){a.flush();var t=this._filters,e=this._mask;if(t){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var r=0;r<t.length;r++)t[r].enabled&&this._enabledFilters.push(t[r]);this._enabledFilters.length&&a.filterManager.pushFilter(this,this._enabledFilters)}e&&a.maskManager.pushMask(this,this._mask),this._renderWebGL(a);for(var n=0,i=this.children.length;n<i;n++)this.children[n].renderWebGL(a);a.flush(),e&&a.maskManager.popMask(this,this._mask),t&&this._enabledFilters&&this._enabledFilters.length&&a.filterManager.popFilter()},t.prototype._renderWebGL=function(){},t.prototype._renderCanvas=function(){},t.prototype.renderCanvas=function(n){if(this.visible&&!(0>=this.worldAlpha)&&this.renderable){this._mask&&n.maskManager.pushMask(this._mask),this._renderCanvas(n);for(var t=0,e=this.children.length;t<e;++t)this.children[t].renderCanvas(n);this._mask&&n.maskManager.popMask(n)}},t.prototype.destroy=function(t){a.prototype.destroy.call(this);var o='boolean'==typeof t?t:t&&t.children,r=this.removeChildren(0,this.children.length);if(o)for(var n=0;n<r.length;++n)r[n].destroy(t)},o(t,[{key:'width',get:function(){return this.scale.x*this.getLocalBounds().width},set:function(r){var t=this.getLocalBounds().width;this.scale.x=0===t?1:r/t,this._width=r}},{key:'height',get:function(){return this.scale.y*this.getLocalBounds().height},set:function(r){var t=this.getLocalBounds().height;this.scale.y=0===t?1:r/t,this._height=r}}]),t}(s.default);e.default=u,u.prototype.containerUpdateTransform=u.prototype.updateTransform},{"../utils":124,"./DisplayObject":49}],49:[function(x,t,e){function r(e){return e&&e.__esModule?e:{default:e}}function T(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}function i(r,n){if(!r)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==('undefined'==typeof n?'undefined':z(n))||'function'==typeof n)?n:r}function n(r,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+('undefined'==typeof n?'undefined':z(n)));r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(r,n):r.__proto__=n)}e.__esModule=!0;var o=function(){function a(a,o){for(var e=0,r;e<o.length;e++)r=o[e],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}return function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}}(),a=x('eventemitter3'),s=r(a),u=x('../const'),l=x('../settings'),c=r(l),d=x('./TransformStatic'),h=r(d),p=x('./Transform'),f=r(p),y=x('./Bounds'),g=r(y),m=x('../math'),_=function(a){function t(){T(this,t);var e=i(this,a.call(this)),r=c.default.TRANSFORM_MODE===u.TRANSFORM_MODE.STATIC?h.default:f.default;return e.tempDisplayObjectParent=null,e.transform=new r,e.alpha=1,e.visible=!0,e.renderable=!0,e.parent=null,e.worldAlpha=1,e.filterArea=null,e._filters=null,e._enabledFilters=null,e._bounds=new g.default,e._boundsID=0,e._lastBoundsID=-1,e._boundsRect=null,e._localBoundsRect=null,e._mask=null,e._destroyed=!1,e}return n(t,a),t.prototype.updateTransform=function(){this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._bounds.updateID++},t.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},t.prototype.getBounds=function(r,t){return r||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._boundsID!==this._lastBoundsID&&this.calculateBounds(),t||(this._boundsRect||(this._boundsRect=new m.Rectangle),t=this._boundsRect),this._bounds.getRectangle(t)},t.prototype.getLocalBounds=function(a){var t=this.transform,e=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform,a||(this._localBoundsRect||(this._localBoundsRect=new m.Rectangle),a=this._localBoundsRect);var r=this.getBounds(!1,a);return this.parent=e,this.transform=t,r},t.prototype.toGlobal=function(r,t){return 2<arguments.length&&void 0!==arguments[2]&&arguments[2]||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(r,t)},t.prototype.toLocal=function(a,t,e,r){return t&&(a=t.toGlobal(a,e,r)),r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(a,e)},t.prototype.renderWebGL=function(){},t.prototype.renderCanvas=function(){},t.prototype.setParent=function(e){if(!e||!e.addChild)throw new Error('setParent: Argument must be a Container');return e.addChild(this),e},t.prototype.setTransform=function(){var d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,n=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,i=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0,o=6<arguments.length&&void 0!==arguments[6]?arguments[6]:0,s=7<arguments.length&&void 0!==arguments[7]?arguments[7]:0,a=8<arguments.length&&void 0!==arguments[8]?arguments[8]:0;return this.position.x=d,this.position.y=t,this.scale.x=e||1,this.scale.y=r||1,this.rotation=n,this.skew.x=i,this.skew.y=o,this.pivot.x=s,this.pivot.y=a,this},t.prototype.destroy=function(){this.removeAllListeners(),this.parent&&this.parent.removeChild(this),this.transform=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.filterArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},o(t,[{key:'_tempDisplayObjectParent',get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new t),this.tempDisplayObjectParent}},{key:'x',get:function(){return this.position.x},set:function(e){this.transform.position.x=e}},{key:'y',get:function(){return this.position.y},set:function(e){this.transform.position.y=e}},{key:'worldTransform',get:function(){return this.transform.worldTransform}},{key:'localTransform',get:function(){return this.transform.localTransform}},{key:'position',get:function(){return this.transform.position},set:function(e){this.transform.position.copy(e)}},{key:'scale',get:function(){return this.transform.scale},set:function(e){this.transform.scale.copy(e)}},{key:'pivot',get:function(){return this.transform.pivot},set:function(e){this.transform.pivot.copy(e)}},{key:'skew',get:function(){return this.transform.skew},set:function(e){this.transform.skew.copy(e)}},{key:'rotation',get:function(){return this.transform.rotation},set:function(e){this.transform.rotation=e}},{key:'worldVisible',get:function(){var e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}},{key:'mask',get:function(){return this._mask},set:function(e){this._mask&&(this._mask.renderable=!0),this._mask=e,this._mask&&(this._mask.renderable=!1)}},{key:'filters',get:function(){return this._filters&&this._filters.slice()},set:function(e){this._filters=e&&e.slice()}}]),t}(s.default);e.default=_,_.prototype.displayObjectUpdateTransform=_.prototype.updateTransform},{"../const":46,"../math":70,"../settings":101,"./Bounds":47,"./Transform":50,"./TransformStatic":52,eventemitter3:3}],50:[function(d,t,e){function p(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}function n(r,n){if(!r)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==('undefined'==typeof n?'undefined':z(n))||'function'==typeof n)?n:r}function r(r,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+('undefined'==typeof n?'undefined':z(n)));r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(r,n):r.__proto__=n)}e.__esModule=!0;var o=function(){function a(a,o){for(var e=0,r;e<o.length;e++)r=o[e],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}return function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}}(),i=d('../math'),a=d('./TransformBase'),s=function(e){return e&&e.__esModule?e:{default:e}}(a),u=function(a){function t(){p(this,t);var e=n(this,a.call(this));return e.position=new i.Point(0,0),e.scale=new i.Point(1,1),e.skew=new i.ObservablePoint(e.updateSkew,e,0,0),e.pivot=new i.Point(0,0),e._rotation=0,e._cx=1,e._sx=0,e._cy=0,e._sy=1,e}return r(t,a),t.prototype.updateSkew=function(){this._cx=E(this._rotation+this.skew._y),this._sx=T(this._rotation+this.skew._y),this._cy=-T(this._rotation-this.skew._x),this._sy=E(this._rotation-this.skew._x)},t.prototype.updateLocalTransform=function(){var e=this.localTransform;e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d)},t.prototype.updateTransform=function(a){var t=this.localTransform;t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d);var e=a.worldTransform,r=this.worldTransform;r.a=t.a*e.a+t.b*e.c,r.b=t.a*e.b+t.b*e.d,r.c=t.c*e.a+t.d*e.c,r.d=t.c*e.b+t.d*e.d,r.tx=t.tx*e.a+t.ty*e.c+e.tx,r.ty=t.tx*e.b+t.ty*e.d+e.ty,this._worldID++},t.prototype.setFromMatrix=function(e){e.decompose(this)},o(t,[{key:'rotation',get:function(){return this._rotation},set:function(e){this._rotation=e,this.updateSkew()}}]),t}(s.default);e.default=u},{"../math":70,"./TransformBase":51}],51:[function(a,t,e){function r(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}e.__esModule=!0;var n=a('../math'),i=function(){function e(){r(this,e),this.worldTransform=new n.Matrix,this.localTransform=new n.Matrix,this._worldID=0,this._parentID=0}return e.prototype.updateLocalTransform=function(){},e.prototype.updateTransform=function(a){var t=a.worldTransform,e=this.worldTransform,r=this.localTransform;e.a=r.a*t.a+r.b*t.c,e.b=r.a*t.b+r.b*t.d,e.c=r.c*t.a+r.d*t.c,e.d=r.c*t.b+r.d*t.d,e.tx=r.tx*t.a+r.ty*t.c+t.tx,e.ty=r.tx*t.b+r.ty*t.d+t.ty,this._worldID++},e}();e.default=i,i.prototype.updateWorldTransform=i.prototype.updateTransform,i.IDENTITY=new i},{"../math":70}],52:[function(d,t,e){function p(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}function n(r,n){if(!r)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==('undefined'==typeof n?'undefined':z(n))||'function'==typeof n)?n:r}function r(r,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+('undefined'==typeof n?'undefined':z(n)));r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(r,n):r.__proto__=n)}e.__esModule=!0;var o=function(){function a(a,o){for(var e=0,r;e<o.length;e++)r=o[e],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}return function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}}(),i=d('../math'),a=d('./TransformBase'),s=function(e){return e&&e.__esModule?e:{default:e}}(a),u=function(a){function t(){p(this,t);var e=n(this,a.call(this));return e.position=new i.ObservablePoint(e.onChange,e,0,0),e.scale=new i.ObservablePoint(e.onChange,e,1,1),e.pivot=new i.ObservablePoint(e.onChange,e,0,0),e.skew=new i.ObservablePoint(e.updateSkew,e,0,0),e._rotation=0,e._cx=1,e._sx=0,e._cy=0,e._sy=1,e._localID=0,e._currentLocalID=0,e}return r(t,a),t.prototype.onChange=function(){this._localID++},t.prototype.updateSkew=function(){this._cx=E(this._rotation+this.skew._y),this._sx=T(this._rotation+this.skew._y),this._cy=-T(this._rotation-this.skew._x),this._sy=E(this._rotation-this.skew._x),this._localID++},t.prototype.updateLocalTransform=function(){var e=this.localTransform;this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale._x,e.b=this._sx*this.scale._x,e.c=this._cy*this.scale._y,e.d=this._sy*this.scale._y,e.tx=this.position._x-(this.pivot._x*e.a+this.pivot._y*e.c),e.ty=this.position._y-(this.pivot._x*e.b+this.pivot._y*e.d),this._currentLocalID=this._localID,this._parentID=-1)},t.prototype.updateTransform=function(a){var t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale._x,t.b=this._sx*this.scale._x,t.c=this._cy*this.scale._y,t.d=this._sy*this.scale._y,t.tx=this.position._x-(this.pivot._x*t.a+this.pivot._y*t.c),t.ty=this.position._y-(this.pivot._x*t.b+this.pivot._y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==a._worldID){var e=a.worldTransform,r=this.worldTransform;r.a=t.a*e.a+t.b*e.c,r.b=t.a*e.b+t.b*e.d,r.c=t.c*e.a+t.d*e.c,r.d=t.c*e.b+t.d*e.d,r.tx=t.tx*e.a+t.ty*e.c+e.tx,r.ty=t.tx*e.b+t.ty*e.d+e.ty,this._parentID=a._worldID,this._worldID++}},t.prototype.setFromMatrix=function(e){e.decompose(this),this._localID++},o(t,[{key:'rotation',get:function(){return this._rotation},set:function(e){this._rotation=e,this.updateSkew()}}]),t}(s.default);e.default=u},{"../math":70,"./TransformBase":51}],53:[function(D,t,e){function r(e){return e&&e.__esModule?e:{default:e}}function I(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}function i(r,n){if(!r)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==('undefined'==typeof n?'undefined':z(n))||'function'==typeof n)?n:r}function n(r,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+('undefined'==typeof n?'undefined':z(n)));r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(r,n):r.__proto__=n)}e.__esModule=!0;var o=D('../display/Container'),a=r(o),s=D('../textures/RenderTexture'),u=r(s),l=D('../textures/Texture'),c=r(l),d=D('./GraphicsData'),h=r(d),p=D('../sprites/Sprite'),f=r(p),y=D('../math'),g=D('../utils'),L=D('../const'),m=D('../display/Bounds'),_=r(m),x=D('./utils/bezierCurveTo'),b=r(x),v=D('../renderers/canvas/CanvasRenderer'),w=r(v),N=new y.Matrix,P=new y.Point,k=new Float32Array(4),B=new Float32Array(4),R=function(a){function o(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];I(this,o);var t=i(this,a.call(this));return t.fillAlpha=1,t.lineWidth=0,t.nativeLines=e,t.lineColor=0,t.graphicsData=[],t.tint=16777215,t._prevTint=16777215,t.blendMode=L.BLEND_MODES.NORMAL,t.currentPath=null,t._webGL={},t.isMask=!1,t.boundsPadding=0,t._localBounds=new _.default,t.dirty=0,t.fastRectDirty=-1,t.clearDirty=0,t.boundsDirty=-1,t.cachedSpriteDirty=!1,t._spriteRect=null,t._fastRect=!1,t}return n(o,a),o.prototype.clone=function(){var e=new o;e.renderable=this.renderable,e.fillAlpha=this.fillAlpha,e.lineWidth=this.lineWidth,e.lineColor=this.lineColor,e.tint=this.tint,e.blendMode=this.blendMode,e.isMask=this.isMask,e.boundsPadding=this.boundsPadding,e.dirty=0,e.cachedSpriteDirty=this.cachedSpriteDirty;for(var t=0;t<this.graphicsData.length;++t)e.graphicsData.push(this.graphicsData[t].clone());return e.currentPath=e.graphicsData[e.graphicsData.length-1],e.updateLocalBounds(),e},o.prototype.lineStyle=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1;if(this.lineWidth=a,this.lineColor=t,this.lineAlpha=e,this.currentPath)if(this.currentPath.shape.points.length){var r=new y.Polygon(this.currentPath.shape.points.slice(-2));r.closed=!1,this.drawShape(r)}else this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha;return this},o.prototype.moveTo=function(n,t){var e=new y.Polygon([n,t]);return e.closed=!1,this.drawShape(e),this},o.prototype.lineTo=function(r,t){return this.currentPath.shape.points.push(r,t),this.dirty++,this},o.prototype.quadraticCurveTo=function(d,t,e,r){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var n=this.currentPath.shape.points,i=0,o=0;0===n.length&&this.moveTo(0,0);for(var s=n[n.length-2],a=n[n.length-1],u=1,p;20>=u;++u)p=u/20,i=s+(d-s)*p,o=a+(t-a)*p,n.push(i+(d+(e-d)*p-i)*p,o+(t+(r-t)*p-o)*p);return this.dirty++,this},o.prototype.bezierCurveTo=function(d,t,e,r,n,i){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var o=this.currentPath.shape.points,s=o[o.length-2],a=o[o.length-1];return o.length-=2,(0,b.default)(s,a,d,t,e,r,n,i,o),this.dirty++,this},o.prototype.arcTo=function(T,t,e,r,n){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(T,t):this.moveTo(T,t);var i=this.currentPath.shape.points,o=i[i.length-2],s=i[i.length-1],a=s-t,u=o-T,h=r-t,l=e-T,c=W(a*l-u*h);if(1e-8>c||0===n)i[i.length-2]===T&&i[i.length-1]===t||i.push(T,t);else{var d=a*a+u*u,f=h*h+l*l,p=a*h+u*l,v=n*H(d)/c,y=n*H(f)/c,g=v*p/d,m=y*p/f,_=v*l+y*u,b=v*h+y*a,x=M(a*(y+g)-b,u*(y+g)-_),E=M(h*(v+m)-b,l*(v+m)-_);this.arc(_+T,b+t,n,x,E,u*h>l*a)}return this.dirty++,this},o.prototype.arc=function(d,t,e,r,n){var i=5<arguments.length&&void 0!==arguments[5]&&arguments[5];if(r===n)return this;!i&&n<=r?n+=2*C:i&&r<=n&&(r+=2*C);var y=n-r,s=40*S(W(y)/(2*C));if(0==y)return this;var a=d+E(r)*e,u=t+T(r)*e,h=this.currentPath?this.currentPath.shape.points:null;h?h[h.length-2]===a&&h[h.length-1]===u||h.push(a,u):(this.moveTo(a,u),h=this.currentPath.shape.points);for(var l=y/(2*s),c=E(l),f=T(l),p=s-1,v=0;v<=p;++v){var g=v+p%1/p*v,m=l+r+2*l*g,_=E(m),b=-T(m);h.push((c*_+f*b)*e+d,(c*-b+f*_)*e+t)}return this.dirty++,this},o.prototype.beginFill=function(){var r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;return this.filling=!0,this.fillColor=r,this.fillAlpha=t,this.currentPath&&2>=this.currentPath.shape.points.length&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},o.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},o.prototype.drawRect=function(a,t,e,r){return this.drawShape(new y.Rectangle(a,t,e,r)),this},o.prototype.drawRoundedRect=function(a,t,e,r,n){return this.drawShape(new y.RoundedRectangle(a,t,e,r,n)),this},o.prototype.drawCircle=function(n,t,e){return this.drawShape(new y.Circle(n,t,e)),this},o.prototype.drawEllipse=function(a,t,e,r){return this.drawShape(new y.Ellipse(a,t,e,r)),this},o.prototype.drawPolygon=function(a){var t=a,e=!0;if(t instanceof y.Polygon&&(e=t.closed,t=t.points),!Array.isArray(t)){t=Array(arguments.length);for(var r=0;r<t.length;++r)t[r]=arguments[r]}var n=new y.Polygon(t);return n.closed=e,this.drawShape(n),this},o.prototype.clear=function(){return(this.lineWidth||this.filling||0<this.graphicsData.length)&&(this.lineWidth=0,this.filling=!1,this.boundsDirty=-1,this.dirty++,this.clearDirty++,this.graphicsData.length=0),this.currentPath=null,this._spriteRect=null,this},o.prototype.isFastRect=function(){return 1===this.graphicsData.length&&this.graphicsData[0].shape.type===L.SHAPES.RECT&&!this.graphicsData[0].lineWidth},o.prototype._renderWebGL=function(e){this.dirty!==this.fastRectDirty&&(this.fastRectDirty=this.dirty,this._fastRect=this.isFastRect()),this._fastRect?this._renderSpriteRect(e):(e.setObjectRenderer(e.plugins.graphics),e.plugins.graphics.render(this))},o.prototype._renderSpriteRect=function(a){var t=this.graphicsData[0].shape;this._spriteRect||(this._spriteRect=new f.default(new c.default(c.default.WHITE)));var e=this._spriteRect;if(16777215===this.tint)e.tint=this.graphicsData[0].fillColor;else{var r=k,n=B;(0,g.hex2rgb)(this.graphicsData[0].fillColor,r),(0,g.hex2rgb)(this.tint,n),r[0]*=n[0],r[1]*=n[1],r[2]*=n[2],e.tint=(0,g.rgb2hex)(r)}e.alpha=this.graphicsData[0].fillAlpha,e.worldAlpha=this.worldAlpha*e.alpha,e.blendMode=this.blendMode,e._texture._frame.width=t.width,e._texture._frame.height=t.height,e.transform.worldTransform=this.transform.worldTransform,e.anchor.set(-t.x/t.width,-t.y/t.height),e._onAnchorUpdate(),e._renderWebGL(a)},o.prototype._renderCanvas=function(e){!0!==this.isMask&&e.plugins.graphics.render(this)},o.prototype._calculateBounds=function(){this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.updateLocalBounds(),this.cachedSpriteDirty=!0);var e=this._localBounds;this._bounds.addFrame(this.transform,e.minX,e.minY,e.maxX,e.maxY)},o.prototype.containsPoint=function(a){this.worldTransform.applyInverse(a,P);for(var t=this.graphicsData,e=0,r;e<t.length;++e)if(r=t[e],r.fill&&r.shape&&r.shape.contains(P.x,P.y)){if(r.holes)for(var n=0,i;n<r.holes.length;n++)if(i=r.holes[n],i.contains(P.x,P.y))return!1;return!0}return!1},o.prototype.updateLocalBounds=function(){var _=1/0,t=-1/0,e=1/0,r=-1/0;if(this.graphicsData.length)for(var n=0,i=0,o=0,s=0,a=0,u=0;u<this.graphicsData.length;u++){var h=this.graphicsData[u],l=h.type,c=h.lineWidth;if(n=h.shape,l===L.SHAPES.RECT||l===L.SHAPES.RREC)i=n.x-c/2,o=n.y-c/2,s=n.width+c,a=n.height+c,_=i<_?i:_,t=i+s>t?i+s:t,e=o<e?o:e,r=o+a>r?o+a:r;else if(l===L.SHAPES.CIRC)i=n.x,o=n.y,s=n.radius+c/2,a=n.radius+c/2,_=i-s<_?i-s:_,t=i+s>t?i+s:t,e=o-a<e?o-a:e,r=o+a>r?o+a:r;else if(l===L.SHAPES.ELIP)i=n.x,o=n.y,s=n.width+c/2,a=n.height+c/2,_=i-s<_?i-s:_,t=i+s>t?i+s:t,e=o-a<e?o-a:e,r=o+a>r?o+a:r;else for(var d=n.points,f=0,p=0,v=0,y=0,g=0,m=0,b=0,x=0,T=0;T+2<d.length;T+=2)i=d[T],o=d[T+1],f=d[T+2],p=d[T+3],v=W(f-i),y=W(p-o),a=c,1e-9>(s=H(v*v+y*y))||(g=(a/s*y+v)/2,m=(a/s*v+y)/2,b=(f+i)/2,x=(p+o)/2,_=b-g<_?b-g:_,t=b+g>t?b+g:t,e=x-m<e?x-m:e,r=x+m>r?x+m:r)}else _=0,t=0,e=0,r=0;var S=this.boundsPadding;this._localBounds.minX=_-S,this._localBounds.maxX=t+S,this._localBounds.minY=e-S,this._localBounds.maxY=r+S},o.prototype.drawShape=function(r){this.currentPath&&2>=this.currentPath.shape.points.length&&this.graphicsData.pop(),this.currentPath=null;var t=new h.default(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,this.nativeLines,r);return this.graphicsData.push(t),t.type===L.SHAPES.POLY&&(t.shape.closed=t.shape.closed||this.filling,this.currentPath=t),this.dirty++,t},o.prototype.generateCanvasTexture=function(a){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,e=this.getLocalBounds(),r=u.default.create(e.width,e.height,a,t);A||(A=new w.default),this.transform.updateLocalTransform(),this.transform.localTransform.copy(N),N.invert(),N.tx-=e.x,N.ty-=e.y,A.render(this,r,!0,N);var n=c.default.fromCanvas(r.baseTexture._canvasRenderTarget.canvas,a,'graphics');return n.baseTexture.resolution=t,n.baseTexture.update(),n},o.prototype.closePath=function(){var e=this.currentPath;return e&&e.shape&&e.shape.close(),this},o.prototype.addHole=function(){var e=this.graphicsData.pop();return this.currentPath=this.graphicsData[this.graphicsData.length-1],this.currentPath.addHole(e.shape),this.currentPath=null,this},o.prototype.destroy=function(t){a.prototype.destroy.call(this,t);for(var e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();for(var r in this._webgl)for(var n=0;n<this._webgl[r].data.length;++n)this._webgl[r].data[n].destroy();this._spriteRect&&this._spriteRect.destroy(),this.graphicsData=null,this.currentPath=null,this._webgl=null,this._localBounds=null},o}(a.default),A;e.default=R,R._SPRITE_TEXTURE=null},{"../const":46,"../display/Bounds":47,"../display/Container":48,"../math":70,"../renderers/canvas/CanvasRenderer":77,"../sprites/Sprite":102,"../textures/RenderTexture":113,"../textures/Texture":115,"../utils":124,"./GraphicsData":54,"./utils/bezierCurveTo":56}],54:[function(a,t,e){function d(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}e.__esModule=!0;var r=function(){function n(t,e,r,i,o,s,a,l){d(this,n),this.lineWidth=t,this.nativeLines=a,this.lineColor=e,this.lineAlpha=r,this._lineTint=e,this.fillColor=i,this.fillAlpha=o,this._fillTint=i,this.fill=s,this.holes=[],this.shape=l,this.type=l.type}return n.prototype.clone=function(){return new n(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.nativeLines,this.shape)},n.prototype.addHole=function(e){this.holes.push(e)},n.prototype.destroy=function(){this.shape=null,this.holes=null},n}();e.default=r},{}],55:[function(d,t,e){function r(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}e.__esModule=!0;var n=d('../../renderers/canvas/CanvasRenderer'),i=function(e){return e&&e.__esModule?e:{default:e}}(n),o=d('../../const'),s=function(){function n(t){r(this,n),this.renderer=t}return n.prototype.render=function(s){var t=this.renderer,e=t.context,r=s.worldAlpha,n=s.transform.worldTransform,i=t.resolution;this._prevTint!==this.tint&&(this.dirty=!0),e.setTransform(n.a*i,n.b*i,n.c*i,n.d*i,n.tx*i,n.ty*i),s.dirty&&(this.updateGraphicsTint(s),s.dirty=!1),t.setBlendMode(s.blendMode);for(var R=0;R<s.graphicsData.length;R++){var a=s.graphicsData[R],u=a.shape,h=a._fillTint,l=a._lineTint;if(e.lineWidth=a.lineWidth,a.type===o.SHAPES.POLY){e.beginPath(),this.renderPolygon(u.points,u.closed,e);for(var c=0;c<a.holes.length;c++)this.renderPolygon(a.holes[c].points,!0,e);a.fill&&(e.globalAlpha=a.fillAlpha*r,e.fillStyle='#'+('00000'+(0|h).toString(16)).substr(-6),e.fill()),a.lineWidth&&(e.globalAlpha=a.lineAlpha*r,e.strokeStyle='#'+('00000'+(0|l).toString(16)).substr(-6),e.stroke())}else if(a.type===o.SHAPES.RECT)(a.fillColor||0===a.fillColor)&&(e.globalAlpha=a.fillAlpha*r,e.fillStyle='#'+('00000'+(0|h).toString(16)).substr(-6),e.fillRect(u.x,u.y,u.width,u.height)),a.lineWidth&&(e.globalAlpha=a.lineAlpha*r,e.strokeStyle='#'+('00000'+(0|l).toString(16)).substr(-6),e.strokeRect(u.x,u.y,u.width,u.height));else if(a.type===o.SHAPES.CIRC)e.beginPath(),e.arc(u.x,u.y,u.radius,0,2*C),e.closePath(),a.fill&&(e.globalAlpha=a.fillAlpha*r,e.fillStyle='#'+('00000'+(0|h).toString(16)).substr(-6),e.fill()),a.lineWidth&&(e.globalAlpha=a.lineAlpha*r,e.strokeStyle='#'+('00000'+(0|l).toString(16)).substr(-6),e.stroke());else if(a.type===o.SHAPES.ELIP){var d=2*u.width,f=2*u.height,p=u.x-d/2,v=u.y-f/2;e.beginPath();var y=.5522848*(d/2),g=.5522848*(f/2),m=p+d,_=v+f,b=p+d/2,x=v+f/2;e.moveTo(p,x),e.bezierCurveTo(p,x-g,b-y,v,b,v),e.bezierCurveTo(b+y,v,m,x-g,m,x),e.bezierCurveTo(m,x+g,b+y,_,b,_),e.bezierCurveTo(b-y,_,p,x+g,p,x),e.closePath(),a.fill&&(e.globalAlpha=a.fillAlpha*r,e.fillStyle='#'+('00000'+(0|h).toString(16)).substr(-6),e.fill()),a.lineWidth&&(e.globalAlpha=a.lineAlpha*r,e.strokeStyle='#'+('00000'+(0|l).toString(16)).substr(-6),e.stroke())}else if(a.type===o.SHAPES.RREC){var T=u.x,w=u.y,E=u.width,S=u.height,O=u.radius,P=0|B(E,S)/2;O=O>P?P:O,e.beginPath(),e.moveTo(T,w+O),e.lineTo(T,w+S-O),e.quadraticCurveTo(T,w+S,T+O,w+S),e.lineTo(T+E-O,w+S),e.quadraticCurveTo(T+E,w+S,T+E,w+S-O),e.lineTo(T+E,w+O),e.quadraticCurveTo(T+E,w,T+E-O,w),e.lineTo(T+O,w),e.quadraticCurveTo(T,w,T,w+O),e.closePath(),(a.fillColor||0===a.fillColor)&&(e.globalAlpha=a.fillAlpha*r,e.fillStyle='#'+('00000'+(0|h).toString(16)).substr(-6),e.fill()),a.lineWidth&&(e.globalAlpha=a.lineAlpha*r,e.strokeStyle='#'+('00000'+(0|l).toString(16)).substr(-6),e.stroke())}}},n.prototype.updateGraphicsTint=function(d){d._prevTint=d.tint;for(var t=(255&d.tint>>16)/255,e=(255&d.tint>>8)/255,r=(255&d.tint)/255,n=0;n<d.graphicsData.length;++n){var i=d.graphicsData[n],o=0|i.fillColor,s=0|i.lineColor;i._fillTint=(255*((255&o>>16)/255*t)<<16)+(255*((255&o>>8)/255*e)<<8)+255*((255&o)/255*r),i._lineTint=(255*((255&s>>16)/255*t)<<16)+(255*((255&s>>8)/255*e)<<8)+255*((255&s)/255*r)}},n.prototype.renderPolygon=function(a,t,e){e.moveTo(a[0],a[1]);for(var r=1;r<a.length/2;++r)e.lineTo(a[2*r],a[2*r+1]);t&&e.closePath()},n.prototype.destroy=function(){this.renderer=null},n}();e.default=s,i.default.registerPlugin('graphics',s)},{"../../const":46,"../../renderers/canvas/CanvasRenderer":77}],56:[function(n,t,e){e.__esModule=!0,e.default=function(g,t,e,r,n,i,o,s){var a=8<arguments.length&&void 0!==arguments[8]?arguments[8]:[],u=0,h=0,l=0,c=0,d=0;a.push(g,t);for(var f=1,p=0;20>=f;++f)p=f/20,u=1-p,h=u*u,l=h*u,c=p*p,d=c*p,a.push(l*g+3*h*p*e+3*u*c*n+d*o,l*t+3*h*p*r+3*u*c*i+d*s);return a}},{}],57:[function(P,t,e){function r(e){return e&&e.__esModule?e:{default:e}}function C(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}function i(r,n){if(!r)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==('undefined'==typeof n?'undefined':z(n))||'function'==typeof n)?n:r}function n(r,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+('undefined'==typeof n?'undefined':z(n)));r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(r,n):r.__proto__=n)}e.__esModule=!0;var o=P('../../utils'),M=P('../../const'),a=P('../../renderers/webgl/utils/ObjectRenderer'),s=r(a),l=P('../../renderers/webgl/WebGLRenderer'),u=r(l),d=P('./WebGLGraphicsData'),c=r(d),p=P('./shaders/PrimitiveShader'),h=r(p),f=P('./utils/buildPoly'),g=r(f),m=P('./utils/buildRectangle'),_=r(m),y=P('./utils/buildRoundedRectangle'),x=r(y),b=P('./utils/buildCircle'),T=r(b),v=function(a){function t(e){C(this,t);var r=i(this,a.call(this,e));return r.graphicsDataPool=[],r.primitiveShader=null,r.gl=e.gl,r.CONTEXT_UID=0,r}return n(t,a),t.prototype.onContextChange=function(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.primitiveShader=new h.default(this.gl)},t.prototype.destroy=function(){s.default.prototype.destroy.call(this);for(var e=0;e<this.graphicsDataPool.length;++e)this.graphicsDataPool[e].destroy();this.graphicsDataPool=null},t.prototype.render=function(a){var t=this.renderer,e=t.gl,r=a._webGL[this.CONTEXT_UID],i;r&&a.dirty===r.dirty||(this.updateGraphics(a),r=a._webGL[this.CONTEXT_UID]);var n=this.primitiveShader;t.bindShader(n),t.state.setBlendMode(a.blendMode);for(var d=0,s=r.data.length;d<s;d++){i=r.data[d];var l=i.shader;t.bindShader(l),l.uniforms.translationMatrix=a.transform.worldTransform.toArray(!0),l.uniforms.tint=(0,o.hex2rgb)(a.tint),l.uniforms.alpha=a.worldAlpha,t.bindVao(i.vao),i.nativeLines?e.drawArrays(e.LINES,0,i.points.length/6):i.vao.draw(e.TRIANGLE_STRIP,i.indices.length)}},t.prototype.updateGraphics=function(d){var t=this.renderer.gl,l=d._webGL[this.CONTEXT_UID];if(l||(l=d._webGL[this.CONTEXT_UID]={lastIndex:0,data:[],gl:t,clearDirty:-1,dirty:-1}),l.dirty=d.dirty,d.clearDirty!==l.clearDirty){l.clearDirty=d.clearDirty;for(var r=0;r<l.data.length;r++)this.graphicsDataPool.push(l.data[r]);l.data.length=0,l.lastIndex=0}for(var n=void 0,i=void 0,o=l.lastIndex,s;o<d.graphicsData.length;o++)s=d.graphicsData[o],n=this.getWebGLData(l,0),s.nativeLines&&s.lineWidth&&(i=this.getWebGLData(l,0,!0),l.lastIndex++),s.type===M.SHAPES.POLY&&(0,g.default)(s,n,i),s.type===M.SHAPES.RECT?(0,_.default)(s,n,i):s.type===M.SHAPES.CIRC||s.type===M.SHAPES.ELIP?(0,T.default)(s,n,i):s.type===M.SHAPES.RREC&&(0,x.default)(s,n,i),l.lastIndex++;this.renderer.bindVao(null);for(var a=0;a<l.data.length;a++)n=l.data[a],n.dirty&&n.upload()},t.prototype.getWebGLData=function(a,t,e){var r=a.data[a.data.length-1];return(!r||r.nativeLines!==e||32e4<r.points.length)&&(r=this.graphicsDataPool.pop()||new c.default(this.renderer.gl,this.primitiveShader,this.renderer.state.attribsState),r.nativeLines=e,r.reset(t),a.data.push(r)),r.dirty=!0,r},t}(s.default);e.default=v,u.default.registerPlugin('graphics',v)},{"../../const":46,"../../renderers/webgl/WebGLRenderer":84,"../../renderers/webgl/utils/ObjectRenderer":94,"../../utils":124,"./WebGLGraphicsData":58,"./shaders/PrimitiveShader":59,"./utils/buildCircle":60,"./utils/buildPoly":62,"./utils/buildRectangle":63,"./utils/buildRoundedRectangle":64}],58:[function(a,t,e){function d(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}e.__esModule=!0;var r=a('pixi-gl-core'),n=function(e){return e&&e.__esModule?e:{default:e}}(r),o=function(){function a(t,e,r){d(this,a),this.gl=t,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=n.default.GLBuffer.createVertexBuffer(t),this.indexBuffer=n.default.GLBuffer.createIndexBuffer(t),this.dirty=!0,this.nativeLines=!1,this.glPoints=null,this.glIndices=null,this.shader=e,this.vao=new n.default.VertexArrayObject(t,r).addIndex(this.indexBuffer).addAttribute(this.buffer,e.attributes.aVertexPosition,t.FLOAT,!1,24,0).addAttribute(this.buffer,e.attributes.aColor,t.FLOAT,!1,24,8)}return a.prototype.reset=function(){this.points.length=0,this.indices.length=0},a.prototype.upload=function(){this.glPoints=new Float32Array(this.points),this.buffer.upload(this.glPoints),this.glIndices=new Uint16Array(this.indices),this.indexBuffer.upload(this.glIndices),this.dirty=!1},a.prototype.destroy=function(){this.color=null,this.points=null,this.indices=null,this.vao.destroy(),this.buffer.destroy(),this.indexBuffer.destroy(),this.gl=null,this.buffer=null,this.indexBuffer=null,this.glPoints=null,this.glIndices=null},a}();e.default=o},{"pixi-gl-core":15}],59:[function(d,t,e){function l(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}function n(r,n){if(!r)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==('undefined'==typeof n?'undefined':z(n))||'function'==typeof n)?n:r}function r(r,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+('undefined'==typeof n?'undefined':z(n)));r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(r,n):r.__proto__=n)}e.__esModule=!0;var o=d('../../../Shader'),i=function(e){return e&&e.__esModule?e:{default:e}}(o),a=function(a){function t(e){return l(this,t),n(this,a.call(this,e,'attribute vec2 aVertexPosition;\nattribute vec4 aColor;\nuniform mat3 translationMatrix;\nuniform mat3 projectionMatrix;\nuniform float alpha;\nuniform vec3 tint;\nvarying vec4 vColor;\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vColor = aColor * vec4(tint * alpha, alpha);\n}','varying vec4 vColor;\nvoid main(void){\n   gl_FragColor = vColor;\n}'))}return r(t,a),t}(i.default);e.default=a},{"../../../Shader":44}],60:[function(n,t,e){e.__esModule=!0,e.default=function(a,t,e){var r=a.shape,n=r.x,i=r.y,u,h;if(a.type===o.SHAPES.CIRC?(u=r.radius,h=r.radius):(u=r.width,h=r.height),0!==u&&0!==h){var l=k(30*H(r.radius))||k(15*H(r.width+r.height)),c=2*C/l;if(a.fill){var d=(0,s.hex2rgb)(a.fillColor),f=a.fillAlpha,S=d[0]*f,v=d[1]*f,y=d[2]*f,g=t.points,m=t.indices,_=g.length/6;m.push(_);for(var b=0;b<l+1;b++)g.push(n,i,S,v,y,f),g.push(n+T(c*b)*u,i+E(c*b)*h,S,v,y,f),m.push(_++,_++);m.push(_-1)}if(a.lineWidth){var x=a.points;a.points=[];for(var P=0;P<l+1;P++)a.points.push(n+T(c*P)*u,i+E(c*P)*h);(0,p.default)(a,t,e),a.points=x}}};var r=n('./buildLine'),p=function(e){return e&&e.__esModule?e:{default:e}}(r),o=n('../../../const'),s=n('../../../utils')},{"../../../const":46,"../../../utils":124,"./buildLine":61}],61:[function(a,t,e){function d(o,t){var e=o.points;if(0!==e.length){var r=new Y.Point(e[0],e[1]),s=new Y.Point(e[e.length-2],e[e.length-1]);if(r.x===s.x&&r.y===s.y){e=e.slice(),e.pop(),e.pop(),s=new Y.Point(e[e.length-2],e[e.length-1]);var i=s.x+.5*(r.x-s.x),a=s.y+.5*(r.y-s.y);e.unshift(i,a),e.push(i,a)}var u=t.points,h=t.indices,l=e.length/2,c=e.length,d=u.length/6,f=o.lineWidth/2,p=(0,V.hex2rgb)(o.lineColor),v=o.lineAlpha,y=p[0]*v,g=p[1]*v,m=p[2]*v,_=e[0],b=e[1],x=e[2],T=e[3],w=0,E=0,S=-(b-T),z=_-x,q=0,K=0,Z=0,R=0,A=H(S*S+z*z);S/=A,z/=A,S*=f,z*=f,u.push(_-S,b-z,y,g,m,v),u.push(_+S,b+z,y,g,m,v);for(var I=1;I<l-1;++I){_=e[2*(I-1)],b=e[2*(I-1)+1],x=e[2*I],T=e[2*I+1],w=e[2*(I+1)],E=e[2*(I+1)+1],S=-(b-T),z=_-x,A=H(S*S+z*z),S/=A,z/=A,S*=f,z*=f,q=-(T-E),K=x-w,A=H(q*q+K*K),q/=A,K/=A,q*=f,K*=f;var D=-z+b-(-z+T),L=-S+x-(-S+_),N=(-S+_)*(-z+T)-(-S+x)*(-z+b),F=-K+E-(-K+T),B=-q+x-(-q+w),k=(-q+w)*(-K+T)-(-q+x)*(-K+E),j=D*B-F*L;if(.1>W(j))j+=10.1,u.push(x-S,T-z,y,g,m,v),u.push(x+S,T+z,y,g,m,v);else{var U=(L*k-B*N)/j,X=(F*N-D*k)/j;(U-x)*(U-x)+(X-T)*(X-T)>196*f*f?(Z=S-q,R=z-K,A=H(Z*Z+R*R),Z/=A,R/=A,Z*=f,R*=f,u.push(x-Z,T-R),u.push(y,g,m,v),u.push(x+Z,T+R),u.push(y,g,m,v),u.push(x-Z,T-R),u.push(y,g,m,v),c++):(u.push(U,X),u.push(y,g,m,v),u.push(x-(U-x),T-(X-T)),u.push(y,g,m,v))}}_=e[2*(l-2)],b=e[2*(l-2)+1],x=e[2*(l-1)],T=e[2*(l-1)+1],S=-(b-T),z=_-x,A=H(S*S+z*z),S/=A,z/=A,S*=f,z*=f,u.push(x-S,T-z),u.push(y,g,m,v),u.push(x+S,T+z),u.push(y,g,m,v),h.push(d);for(var G=0;G<c;++G)h.push(d++);h.push(d-1)}}function n(s,t){var e=0,r=s.points;if(0!==r.length){var n=t.points,g=r.length/2,o=(0,V.hex2rgb)(s.lineColor),a=s.lineAlpha,u=o[0]*a,h=o[1]*a,l=o[2]*a;for(e=1;e<g;e++){var c=r[2*(e-1)],d=r[2*(e-1)+1],f=r[2*e],p=r[2*e+1];n.push(c,d),n.push(u,h,l,a),n.push(f,p),n.push(u,h,l,a)}}}e.__esModule=!0,e.default=function(a,t,e){a.nativeLines?n(a,e):d(a,t)};var Y=a('../../../math'),V=a('../../../utils')},{"../../../math":70,"../../../utils":124}],62:[function(i,t,e){function r(e){return e&&e.__esModule?e:{default:e}}e.__esModule=!0,e.default=function(a,t,e){a.points=a.shape.points.slice();var r=a.points;if(a.fill&&6<=r.length){for(var n=[],i=a.holes,o=0,u;o<i.length;o++)u=i[o],n.push(r.length/2),r=r.concat(u.points);var l=t.points,c=t.indices,d=r.length/2,h=(0,s.hex2rgb)(a.fillColor),p=a.fillAlpha,f=h[0]*p,y=h[1]*p,g=h[2]*p,m=(0,S.default)(r,n,2);if(!m)return;for(var v=l.length/6,b=0;b<m.length;b+=3)c.push(m[b]+v),c.push(m[b]+v),c.push(m[b+1]+v),c.push(m[b+2]+v),c.push(m[b+2]+v);for(var x=0;x<d;x++)l.push(r[2*x],r[2*x+1],f,y,g,p)}0<a.lineWidth&&(0,E.default)(a,t,e)};var n=i('./buildLine'),E=r(n),s=i('../../../utils'),a=i('earcut'),S=r(a)},{"../../../utils":124,"./buildLine":61,earcut:2}],63:[function(n,t,e){e.__esModule=!0,e.default=function(s,t,e){var r=s.shape,n=r.x,i=r.y,a=r.width,u=r.height;if(s.fill){var h=(0,o.hex2rgb)(s.fillColor),l=s.fillAlpha,c=h[0]*l,_=h[1]*l,f=h[2]*l,p=t.points,x=t.indices,y=p.length/6;p.push(n,i),p.push(c,_,f,l),p.push(n+a,i),p.push(c,_,f,l),p.push(n,i+u),p.push(c,_,f,l),p.push(n+a,i+u),p.push(c,_,f,l),x.push(y,y,y+1,y+2,y+3,y+3)}if(s.lineWidth){var g=s.points;s.points=[n,i,n+a,i,n+a,i+u,n,i+u,n,i],(0,d.default)(s,t,e),s.points=g}};var r=n('./buildLine'),d=function(e){return e&&e.__esModule?e:{default:e}}(r),o=n('../../../utils')},{"../../../utils":124,"./buildLine":61}],64:[function(i,t,e){function r(e){return e&&e.__esModule?e:{default:e}}function g(n,t,e){return n+(t-n)*e}function C(o,t,e,r,n,i){for(var m=6<arguments.length&&void 0!==arguments[6]?arguments[6]:[],a=m,u=0,h=0,l=0,c=0,d=0,f=0,p=0,_=0;20>=p;++p)_=p/20,u=g(o,e,_),h=g(t,r,_),l=g(e,n,_),c=g(r,i,_),d=g(u,l,_),f=g(h,c,_),a.push(d,f);return a}e.__esModule=!0,e.default=function(l,t,e){var r=l.shape,n=r.x,i=r.y,o=r.width,u=r.height,c=r.radius,h=[];if(h.push(n,i+c),C(n,i+u-c,n,i+u,n+c,i+u,h),C(n+o-c,i+u,n+o,i+u,n+o,i+u-c,h),C(n+o,i+c,n+o,i,n+o-c,i,h),C(n+c,i,n,i,n,i+c+1e-10,h),l.fill){for(var f=(0,d.hex2rgb)(l.fillColor),p=l.fillAlpha,v=f[0]*p,y=f[1]*p,g=f[2]*p,m=t.points,_=t.indices,b=m.length/6,x=(0,a.default)(h,null,2),T=0,M=x.length;T<M;T+=3)_.push(x[T]+b),_.push(x[T]+b),_.push(x[T+1]+b),_.push(x[T+2]+b),_.push(x[T+2]+b);for(var E=0,S=h.length;E<S;E++)m.push(h[E],h[++E],v,y,g,p)}if(l.lineWidth){var R=l.points;l.points=h,(0,s.default)(l,t,e),l.points=R}};var n=i('earcut'),a=r(n),o=i('./buildLine'),s=r(o),d=i('../../../utils')},{"../../../utils":124,"./buildLine":61,earcut:2}],65:[function(Q,t,e){function r(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t.default=n,t}function n(e){return e&&e.__esModule?e:{default:e}}e.__esModule=!0,e.autoDetectRenderer=e.Application=e.Filter=e.SpriteMaskFilter=e.Quad=e.RenderTarget=e.ObjectRenderer=e.WebGLManager=e.Shader=e.CanvasRenderTarget=e.TextureUvs=e.VideoBaseTexture=e.BaseRenderTexture=e.RenderTexture=e.BaseTexture=e.Texture=e.Spritesheet=e.CanvasGraphicsRenderer=e.GraphicsRenderer=e.GraphicsData=e.Graphics=e.TextMetrics=e.TextStyle=e.Text=e.SpriteRenderer=e.CanvasTinter=e.CanvasSpriteRenderer=e.Sprite=e.TransformBase=e.TransformStatic=e.Transform=e.Container=e.DisplayObject=e.Bounds=e.glCore=e.WebGLRenderer=e.CanvasRenderer=e.ticker=e.utils=e.settings=void 0;var i=Q('./const');Object.keys(i).forEach(function(r){'default'!==r&&'__esModule'!==r&&Object.defineProperty(e,r,{enumerable:!0,get:function(){return i[r]}})});var o=Q('./math');Object.keys(o).forEach(function(r){'default'!==r&&'__esModule'!==r&&Object.defineProperty(e,r,{enumerable:!0,get:function(){return o[r]}})});var s=Q('pixi-gl-core');Object.defineProperty(e,'glCore',{enumerable:!0,get:function(){return n(s).default}});var a=Q('./display/Bounds');Object.defineProperty(e,'Bounds',{enumerable:!0,get:function(){return n(a).default}});var u=Q('./display/DisplayObject');Object.defineProperty(e,'DisplayObject',{enumerable:!0,get:function(){return n(u).default}});var h=Q('./display/Container');Object.defineProperty(e,'Container',{enumerable:!0,get:function(){return n(h).default}});var l=Q('./display/Transform');Object.defineProperty(e,'Transform',{enumerable:!0,get:function(){return n(l).default}});var c=Q('./display/TransformStatic');Object.defineProperty(e,'TransformStatic',{enumerable:!0,get:function(){return n(c).default}});var d=Q('./display/TransformBase');Object.defineProperty(e,'TransformBase',{enumerable:!0,get:function(){return n(d).default}});var f=Q('./sprites/Sprite');Object.defineProperty(e,'Sprite',{enumerable:!0,get:function(){return n(f).default}});var p=Q('./sprites/canvas/CanvasSpriteRenderer');Object.defineProperty(e,'CanvasSpriteRenderer',{enumerable:!0,get:function(){return n(p).default}});var v=Q('./sprites/canvas/CanvasTinter');Object.defineProperty(e,'CanvasTinter',{enumerable:!0,get:function(){return n(v).default}});var y=Q('./sprites/webgl/SpriteRenderer');Object.defineProperty(e,'SpriteRenderer',{enumerable:!0,get:function(){return n(y).default}});var g=Q('./text/Text');Object.defineProperty(e,'Text',{enumerable:!0,get:function(){return n(g).default}});var m=Q('./text/TextStyle');Object.defineProperty(e,'TextStyle',{enumerable:!0,get:function(){return n(m).default}});var _=Q('./text/TextMetrics');Object.defineProperty(e,'TextMetrics',{enumerable:!0,get:function(){return n(_).default}});var b=Q('./graphics/Graphics');Object.defineProperty(e,'Graphics',{enumerable:!0,get:function(){return n(b).default}});var x=Q('./graphics/GraphicsData');Object.defineProperty(e,'GraphicsData',{enumerable:!0,get:function(){return n(x).default}});var T=Q('./graphics/webgl/GraphicsRenderer');Object.defineProperty(e,'GraphicsRenderer',{enumerable:!0,get:function(){return n(T).default}});var w=Q('./graphics/canvas/CanvasGraphicsRenderer');Object.defineProperty(e,'CanvasGraphicsRenderer',{enumerable:!0,get:function(){return n(w).default}});var E=Q('./textures/Spritesheet');Object.defineProperty(e,'Spritesheet',{enumerable:!0,get:function(){return n(E).default}});var S=Q('./textures/Texture');Object.defineProperty(e,'Texture',{enumerable:!0,get:function(){return n(S).default}});var O=Q('./textures/BaseTexture');Object.defineProperty(e,'BaseTexture',{enumerable:!0,get:function(){return n(O).default}});var P=Q('./textures/RenderTexture');Object.defineProperty(e,'RenderTexture',{enumerable:!0,get:function(){return n(P).default}});var M=Q('./textures/BaseRenderTexture');Object.defineProperty(e,'BaseRenderTexture',{enumerable:!0,get:function(){return n(M).default}});var C=Q('./textures/VideoBaseTexture');Object.defineProperty(e,'VideoBaseTexture',{enumerable:!0,get:function(){return n(C).default}});var R=Q('./textures/TextureUvs');Object.defineProperty(e,'TextureUvs',{enumerable:!0,get:function(){return n(R).default}});var A=Q('./renderers/canvas/utils/CanvasRenderTarget');Object.defineProperty(e,'CanvasRenderTarget',{enumerable:!0,get:function(){return n(A).default}});var I=Q('./Shader');Object.defineProperty(e,'Shader',{enumerable:!0,get:function(){return n(I).default}});var D=Q('./renderers/webgl/managers/WebGLManager');Object.defineProperty(e,'WebGLManager',{enumerable:!0,get:function(){return n(D).default}});var L=Q('./renderers/webgl/utils/ObjectRenderer');Object.defineProperty(e,'ObjectRenderer',{enumerable:!0,get:function(){return n(L).default}});var N=Q('./renderers/webgl/utils/RenderTarget');Object.defineProperty(e,'RenderTarget',{enumerable:!0,get:function(){return n(N).default}});var F=Q('./renderers/webgl/utils/Quad');Object.defineProperty(e,'Quad',{enumerable:!0,get:function(){return n(F).default}});var B=Q('./renderers/webgl/filters/spriteMask/SpriteMaskFilter');Object.defineProperty(e,'SpriteMaskFilter',{enumerable:!0,get:function(){return n(B).default}});var k=Q('./renderers/webgl/filters/Filter');Object.defineProperty(e,'Filter',{enumerable:!0,get:function(){return n(k).default}});var j=Q('./Application');Object.defineProperty(e,'Application',{enumerable:!0,get:function(){return n(j).default}});var U=Q('./autoDetectRenderer');Object.defineProperty(e,'autoDetectRenderer',{enumerable:!0,get:function(){return U.autoDetectRenderer}});var X=Q('./utils'),G=r(X),W=Q('./ticker'),H=r(W),Y=Q('./settings'),V=n(Y),z=Q('./renderers/canvas/CanvasRenderer'),q=n(z),K=Q('./renderers/webgl/WebGLRenderer'),Z=n(K);e.settings=V.default,e.utils=G,e.ticker=H,e.CanvasRenderer=q.default,e.WebGLRenderer=Z.default},{"./Application":43,"./Shader":44,"./autoDetectRenderer":45,"./const":46,"./display/Bounds":47,"./display/Container":48,"./display/DisplayObject":49,"./display/Transform":50,"./display/TransformBase":51,"./display/TransformStatic":52,"./graphics/Graphics":53,"./graphics/GraphicsData":54,"./graphics/canvas/CanvasGraphicsRenderer":55,"./graphics/webgl/GraphicsRenderer":57,"./math":70,"./renderers/canvas/CanvasRenderer":77,"./renderers/canvas/utils/CanvasRenderTarget":79,"./renderers/webgl/WebGLRenderer":84,"./renderers/webgl/filters/Filter":86,"./renderers/webgl/filters/spriteMask/SpriteMaskFilter":89,"./renderers/webgl/managers/WebGLManager":93,"./renderers/webgl/utils/ObjectRenderer":94,"./renderers/webgl/utils/Quad":95,"./renderers/webgl/utils/RenderTarget":96,"./settings":101,"./sprites/Sprite":102,"./sprites/canvas/CanvasSpriteRenderer":103,"./sprites/canvas/CanvasTinter":104,"./sprites/webgl/SpriteRenderer":106,"./text/Text":108,"./text/TextMetrics":109,"./text/TextStyle":110,"./textures/BaseRenderTexture":111,"./textures/BaseTexture":112,"./textures/RenderTexture":113,"./textures/Spritesheet":114,"./textures/Texture":115,"./textures/TextureUvs":116,"./textures/VideoBaseTexture":117,"./ticker":120,"./utils":124,"pixi-gl-core":15}],66:[function(p,t,e){function g(e){return 0>e?-1:0<e?1:0}e.__esModule=!0;var r=p('./Matrix'),n=function(e){return e&&e.__esModule?e:{default:e}}(r),o=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],s=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],a=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],u=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],h=[],l=[];!function(){for(var c=0,t;16>c;c++){t=[],l.push(t);for(var e=0;16>e;e++)for(var r=g(o[c]*o[e]+a[c]*s[e]),i=g(s[c]*o[e]+u[c]*s[e]),d=g(o[c]*a[e]+a[c]*u[e]),f=g(s[c]*a[e]+u[c]*u[e]),p=0;16>p;p++)if(o[p]===r&&s[p]===i&&a[p]===d&&u[p]===f){t.push(p);break}}for(var m=0,_;16>m;m++)_=new n.default,_.set(o[m],s[m],a[m],u[m],0,0),h.push(_)}();var c={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MIRROR_HORIZONTAL:12,uX:function(e){return o[e]},uY:function(e){return s[e]},vX:function(e){return a[e]},vY:function(e){return u[e]},inv:function(e){return 8&e?15&e:7&-e},add:function(r,t){return l[r][t]},sub:function(r,t){return l[r][c.inv(t)]},rotate180:function(e){return 4^e},isSwapWidthHeight:function(e){return 2==(3&e)},byDirection:function(r,t){return 2*W(r)<=W(t)?0<=t?c.S:c.N:2*W(t)<=W(r)?0<r?c.E:c.W:0<t?0<r?c.SE:c.SW:0<r?c.NE:c.NW},matrixAppendRotationInv:function(a,t){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,n=h[c.inv(t)];n.tx=e,n.ty=r,a.append(n)}};e.default=c},{"./Matrix":67}],67:[function(d,t,e){function l(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}e.__esModule=!0;var r=function(){function a(a,o){for(var e=0,r;e<o.length;e++)r=o[e],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}return function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}}(),n=d('./Point'),o=function(e){return e&&e.__esModule?e:{default:e}}(n),i=function(){function n(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,s=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0;l(this,n),this.a=t,this.b=e,this.c=r,this.d=i,this.tx=o,this.ty=s,this.array=null}return n.prototype.fromArray=function(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]},n.prototype.set=function(a,t,e,r,n,i){return this.a=a,this.b=t,this.c=e,this.d=r,this.tx=n,this.ty=i,this},n.prototype.toArray=function(n,t){this.array||(this.array=new Float32Array(9));var e=t||this.array;return n?(e[0]=this.a,e[1]=this.b,e[2]=0,e[3]=this.c,e[4]=this.d,e[5]=0,e[6]=this.tx,e[7]=this.ty,e[8]=1):(e[0]=this.a,e[1]=this.c,e[2]=this.tx,e[3]=this.b,e[4]=this.d,e[5]=this.ty,e[6]=0,e[7]=0,e[8]=1),e},n.prototype.apply=function(a,t){t=t||new o.default;var e=a.x,r=a.y;return t.x=this.a*e+this.c*r+this.tx,t.y=this.b*e+this.d*r+this.ty,t},n.prototype.applyInverse=function(a,t){t=t||new o.default;var e=1/(this.a*this.d+this.c*-this.b),r=a.x,n=a.y;return t.x=this.d*e*r+-this.c*e*n+(this.ty*this.c-this.tx*this.d)*e,t.y=this.a*e*n+-this.b*e*r+(-this.ty*this.a+this.tx*this.b)*e,t},n.prototype.translate=function(r,t){return this.tx+=r,this.ty+=t,this},n.prototype.scale=function(r,t){return this.a*=r,this.d*=t,this.c*=r,this.b*=t,this.tx*=r,this.ty*=t,this},n.prototype.rotate=function(a){var t=E(a),e=T(a),r=this.a,n=this.c,i=this.tx;return this.a=r*t-this.b*e,this.b=r*e+this.b*t,this.c=n*t-this.d*e,this.d=n*e+this.d*t,this.tx=i*t-this.ty*e,this.ty=i*e+this.ty*t,this},n.prototype.append=function(a){var t=this.a,e=this.b,r=this.c,n=this.d;return this.a=a.a*t+a.b*r,this.b=a.a*e+a.b*n,this.c=a.c*t+a.d*r,this.d=a.c*e+a.d*n,this.tx=a.tx*t+a.ty*r+this.tx,this.ty=a.tx*e+a.ty*n+this.ty,this},n.prototype.setTransform=function(_,t,e,r,n,i,o,s,a){var u=T(o),x=E(o),l=E(a),c=T(a),d=-T(s),f=E(s),p=x*n,b=u*n,y=-u*i,g=x*i;return this.a=l*p+c*y,this.b=l*b+c*g,this.c=d*p+f*y,this.d=d*b+f*g,this.tx=_+(e*p+r*y),this.ty=t+(e*b+r*g),this},n.prototype.prepend=function(a){var t=this.tx;if(1!==a.a||0!==a.b||0!==a.c||1!==a.d){var e=this.a,r=this.c;this.a=e*a.a+this.b*a.c,this.b=e*a.b+this.b*a.d,this.c=r*a.a+this.d*a.c,this.d=r*a.b+this.d*a.d}return this.tx=t*a.a+this.ty*a.c+a.tx,this.ty=t*a.b+this.ty*a.d+a.ty,this},n.prototype.decompose=function(a){var t=this.a,e=this.b,r=this.c,d=this.d,i=-M(-r,d),o=M(e,t);return 1e-5>W(i+o)?(a.rotation=o,0>t&&0<=d&&(a.rotation+=0>=a.rotation?C:-C),a.skew.x=a.skew.y=0):(a.skew.x=i,a.skew.y=o),a.scale.x=H(t*t+e*e),a.scale.y=H(r*r+d*d),a.position.x=this.tx,a.position.y=this.ty,a},n.prototype.invert=function(){var a=this.a,t=this.b,s=this.c,d=this.d,n=this.tx,i=a*d-t*s;return this.a=d/i,this.b=-t/i,this.c=-s/i,this.d=a/i,this.tx=(s*this.ty-d*n)/i,this.ty=-(a*this.ty-t*n)/i,this},n.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},n.prototype.clone=function(){var t=new n;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},n.prototype.copy=function(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},r(n,null,[{key:'IDENTITY',get:function(){return new n}},{key:'TEMP_MATRIX',get:function(){return new n}}]),n}();e.default=i},{"./Point":69}],68:[function(a,t,e){function s(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}e.__esModule=!0;var r=function(){function a(a,o){for(var e=0,r;e<o.length;e++)r=o[e],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}return function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}}(),n=function(){function n(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;s(this,n),this._x=r,this._y=a,this.cb=t,this.scope=e}return n.prototype.set=function(a,t){var e=a||0,r=t||(0===t?0:e);this._x===e&&this._y===r||(this._x=e,this._y=r,this.cb.call(this.scope))},n.prototype.copy=function(e){this._x===e.x&&this._y===e.y||(this._x=e.x,this._y=e.y,this.cb.call(this.scope))},r(n,[{key:'x',get:function(){return this._x},set:function(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))}},{key:'y',get:function(){return this._y},set:function(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))}}]),n}();e.default=n},{}],69:[function(a,t,e){function o(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}e.__esModule=!0;var r=function(){function n(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;o(this,n),this.x=t,this.y=e}return n.prototype.clone=function(){return new n(this.x,this.y)},n.prototype.copy=function(e){this.set(e.x,e.y)},n.prototype.equals=function(e){return e.x===this.x&&e.y===this.y},n.prototype.set=function(r,t){this.x=r||0,this.y=t||(0===t?0:this.x)},n}();e.default=r},{}],70:[function(p,t,e){function r(e){return e&&e.__esModule?e:{default:e}}e.__esModule=!0;var n=p('./Point');Object.defineProperty(e,'Point',{enumerable:!0,get:function(){return r(n).default}});var i=p('./ObservablePoint');Object.defineProperty(e,'ObservablePoint',{enumerable:!0,get:function(){return r(i).default}});var o=p('./Matrix');Object.defineProperty(e,'Matrix',{enumerable:!0,get:function(){return r(o).default}});var s=p('./GroupD8');Object.defineProperty(e,'GroupD8',{enumerable:!0,get:function(){return r(s).default}});var a=p('./shapes/Circle');Object.defineProperty(e,'Circle',{enumerable:!0,get:function(){return r(a).default}});var u=p('./shapes/Ellipse');Object.defineProperty(e,'Ellipse',{enumerable:!0,get:function(){return r(u).default}});var h=p('./shapes/Polygon');Object.defineProperty(e,'Polygon',{enumerable:!0,get:function(){return r(h).default}});var l=p('./shapes/Rectangle');Object.defineProperty(e,'Rectangle',{enumerable:!0,get:function(){return r(l).default}});var c=p('./shapes/RoundedRectangle');Object.defineProperty(e,'RoundedRectangle',{enumerable:!0,get:function(){return r(c).default}})},{"./GroupD8":66,"./Matrix":67,"./ObservablePoint":68,"./Point":69,"./shapes/Circle":71,"./shapes/Ellipse":72,"./shapes/Polygon":73,"./shapes/Rectangle":74,"./shapes/RoundedRectangle":75}],71:[function(d,t,e){function l(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}e.__esModule=!0;var r=d('./Rectangle'),n=function(e){return e&&e.__esModule?e:{default:e}}(r),o=d('../../const'),i=function(){function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;l(this,a),this.x=t,this.y=e,this.radius=r,this.type=o.SHAPES.CIRC}return a.prototype.clone=function(){return new a(this.x,this.y,this.radius)},a.prototype.contains=function(a,t){if(0>=this.radius)return!1;var e=this.radius*this.radius,r=this.x-a,n=this.y-t;return r*=r,n*=n,r+n<=e},a.prototype.getBounds=function(){return new n.default(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},a}();e.default=i},{"../../const":46,"./Rectangle":74}],72:[function(d,t,e){function l(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}e.__esModule=!0;var r=d('./Rectangle'),n=function(e){return e&&e.__esModule?e:{default:e}}(r),u=d('../../const'),o=function(){function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;l(this,a),this.x=t,this.y=e,this.width=r,this.height=n,this.type=u.SHAPES.ELIP}return a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height)},a.prototype.contains=function(a,t){if(0>=this.width||0>=this.height)return!1;var e=(a-this.x)/this.width,r=(t-this.y)/this.height;return e*=e,r*=r,1>=e+r},a.prototype.getBounds=function(){return new n.default(this.x-this.width,this.y-this.height,this.width,this.height)},a}();e.default=o},{"../../const":46,"./Rectangle":74}],73:[function(d,t,e){function l(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}e.__esModule=!0;var r=d('../Point'),n=function(e){return e&&e.__esModule?e:{default:e}}(r),o=d('../../const'),i=function(){function s(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];if(l(this,s),Array.isArray(e[0])&&(e=e[0]),e[0]instanceof n.default){for(var i=[],a=0,d=e.length;a<d;a++)i.push(e[a].x,e[a].y);e=i}this.closed=!0,this.points=e,this.type=o.SHAPES.POLY}return s.prototype.clone=function(){return new s(this.points.slice())},s.prototype.close=function(){var e=this.points;e[0]===e[e.length-2]&&e[1]===e[e.length-1]||e.push(e[0],e[1])},s.prototype.contains=function(d,t){for(var e=!1,l=this.points.length/2,n=0,i=l-1;n<l;i=n++){var o=this.points[2*n],s=this.points[2*n+1],a=this.points[2*i],u=this.points[2*i+1];s>t!=u>t&&d<(t-s)/(u-s)*(a-o)+o&&(e=!e)}return e},s}();e.default=i},{"../../const":46,"../Point":69}],74:[function(a,t,e){function d(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}e.__esModule=!0;var r=function(){function a(a,o){for(var e=0,r;e<o.length;e++)r=o[e],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}return function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}}(),n=a('../../const'),o=function(){function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,l=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,u=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;d(this,a),this.x=+t,this.y=+o,this.width=+l,this.height=+u,this.type=n.SHAPES.RECT}return a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height)},a.prototype.copy=function(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this},a.prototype.contains=function(r,t){return!(0>=this.width||0>=this.height)&&r>=this.x&&r<this.x+this.width&&t>=this.y&&t<this.y+this.height},a.prototype.pad=function(r,t){r=r||0,t=t||(0===t?0:r),this.x-=r,this.y-=t,this.width+=2*r,this.height+=2*t},a.prototype.fit=function(e){this.x<e.x&&(this.width+=this.x,0>this.width&&(this.width=0),this.x=e.x),this.y<e.y&&(this.height+=this.y,0>this.height&&(this.height=0),this.y=e.y),this.x+this.width>e.x+e.width&&(this.width=e.width-this.x,0>this.width&&(this.width=0)),this.y+this.height>e.y+e.height&&(this.height=e.height-this.y,0>this.height&&(this.height=0))},a.prototype.enlarge=function(a){var t=B(this.x,a.x),e=P(this.x+this.width,a.x+a.width),r=B(this.y,a.y),n=P(this.y+this.height,a.y+a.height);this.x=t,this.width=e-t,this.y=r,this.height=n-r},r(a,[{key:'left',get:function(){return this.x}},{key:'right',get:function(){return this.x+this.width}},{key:'top',get:function(){return this.y}},{key:'bottom',get:function(){return this.y+this.height}}],[{key:'EMPTY',get:function(){return new a(0,0,0,0)}}]),a}();e.default=o},{"../../const":46}],75:[function(a,t,e){function d(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}e.__esModule=!0;var n=a('../../const'),r=function(){function i(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,s=4<arguments.length&&void 0!==arguments[4]?arguments[4]:20;d(this,i),this.x=t,this.y=e,this.width=r,this.height=o,this.radius=s,this.type=n.SHAPES.RREC}return i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.radius)},i.prototype.contains=function(a,t){if(0>=this.width||0>=this.height)return!1;if(a>=this.x&&a<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){if(t>=this.y+this.radius&&t<=this.y+this.height-this.radius||a>=this.x+this.radius&&a<=this.x+this.width-this.radius)return!0;var e=a-(this.x+this.radius),r=t-(this.y+this.radius),n=this.radius*this.radius;if(e*e+r*r<=n)return!0;if((e=a-(this.x+this.width-this.radius))*e+r*r<=n)return!0;if(r=t-(this.y+this.height-this.radius),e*e+r*r<=n)return!0;if((e=a-(this.x+this.radius))*e+r*r<=n)return!0}return!1},i}();e.default=r},{"../../const":46}],76:[function(x,t,e){function r(e){return e&&e.__esModule?e:{default:e}}function T(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}function i(r,n){if(!r)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==('undefined'==typeof n?'undefined':z(n))||'function'==typeof n)?n:r}function n(r,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+('undefined'==typeof n?'undefined':z(n)));r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(r,n):r.__proto__=n)}e.__esModule=!0;var o=function(){function a(a,o){for(var e=0,r;e<o.length;e++)r=o[e],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}return function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}}(),E=x('../utils'),u=x('../math'),h=x('../const'),a=x('../settings'),l=r(a),s=x('../display/Container'),d=r(s),p=x('../textures/RenderTexture'),c=r(p),f=x('eventemitter3'),g=r(f),m=new u.Matrix,_=function(p){function t(e,r,o,s){T(this,t);var a=i(this,p.call(this));return(0,E.sayHello)(e),'number'==typeof r&&(r=Object.assign({width:r,height:o||l.default.RENDER_OPTIONS.height},s)),r=Object.assign({},l.default.RENDER_OPTIONS,r),a.options=r,a.type=h.RENDERER_TYPE.UNKNOWN,a.screen=new u.Rectangle(0,0,r.width,r.height),a.view=r.view||document.createElement('canvas'),a.resolution=r.resolution||l.default.RESOLUTION,a.transparent=r.transparent,a.autoResize=r.autoResize||!1,a.blendModes=null,a.preserveDrawingBuffer=r.preserveDrawingBuffer,a.clearBeforeRender=r.clearBeforeRender,a.roundPixels=r.roundPixels,a._backgroundColor=0,a._backgroundColorRgba=[0,0,0,0],a._backgroundColorString='#000000',a.backgroundColor=r.backgroundColor||a._backgroundColor,a._tempDisplayObjectParent=new d.default,a._lastObjectRendered=a._tempDisplayObjectParent,a}return n(t,p),t.prototype.resize=function(r,t){this.screen.width=r,this.screen.height=t,this.view.width=r*this.resolution,this.view.height=t*this.resolution,this.autoResize&&(this.view.style.width=r+'px',this.view.style.height=t+'px')},t.prototype.generateTexture=function(a,t,e){var r=a.getLocalBounds(),n=c.default.create(0|r.width,0|r.height,t,e);return m.tx=-r.x,m.ty=-r.y,this.render(a,n,!1,m,!0),n},t.prototype.destroy=function(e){e&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.type=h.RENDERER_TYPE.UNKNOWN,this.view=null,this.screen=null,this.resolution=0,this.transparent=!1,this.autoResize=!1,this.blendModes=null,this.options=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this.roundPixels=!1,this._backgroundColor=0,this._backgroundColorRgba=null,this._backgroundColorString=null,this._tempDisplayObjectParent=null,this._lastObjectRendered=null},o(t,[{key:'width',get:function(){return this.view.width}},{key:'height',get:function(){return this.view.height}},{key:'backgroundColor',get:function(){return this._backgroundColor},set:function(e){this._backgroundColor=e,this._backgroundColorString=(0,E.hex2string)(e),(0,E.hex2rgb)(e,this._backgroundColorRgba)}}]),t}(g.default);e.default=_},{"../const":46,"../display/Container":48,"../math":70,"../settings":101,"../textures/RenderTexture":113,"../utils":124,eventemitter3:3}],77:[function(x,t,e){function r(e){return e&&e.__esModule?e:{default:e}}function b(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}function i(r,n){if(!r)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==('undefined'==typeof n?'undefined':z(n))||'function'==typeof n)?n:r}function n(r,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+('undefined'==typeof n?'undefined':z(n)));r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(r,n):r.__proto__=n)}e.__esModule=!0;var o=x('../SystemRenderer'),a=r(o),s=x('./utils/CanvasMaskManager'),u=r(s),l=x('./utils/CanvasRenderTarget'),c=r(l),d=x('./utils/mapCanvasBlendModesToPixi'),h=r(d),p=x('../../utils'),f=x('../../const'),y=x('../../settings'),g=r(y),m=function(o){function t(e,r,n){b(this,t);var s=i(this,o.call(this,'Canvas',e,r,n));return s.type=f.RENDERER_TYPE.CANVAS,s.rootContext=s.view.getContext('2d',{alpha:s.transparent}),s.context=s.rootContext,s.refresh=!0,s.maskManager=new u.default(s),s.smoothProperty='imageSmoothingEnabled',s.rootContext.imageSmoothingEnabled||(s.rootContext.webkitImageSmoothingEnabled?s.smoothProperty='webkitImageSmoothingEnabled':s.rootContext.mozImageSmoothingEnabled?s.smoothProperty='mozImageSmoothingEnabled':s.rootContext.oImageSmoothingEnabled?s.smoothProperty='oImageSmoothingEnabled':s.rootContext.msImageSmoothingEnabled&&(s.smoothProperty='msImageSmoothingEnabled')),s.initPlugins(),s.blendModes=(0,h.default)(),s._activeBlendMode=null,s.renderingToScreen=!1,s.resize(s.options.width,s.options.height),s}return n(t,o),t.prototype.render=function(d,t,l,r,n){if(this.view){this.renderingToScreen=!t,this.emit('prerender');var p=this.resolution;t?(t=t.baseTexture||t,t._canvasRenderTarget||(t._canvasRenderTarget=new c.default(t.width,t.height,t.resolution),t.source=t._canvasRenderTarget.canvas,t.valid=!0),this.context=t._canvasRenderTarget.context,this.resolution=t._canvasRenderTarget.resolution):this.context=this.rootContext;var o=this.context;if(t||(this._lastObjectRendered=d),!n){var s=d.parent,a=this._tempDisplayObjectParent.transform.worldTransform;r?(r.copy(a),this._tempDisplayObjectParent.transform._worldID=-1):a.identity(),d.parent=this._tempDisplayObjectParent,d.updateTransform(),d.parent=s}o.setTransform(1,0,0,1,0,0),o.globalAlpha=1,this._activeBlendMode=f.BLEND_MODES.NORMAL,o.globalCompositeOperation=this.blendModes[f.BLEND_MODES.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(o.fillStyle='black',o.clear()),(void 0===l?this.clearBeforeRender:l)&&this.renderingToScreen&&(this.transparent?o.clearRect(0,0,this.width,this.height):(o.fillStyle=this._backgroundColorString,o.fillRect(0,0,this.width,this.height)));var u=this.context;this.context=o,d.renderCanvas(this),this.context=u,this.resolution=p,this.emit('postrender')}},t.prototype.clear=function(r){var t=this.context;r=r||this._backgroundColorString,!this.transparent&&r?(t.fillStyle=r,t.fillRect(0,0,this.width,this.height)):t.clearRect(0,0,this.width,this.height)},t.prototype.setBlendMode=function(e){this._activeBlendMode!==e&&(this._activeBlendMode=e,this.context.globalCompositeOperation=this.blendModes[e])},t.prototype.destroy=function(t){this.destroyPlugins(),o.prototype.destroy.call(this,t),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.smoothProperty=null},t.prototype.resize=function(t,e){o.prototype.resize.call(this,t,e),this.smoothProperty&&(this.rootContext[this.smoothProperty]=g.default.SCALE_MODE===f.SCALE_MODES.LINEAR)},t.prototype.invalidateBlendMode=function(){this._activeBlendMode=this.blendModes.indexOf(this.context.globalCompositeOperation)},t}(a.default);e.default=m,p.pluginTarget.mixin(m)},{"../../const":46,"../../settings":101,"../../utils":124,"../SystemRenderer":76,"./utils/CanvasMaskManager":78,"./utils/CanvasRenderTarget":79,"./utils/mapCanvasBlendModesToPixi":81}],78:[function(a,t,e){function r(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}e.__esModule=!0;var S=a('../../../const'),n=function(){function n(t){r(this,n),this.renderer=t}return n.prototype.pushMask=function(a){var t=this.renderer;t.context.save();var e=a.alpha,r=a.transform.worldTransform,n=t.resolution;t.context.setTransform(r.a*n,r.b*n,r.c*n,r.d*n,r.tx*n,r.ty*n),a._texture||(this.renderGraphicsShape(a),t.context.clip()),a.worldAlpha=e},n.prototype.renderGraphicsShape=function(i){var t=this.renderer.context,e=i.graphicsData.length;if(0!==e){t.beginPath();for(var r=0;r<e;r++){var n=i.graphicsData[r],o=n.shape;if(n.type===S.SHAPES.POLY){var s=o.points;t.moveTo(s[0],s[1]);for(var a=1;a<s.length/2;a++)t.lineTo(s[2*a],s[2*a+1]);s[0]===s[s.length-2]&&s[1]===s[s.length-1]&&t.closePath()}else if(n.type===S.SHAPES.RECT)t.rect(o.x,o.y,o.width,o.height),t.closePath();else if(n.type===S.SHAPES.CIRC)t.arc(o.x,o.y,o.radius,0,2*C),t.closePath();else if(n.type===S.SHAPES.ELIP){var u=2*o.width,h=2*o.height,l=o.x-u/2,c=o.y-h/2,d=.5522848*(u/2),f=.5522848*(h/2),p=l+u,v=c+h,y=l+u/2,g=c+h/2;t.moveTo(l,g),t.bezierCurveTo(l,g-f,y-d,c,y,c),t.bezierCurveTo(y+d,c,p,g-f,p,g),t.bezierCurveTo(p,g+f,y+d,v,y,v),t.bezierCurveTo(y-d,v,l,g+f,l,g),t.closePath()}else if(n.type===S.SHAPES.RREC){var m=o.x,_=o.y,b=o.width,x=o.height,T=o.radius,P=0|B(b,x)/2;T=T>P?P:T,t.moveTo(m,_+T),t.lineTo(m,_+x-T),t.quadraticCurveTo(m,_+x,m+T,_+x),t.lineTo(m+b-T,_+x),t.quadraticCurveTo(m+b,_+x,m+b,_+x-T),t.lineTo(m+b,_+T),t.quadraticCurveTo(m+b,_,m+b-T,_),t.lineTo(m+T,_),t.quadraticCurveTo(m,_,m,_+T),t.closePath()}}}},n.prototype.popMask=function(e){e.context.restore(),e.invalidateBlendMode()},n.prototype.destroy=function(){},n}();e.default=n},{"../../../const":46}],79:[function(d,t,e){function l(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}e.__esModule=!0;var r=function(){function a(a,o){for(var e=0,r;e<o.length;e++)r=o[e],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}return function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}}(),n=d('../../../settings'),o=function(e){return e&&e.__esModule?e:{default:e}}(n),i=function(){function n(t,e,r){l(this,n),this.canvas=document.createElement('canvas'),this.context=this.canvas.getContext('2d'),this.resolution=r||o.default.RESOLUTION,this.resize(t,e)}return n.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},n.prototype.resize=function(r,t){this.canvas.width=r*this.resolution,this.canvas.height=t*this.resolution},n.prototype.destroy=function(){this.context=null,this.canvas=null},r(n,[{key:'width',get:function(){return this.canvas.width},set:function(e){this.canvas.width=e}},{key:'height',get:function(){return this.canvas.height},set:function(e){this.canvas.height=e}}]),n}();e.default=i},{"../../../settings":101}],80:[function(a,t,e){function d(n){var t=document.createElement('canvas');t.width=6,t.height=1;var e=t.getContext('2d');return e.fillStyle=n,e.fillRect(0,0,6,1),t}e.__esModule=!0,e.default=function(){if('undefined'==typeof document)return!1;var n=d('#ff00ff'),t=d('#ffff00'),e=document.createElement('canvas');e.width=6,e.height=1;var r=e.getContext('2d');r.globalCompositeOperation='multiply',r.drawImage(n,0,0),r.drawImage(t,2,0);var a=r.getImageData(2,0,1,1);if(!a)return!1;var i=a.data;return 255===i[0]&&0===i[1]&&0===i[2]}},{}],81:[function(n,t,e){e.__esModule=!0,e.default=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];return(0,o.default)()?(e[r.BLEND_MODES.NORMAL]='source-over',e[r.BLEND_MODES.ADD]='lighter',e[r.BLEND_MODES.MULTIPLY]='multiply',e[r.BLEND_MODES.SCREEN]='screen',e[r.BLEND_MODES.OVERLAY]='overlay',e[r.BLEND_MODES.DARKEN]='darken',e[r.BLEND_MODES.LIGHTEN]='lighten',e[r.BLEND_MODES.COLOR_DODGE]='color-dodge',e[r.BLEND_MODES.COLOR_BURN]='color-burn',e[r.BLEND_MODES.HARD_LIGHT]='hard-light',e[r.BLEND_MODES.SOFT_LIGHT]='soft-light',e[r.BLEND_MODES.DIFFERENCE]='difference',e[r.BLEND_MODES.EXCLUSION]='exclusion',e[r.BLEND_MODES.HUE]='hue',e[r.BLEND_MODES.SATURATION]='saturate',e[r.BLEND_MODES.COLOR]='color',e[r.BLEND_MODES.LUMINOSITY]='luminosity'):(e[r.BLEND_MODES.NORMAL]='source-over',e[r.BLEND_MODES.ADD]='lighter',e[r.BLEND_MODES.MULTIPLY]='source-over',e[r.BLEND_MODES.SCREEN]='source-over',e[r.BLEND_MODES.OVERLAY]='source-over',e[r.BLEND_MODES.DARKEN]='source-over',e[r.BLEND_MODES.LIGHTEN]='source-over',e[r.BLEND_MODES.COLOR_DODGE]='source-over',e[r.BLEND_MODES.COLOR_BURN]='source-over',e[r.BLEND_MODES.HARD_LIGHT]='source-over',e[r.BLEND_MODES.SOFT_LIGHT]='source-over',e[r.BLEND_MODES.DIFFERENCE]='source-over',e[r.BLEND_MODES.EXCLUSION]='source-over',e[r.BLEND_MODES.HUE]='source-over',e[r.BLEND_MODES.SATURATION]='source-over',e[r.BLEND_MODES.COLOR]='source-over',e[r.BLEND_MODES.LUMINOSITY]='source-over'),e[r.BLEND_MODES.NORMAL_NPM]=e[r.BLEND_MODES.NORMAL],e[r.BLEND_MODES.ADD_NPM]=e[r.BLEND_MODES.ADD],e[r.BLEND_MODES.SCREEN_NPM]=e[r.BLEND_MODES.SCREEN],e};var r=n('../../../const'),a=n('./canUseNewCanvasBlendModes'),o=function(e){return e&&e.__esModule?e:{default:e}}(a)},{"../../../const":46,"./canUseNewCanvasBlendModes":80}],82:[function(d,t,e){function r(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}e.__esModule=!0;var n=d('../../const'),i=d('../../settings'),o=function(e){return e&&e.__esModule?e:{default:e}}(i),s=function(){function a(t){r(this,a),this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=o.default.GC_MAX_IDLE,this.checkCountMax=o.default.GC_MAX_CHECK_COUNT,this.mode=o.default.GC_MODE}return a.prototype.update=function(){this.count++,this.mode!==n.GC_MODES.MANUAL&&++this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())},a.prototype.run=function(){for(var a=this.renderer.textureManager,t=a._managedTextures,e=!1,r=0,n;r<t.length;r++)n=t[r],!n._glRenderTargets&&this.count-n.touched>this.maxIdle&&(a.destroyTexture(n,!0),t[r]=null,e=!0);if(e){for(var i=0,o=0;o<t.length;o++)null!==t[o]&&(t[i++]=t[o]);t.length=i}},a.prototype.unload=function(n){var t=this.renderer.textureManager;n._texture&&n._texture._glRenderTargets&&t.destroyTexture(n._texture,!0);for(var e=n.children.length-1;0<=e;e--)this.unload(n.children[e])},a}();e.default=s},{"../../const":46,"../../settings":101}],83:[function(d,t,e){function r(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}e.__esModule=!0;var p=d('pixi-gl-core'),i=d('../../const'),n=d('./utils/RenderTarget'),o=function(e){return e&&e.__esModule?e:{default:e}}(n),a=d('../../utils'),s=function(){function n(t){r(this,n),this.renderer=t,this.gl=t.gl,this._managedTextures=[]}return n.prototype.bindTexture=function(){},n.prototype.getTexture=function(){},n.prototype.updateTexture=function(a,t){var e=this.gl,r=!!a._glRenderTargets;if(!a.hasLoaded)return null;var n=this.renderer.boundTextures;if(void 0===t){t=0;for(var s=0;s<n.length;++s)if(n[s]===a){t=s;break}}n[t]=a,e.activeTexture(e.TEXTURE0+t);var d=a._glTextures[this.renderer.CONTEXT_UID];if(d)r?a._glRenderTargets[this.renderer.CONTEXT_UID].resize(a.width,a.height):d.upload(a.source);else{if(r){var u=new o.default(this.gl,a.width,a.height,a.scaleMode,a.resolution);u.resize(a.width,a.height),a._glRenderTargets[this.renderer.CONTEXT_UID]=u,d=u.texture}else d=new p.GLTexture(this.gl,null,null,null,null),d.bind(t),d.premultiplyAlpha=!0,d.upload(a.source);a._glTextures[this.renderer.CONTEXT_UID]=d,a.on('update',this.updateTexture,this),a.on('dispose',this.destroyTexture,this),this._managedTextures.push(a),a.isPowerOfTwo?(a.mipmap&&d.enableMipmap(),a.wrapMode===i.WRAP_MODES.CLAMP?d.enableWrapClamp():a.wrapMode===i.WRAP_MODES.REPEAT?d.enableWrapRepeat():d.enableWrapMirrorRepeat()):d.enableWrapClamp(),a.scaleMode===i.SCALE_MODES.NEAREST?d.enableNearestScaling():d.enableLinearScaling()}return d},n.prototype.destroyTexture=function(s,t){if(s=s.baseTexture||s,s.hasLoaded){var d=this.renderer.CONTEXT_UID,r=s._glTextures,n=s._glRenderTargets;if(r[d]&&(this.renderer.unbindTexture(s),r[d].destroy(),s.off('update',this.updateTexture,this),s.off('dispose',this.destroyTexture,this),delete r[d],!t)){var i=this._managedTextures.indexOf(s);-1!==i&&(0,a.removeItems)(this._managedTextures,i,1)}n&&n[d]&&(n[d].destroy(),delete n[d])}},n.prototype.removeAll=function(){for(var r=0,t;r<this._managedTextures.length;++r)t=this._managedTextures[r],t._glTextures[this.renderer.CONTEXT_UID]&&delete t._glTextures[this.renderer.CONTEXT_UID]},n.prototype.destroy=function(){for(var r=0,t;r<this._managedTextures.length;++r)t=this._managedTextures[r],this.destroyTexture(t,!0),t.off('update',this.updateTexture,this),t.off('dispose',this.destroyTexture,this);this._managedTextures=null},n}();e.default=s},{"../../const":46,"../../utils":124,"./utils/RenderTarget":96,"pixi-gl-core":15}],84:[function(k,t,e){function r(e){return e&&e.__esModule?e:{default:e}}function B(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}function i(r,n){if(!r)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==('undefined'==typeof n?'undefined':z(n))||'function'==typeof n)?n:r}function n(r,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+('undefined'==typeof n?'undefined':z(n)));r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(r,n):r.__proto__=n)}e.__esModule=!0;var o=k('../SystemRenderer'),a=r(o),s=k('./managers/MaskManager'),u=r(s),l=k('./managers/StencilManager'),c=r(l),d=k('./managers/FilterManager'),h=r(d),p=k('./utils/RenderTarget'),f=r(p),y=k('./utils/ObjectRenderer'),g=r(y),m=k('./TextureManager'),_=r(m),b=k('../../textures/BaseTexture'),x=r(b),T=k('./TextureGarbageCollector'),v=r(T),E=k('./WebGLState'),S=r(E),O=k('./utils/mapWebGLDrawModesToPixi'),P=r(O),M=k('./utils/validateContext'),C=r(M),R=k('../../utils'),w=k('pixi-gl-core'),A=r(w),D=k('../../const'),I=0,L=function(o){function t(e,r,n){B(this,t);var s=i(this,o.call(this,'WebGL',e,r,n));return s.legacy=s.options.legacy,s.legacy&&(A.default.VertexArrayObject.FORCE_NATIVE=!0),s.type=D.RENDERER_TYPE.WEBGL,s.handleContextLost=s.handleContextLost.bind(s),s.handleContextRestored=s.handleContextRestored.bind(s),s.view.addEventListener('webglcontextlost',s.handleContextLost,!1),s.view.addEventListener('webglcontextrestored',s.handleContextRestored,!1),s._contextOptions={alpha:s.transparent,antialias:s.options.antialias,premultipliedAlpha:s.transparent&&'notMultiplied'!==s.transparent,stencil:!0,preserveDrawingBuffer:s.options.preserveDrawingBuffer,powerPreference:s.options.powerPreference},s._backgroundColorRgba[3]=s.transparent?0:1,s.maskManager=new u.default(s),s.stencilManager=new c.default(s),s.emptyRenderer=new g.default(s),s.currentRenderer=s.emptyRenderer,s.initPlugins(),s.options.context&&(0,C.default)(s.options.context),s.gl=s.options.context||A.default.createContext(s.view,s._contextOptions),s.CONTEXT_UID=I++,s.state=new S.default(s.gl),s.renderingToScreen=!0,s.boundTextures=null,s._activeShader=null,s._activeVao=null,s._activeRenderTarget=null,s._initContext(),s.filterManager=new h.default(s),s.drawModes=(0,P.default)(s.gl),s._nextTextureLocation=0,s.setBlendMode(0),s}return n(t,o),t.prototype._initContext=function(){var a=this.gl;a.isContextLost()&&a.getExtension('WEBGL_lose_context')&&a.getExtension('WEBGL_lose_context').restoreContext();var t=a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS);this._activeShader=null,this._activeVao=null,this.boundTextures=Array(t),this.emptyTextures=Array(t),this.textureManager=new _.default(this),this.textureGC=new v.default(this),this.state.resetToDefault(),this.rootRenderTarget=new f.default(a,this.width,this.height,null,this.resolution,!0),this.rootRenderTarget.clearColor=this._backgroundColorRgba,this.bindRenderTarget(this.rootRenderTarget);var e=new A.default.GLTexture.fromData(a,null,1,1),r={_glTextures:{}};r._glTextures[this.CONTEXT_UID]={};for(var n=0,i;n<t;n++)i=new x.default,i._glTextures[this.CONTEXT_UID]=e,this.boundTextures[n]=r,this.emptyTextures[n]=i,this.bindTexture(null,n);this.emit('context',a),this.resize(this.screen.width,this.screen.height)},t.prototype.render=function(a,t,s,r,n){if(this.renderingToScreen=!t,this.emit('prerender'),this.gl&&!this.gl.isContextLost()){if(this._nextTextureLocation=0,t||(this._lastObjectRendered=a),!n){var d=a.parent;a.parent=this._tempDisplayObjectParent,a.updateTransform(),a.parent=d}this.bindRenderTexture(t,r),this.currentRenderer.start(),(void 0===s?this.clearBeforeRender:s)&&this._activeRenderTarget.clear(),a.renderWebGL(this),this.currentRenderer.flush(),this.textureGC.update(),this.emit('postrender')}},t.prototype.setObjectRenderer=function(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())},t.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.resize=function(r,t){a.default.prototype.resize.call(this,r,t),this.rootRenderTarget.resize(r,t),this._activeRenderTarget===this.rootRenderTarget&&(this.rootRenderTarget.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=this.rootRenderTarget.projectionMatrix.toArray(!0)))},t.prototype.setBlendMode=function(e){this.state.setBlendMode(e)},t.prototype.clear=function(e){this._activeRenderTarget.clear(e)},t.prototype.setTransform=function(e){this._activeRenderTarget.transform=e},t.prototype.clearRenderTexture=function(a,t){var e=a.baseTexture,r=e._glRenderTargets[this.CONTEXT_UID];return r&&r.clear(t),this},t.prototype.bindRenderTexture=function(a,t){var e;if(a){var r=a.baseTexture;r._glRenderTargets[this.CONTEXT_UID]||this.textureManager.updateTexture(r,0),this.unbindTexture(r),e=r._glRenderTargets[this.CONTEXT_UID],e.setFrame(a.frame)}else e=this.rootRenderTarget;return e.transform=t,this.bindRenderTarget(e),this},t.prototype.bindRenderTarget=function(e){return e!==this._activeRenderTarget&&(this._activeRenderTarget=e,e.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=e.projectionMatrix.toArray(!0)),this.stencilManager.setMaskStack(e.stencilMaskStack)),this},t.prototype.bindShader=function(r,t){return this._activeShader!==r&&(this._activeShader=r,r.bind(),!1!==t&&(r.uniforms.projectionMatrix=this._activeRenderTarget.projectionMatrix.toArray(!0))),this},t.prototype.bindTexture=function(a,t,e){if(a=a||this.emptyTextures[t],a=a.baseTexture||a,a.touched=this.textureGC.count,e)t=t||0;else{for(var r=0;r<this.boundTextures.length;r++)if(this.boundTextures[r]===a)return r;void 0===t&&(this._nextTextureLocation++,this._nextTextureLocation%=this.boundTextures.length,t=this.boundTextures.length-this._nextTextureLocation-1)}var n=this.gl,i=a._glTextures[this.CONTEXT_UID];return i?(this.boundTextures[t]=a,n.activeTexture(n.TEXTURE0+t),n.bindTexture(n.TEXTURE_2D,i.texture)):this.textureManager.updateTexture(a,t),t},t.prototype.unbindTexture=function(n){var t=this.gl;n=n.baseTexture||n;for(var e=0;e<this.boundTextures.length;e++)this.boundTextures[e]===n&&(this.boundTextures[e]=this.emptyTextures[e],t.activeTexture(t.TEXTURE0+e),t.bindTexture(t.TEXTURE_2D,this.emptyTextures[e]._glTextures[this.CONTEXT_UID].texture));return this},t.prototype.createVao=function(){return new A.default.VertexArrayObject(this.gl,this.state.attribState)},t.prototype.bindVao=function(e){return this._activeVao===e?this:(e?e.bind():this._activeVao&&this._activeVao.unbind(),this._activeVao=e,this)},t.prototype.reset=function(){return this.setObjectRenderer(this.emptyRenderer),this._activeShader=null,this._activeRenderTarget=this.rootRenderTarget,this.rootRenderTarget.activate(),this.state.resetToDefault(),this},t.prototype.handleContextLost=function(e){e.preventDefault()},t.prototype.handleContextRestored=function(){this.textureManager.removeAll(),this._initContext()},t.prototype.destroy=function(t){this.destroyPlugins(),this.view.removeEventListener('webglcontextlost',this.handleContextLost),this.view.removeEventListener('webglcontextrestored',this.handleContextRestored),this.textureManager.destroy(),o.prototype.destroy.call(this,t),this.uid=0,this.maskManager.destroy(),this.stencilManager.destroy(),this.filterManager.destroy(),this.maskManager=null,this.filterManager=null,this.textureManager=null,this.currentRenderer=null,this.handleContextLost=null,this.handleContextRestored=null,this._contextOptions=null,this.gl.useProgram(null),this.gl.getExtension('WEBGL_lose_context')&&this.gl.getExtension('WEBGL_lose_context').loseContext(),this.gl=null},t}(a.default);e.default=L,R.pluginTarget.mixin(L)},{"../../const":46,"../../textures/BaseTexture":112,"../../utils":124,"../SystemRenderer":76,"./TextureGarbageCollector":82,"./TextureManager":83,"./WebGLState":85,"./managers/FilterManager":90,"./managers/MaskManager":91,"./managers/StencilManager":92,"./utils/ObjectRenderer":94,"./utils/RenderTarget":96,"./utils/mapWebGLDrawModesToPixi":99,"./utils/validateContext":100,"pixi-gl-core":15}],85:[function(a,t,e){function r(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}e.__esModule=!0;var n=a('./utils/mapWebGLBlendModesToPixi'),i=function(e){return e&&e.__esModule?e:{default:e}}(n),o=function(){function n(t){r(this,n),this.activeState=new Uint8Array(16),this.defaultState=new Uint8Array(16),this.defaultState[0]=1,this.stackIndex=0,this.stack=[],this.gl=t,this.maxAttribs=t.getParameter(t.MAX_VERTEX_ATTRIBS),this.attribState={tempAttribState:Array(this.maxAttribs),attribState:Array(this.maxAttribs)},this.blendModes=(0,i.default)(t),this.nativeVaoExtension=t.getExtension('OES_vertex_array_object')||t.getExtension('MOZ_OES_vertex_array_object')||t.getExtension('WEBKIT_OES_vertex_array_object')}return n.prototype.push=function(){var r=this.stack[this.stackIndex];r||(r=this.stack[this.stackIndex]=new Uint8Array(16)),++this.stackIndex;for(var t=0;t<this.activeState.length;t++)r[t]=this.activeState[t]},n.prototype.pop=function(){var e=this.stack[--this.stackIndex];this.setState(e)},n.prototype.setState=function(e){this.setBlend(e[0]),this.setDepthTest(e[1]),this.setFrontFace(e[2]),this.setCullFace(e[3]),this.setBlendMode(e[4])},n.prototype.setBlend=function(e){e=e?1:0,this.activeState[0]!==e&&(this.activeState[0]=e,this.gl[e?'enable':'disable'](this.gl.BLEND))},n.prototype.setBlendMode=function(r){if(r!==this.activeState[4]){this.activeState[4]=r;var t=this.blendModes[r];2===t.length?this.gl.blendFunc(t[0],t[1]):this.gl.blendFuncSeparate(t[0],t[1],t[2],t[3])}},n.prototype.setDepthTest=function(e){e=e?1:0,this.activeState[1]!==e&&(this.activeState[1]=e,this.gl[e?'enable':'disable'](this.gl.DEPTH_TEST))},n.prototype.setCullFace=function(e){e=e?1:0,this.activeState[3]!==e&&(this.activeState[3]=e,this.gl[e?'enable':'disable'](this.gl.CULL_FACE))},n.prototype.setFrontFace=function(e){e=e?1:0,this.activeState[2]!==e&&(this.activeState[2]=e,this.gl.frontFace(this.gl[e?'CW':'CCW']))},n.prototype.resetAttributes=function(){for(var n=0;n<this.attribState.tempAttribState.length;n++)this.attribState.tempAttribState[n]=0;for(var t=0;t<this.attribState.attribState.length;t++)this.attribState.attribState[t]=0;for(var e=1;e<this.maxAttribs;e++)this.gl.disableVertexAttribArray(e)},n.prototype.resetToDefault=function(){this.nativeVaoExtension&&this.nativeVaoExtension.bindVertexArrayOES(null),this.resetAttributes();for(var e=0;e<this.activeState.length;++e)this.activeState[e]=32;this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.setState(this.defaultState)},n}();e.default=o},{"./utils/mapWebGLBlendModesToPixi":98}],86:[function(p,t,e){function r(e){return e&&e.__esModule?e:{default:e}}function g(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}e.__esModule=!0;var n=function(){function a(a,o){for(var e=0,r;e<o.length;e++)r=o[e],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}return function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}}(),o=p('./extractUniformsFromSrc'),i=r(o),a=p('../../../utils'),s=p('../../../const'),u=p('../../../settings'),l=r(u),c={},d=function(){function d(t,e,r){for(var n in g(this,d),this.vertexSrc=t||d.defaultVertexSrc,this.fragmentSrc=e||d.defaultFragmentSrc,this._blendMode=s.BLEND_MODES.NORMAL,this.uniformData=r||(0,i.default)(this.vertexSrc,this.fragmentSrc,'projectionMatrix|uSampler'),this.uniforms={},this.uniformData)this.uniforms[n]=this.uniformData[n].value;this.glShaders={},c[this.vertexSrc+this.fragmentSrc]||(c[this.vertexSrc+this.fragmentSrc]=(0,a.uid)()),this.glShaderKey=c[this.vertexSrc+this.fragmentSrc],this.padding=4,this.resolution=l.default.RESOLUTION,this.enabled=!0,this.autoFit=!0}return d.prototype.apply=function(a,t,e,r){a.applyFilter(this,t,e,r)},n(d,[{key:'blendMode',get:function(){return this._blendMode},set:function(e){this._blendMode=e}}],[{key:'defaultVertexSrc',get:function(){return'attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vTextureCoord = aTextureCoord ;\n}'}},{key:'defaultFragmentSrc',get:function(){return'varying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\nuniform sampler2D uSampler;\nuniform sampler2D filterSampler;\nvoid main(void){\n   vec4 masky = texture2D(filterSampler, vFilterCoord);\n   vec4 sample = texture2D(uSampler, vTextureCoord);\n   vec4 color;\n   if(mod(vFilterCoord.x, 1.0) > 0.5)\n   {\n     color = vec4(1.0, 0.0, 0.0, 1.0);\n   }\n   else\n   {\n     color = vec4(0.0, 1.0, 0.0, 1.0);\n   }\n   gl_FragColor = mix(sample, masky, 0.5);\n   gl_FragColor *= sample.a;\n}'}}]),d}();e.default=d},{"../../../const":46,"../../../settings":101,"../../../utils":124,"./extractUniformsFromSrc":87}],87:[function(n,t,e){function r(a){for(var t=/^(projectionMatrix|uSampler|filterArea|filterClamp)$/,e={},r=void 0,n=a.replace(/\s+/g,' ').split(/\s*;\s*/),p=0,o;p<n.length;p++)if(o=n[p].trim(),-1<o.indexOf('uniform')){var s=o.split(' '),u=s[1],f=s[2],g=1;-1<f.indexOf('[')&&(r=f.split(/\[|]/),f=r[0],g*=+r[1]),f.match(t)||(e[f]={value:d(u,g),name:f,type:u})}return e}e.__esModule=!0,e.default=function(a,t){var e=r(a),n=r(t);return Object.assign(e,n)};var i=n('pixi-gl-core'),o=function(e){return e&&e.__esModule?e:{default:e}}(i),d=o.default.shader.defaultValue},{"pixi-gl-core":15}],88:[function(n,t,e){e.__esModule=!0,e.calculateScreenSpaceMatrix=function(a,t,e){var r=a.identity();return r.translate(t.x/e.width,t.y/e.height),r.scale(e.width,e.height),r},e.calculateNormalizedScreenSpaceMatrix=function(a,t,e){var r=a.identity();r.translate(t.x/e.width,t.y/e.height);var n=e.width/t.width,i=e.height/t.height;return r.scale(n,i),r},e.calculateSpriteMatrix=function(s,t,e,r){var n=r.worldTransform.copy(d.Matrix.TEMP_MATRIX),i=r._texture.baseTexture,o=s.identity(),a=e.height/e.width;o.translate(t.x/e.width,t.y/e.height),o.scale(1,a);var u=e.width/i.width,p=e.height/i.height;return n.tx/=i.width*u,n.ty/=i.width*u,n.invert(),o.prepend(n),o.scale(1,1/a),o.scale(u,p),o.translate(r.anchor.x,r.anchor.y),o};var d=n('../../../math')},{"../../../math":70}],89:[function(d,t,e){function l(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}function n(r,n){if(!r)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==('undefined'==typeof n?'undefined':z(n))||'function'==typeof n)?n:r}function r(r,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+('undefined'==typeof n?'undefined':z(n)));r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(r,n):r.__proto__=n)}e.__esModule=!0;var o=d('../Filter'),i=function(e){return e&&e.__esModule?e:{default:e}}(o),a=d('../../../../math'),s=(d('path'),function(i){function t(e){l(this,t);var r=new a.Matrix,o=n(this,i.call(this,'attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n','varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float alpha;\nuniform sampler2D mask;\n\nvoid main(void)\n{\n    // check clip! this will stop the mask bleeding out from the edges\n    vec2 text = abs( vMaskCoord - 0.5 );\n    text = step(0.5, text);\n\n    float clip = 1.0 - max(text.y, text.x);\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n\n    original *= (masky.r * masky.a * alpha * clip);\n\n    gl_FragColor = original;\n}\n'));return e.renderable=!1,o.maskSprite=e,o.maskMatrix=r,o}return r(t,i),t.prototype.apply=function(a,t,e){var r=this.maskSprite;this.uniforms.mask=r._texture,this.uniforms.otherMatrix=a.calculateSpriteMatrix(this.maskMatrix,r),this.uniforms.alpha=r.worldAlpha,a.applyFilter(this,t,e)},t}(i.default));e.default=s},{"../../../../math":70,"../Filter":86,path:8}],90:[function(T,t,e){function r(e){return e&&e.__esModule?e:{default:e}}function E(r,n){if(!r)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==('undefined'==typeof n?'undefined':z(n))||'function'==typeof n)?n:r}function n(r,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+('undefined'==typeof n?'undefined':z(n)));r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(r,n):r.__proto__=n)}function o(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}e.__esModule=!0;var i=T('./WebGLManager'),a=r(i),s=T('../utils/RenderTarget'),u=r(s),l=T('../utils/Quad'),c=r(l),d=T('../../../math'),h=T('../../../Shader'),p=r(h),f=T('../filters/filterTransforms'),y=function(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t.default=n,t}(f),g=T('bit-twiddle'),m=r(g),_=function e(){o(this,e),this.renderTarget=null,this.sourceFrame=new d.Rectangle,this.destinationFrame=new d.Rectangle,this.filters=[],this.target=null,this.resolution=1},b=function(a){function t(e){o(this,t);var r=E(this,a.call(this,e));return r.gl=r.renderer.gl,r.quad=new c.default(r.gl,e.state.attribState),r.shaderCache={},r.pool={},r.filterData=null,r}return n(t,a),t.prototype.pushFilter=function(d,t){var e=this.renderer,r=this.filterData;if(!r){r=this.renderer._activeRenderTarget.filterStack;var p=new _;p.sourceFrame=p.destinationFrame=this.renderer._activeRenderTarget.size,p.renderTarget=e._activeRenderTarget,this.renderer._activeRenderTarget.filterData=r={index:0,stack:[p]},this.filterData=r}var i=r.stack[++r.index];i||(i=r.stack[r.index]=new _);var o=t[0].resolution,s=0|t[0].padding,a=d.filterArea||d.getBounds(!0),u=i.sourceFrame,h=i.destinationFrame;u.x=(0|a.x*o)/o,u.y=(0|a.y*o)/o,u.width=(0|a.width*o)/o,u.height=(0|a.height*o)/o,r.stack[0].renderTarget.transform||t[0].autoFit&&u.fit(r.stack[0].destinationFrame),u.pad(s),h.width=u.width,h.height=u.height;var l=this.getPotRenderTarget(e.gl,u.width,u.height,o);i.target=d,i.filters=t,i.resolution=o,i.renderTarget=l,l.setFrame(h,u),e.bindRenderTarget(l),l.clear()},t.prototype.popFilter=function(){var d=this.filterData,t=d.stack[d.index-1],e=d.stack[d.index];this.quad.map(e.renderTarget.size,e.sourceFrame).upload();var r=e.filters;if(1===r.length)r[0].apply(this,e.renderTarget,t.renderTarget,!1,e),this.freePotRenderTarget(e.renderTarget);else{var n=e.renderTarget,i=this.getPotRenderTarget(this.renderer.gl,e.sourceFrame.width,e.sourceFrame.height,e.resolution);i.setFrame(e.destinationFrame,e.sourceFrame),i.clear();var o=0;for(o=0;o<r.length-1;++o){r[o].apply(this,n,i,!0,e);var s=n;n=i,i=s}r[o].apply(this,n,t.renderTarget,!1,e),this.freePotRenderTarget(n),this.freePotRenderTarget(i)}0==--d.index&&(this.filterData=null)},t.prototype.applyFilter=function(d,t,e,r){var n=this.renderer,i=n.gl,o=d.glShaders[n.CONTEXT_UID];o||(d.glShaderKey?(o=this.shaderCache[d.glShaderKey])||(o=new p.default(this.gl,d.vertexSrc,d.fragmentSrc),d.glShaders[n.CONTEXT_UID]=this.shaderCache[d.glShaderKey]=o):o=d.glShaders[n.CONTEXT_UID]=new p.default(this.gl,d.vertexSrc,d.fragmentSrc),n.bindVao(null),this.quad.initVao(o)),n.bindVao(this.quad.vao),n.bindRenderTarget(e),r&&(i.disable(i.SCISSOR_TEST),n.clear(),i.enable(i.SCISSOR_TEST)),e===n.maskManager.scissorRenderTarget&&n.maskManager.pushScissorMask(null,n.maskManager.scissorData),n.bindShader(o);var s=this.renderer.emptyTextures[0];this.renderer.boundTextures[0]=s,this.syncUniforms(o,d),n.state.setBlendMode(d.blendMode),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,t.texture.texture),this.quad.vao.draw(this.renderer.gl.TRIANGLES,6,0),i.bindTexture(i.TEXTURE_2D,s._glTextures[this.renderer.CONTEXT_UID].texture)},t.prototype.syncUniforms=function(d,t){var e=t.uniformData,r=t.uniforms,n=1,i;if(d.uniforms.filterArea){i=this.filterData.stack[this.filterData.index];var o=d.uniforms.filterArea;o[0]=i.renderTarget.size.width,o[1]=i.renderTarget.size.height,o[2]=i.sourceFrame.x,o[3]=i.sourceFrame.y,d.uniforms.filterArea=o}if(d.uniforms.filterClamp){i=i||this.filterData.stack[this.filterData.index];var s=d.uniforms.filterClamp;s[0]=0,s[1]=0,s[2]=(i.sourceFrame.width-1)/i.renderTarget.size.width,s[3]=(i.sourceFrame.height-1)/i.renderTarget.size.height,d.uniforms.filterClamp=s}for(var a in e)if('sampler2D'===e[a].type&&0!==r[a]){if(r[a].baseTexture)d.uniforms[a]=this.renderer.bindTexture(r[a].baseTexture,n);else{d.uniforms[a]=n;var u=this.renderer.gl;this.renderer.boundTextures[n]=this.renderer.emptyTextures[n],u.activeTexture(u.TEXTURE0+n),r[a].texture.bind()}n++}else if('mat3'===e[a].type)d.uniforms[a]=void 0===r[a].a?r[a]:r[a].toArray(!0);else if(!('vec2'===e[a].type))'float'===e[a].type?d.uniforms.data[a].value!==e[a]&&(d.uniforms[a]=r[a]):d.uniforms[a]=r[a];else if(void 0!==r[a].x){var p=d.uniforms[a]||new Float32Array(2);p[0]=r[a].x,p[1]=r[a].y,d.uniforms[a]=p}else d.uniforms[a]=r[a]},t.prototype.getRenderTarget=function(a,t){var e=this.filterData.stack[this.filterData.index],r=this.getPotRenderTarget(this.renderer.gl,e.sourceFrame.width,e.sourceFrame.height,t||e.resolution);return r.setFrame(e.destinationFrame,e.sourceFrame),r},t.prototype.returnRenderTarget=function(e){this.freePotRenderTarget(e)},t.prototype.calculateScreenSpaceMatrix=function(r){var t=this.filterData.stack[this.filterData.index];return y.calculateScreenSpaceMatrix(r,t.sourceFrame,t.renderTarget.size)},t.prototype.calculateNormalizedScreenSpaceMatrix=function(r){var t=this.filterData.stack[this.filterData.index];return y.calculateNormalizedScreenSpaceMatrix(r,t.sourceFrame,t.renderTarget.size,t.destinationFrame)},t.prototype.calculateSpriteMatrix=function(n,t){var e=this.filterData.stack[this.filterData.index];return y.calculateSpriteMatrix(n,e.sourceFrame,e.renderTarget.size,t)},t.prototype.destroy=function(){this.shaderCache={},this.emptyPool()},t.prototype.getPotRenderTarget=function(a,t,e,r){t=m.default.nextPow2(t*r),e=m.default.nextPow2(e*r);var n=(65535&t)<<16|65535&e;this.pool[n]||(this.pool[n]=[]);var i=this.pool[n].pop();if(!i){var d=this.renderer.boundTextures[0];a.activeTexture(a.TEXTURE0),i=new u.default(a,t,e,null,1),a.bindTexture(a.TEXTURE_2D,d._glTextures[this.renderer.CONTEXT_UID].texture)}return i.resolution=r,i.defaultFrame.width=i.size.width=t/r,i.defaultFrame.height=i.size.height=e/r,i},t.prototype.emptyPool=function(){for(var n in this.pool){var t=this.pool[n];if(t)for(var e=0;e<t.length;e++)t[e].destroy(!0)}this.pool={}},t.prototype.freePotRenderTarget=function(n){var t=n.size.width*n.resolution,e=n.size.height*n.resolution;this.pool[(65535&t)<<16|65535&e].push(n)},t}(a.default);e.default=b},{"../../../Shader":44,"../../../math":70,"../filters/filterTransforms":88,"../utils/Quad":95,"../utils/RenderTarget":96,"./WebGLManager":93,"bit-twiddle":1}],91:[function(d,t,e){function r(e){return e&&e.__esModule?e:{default:e}}function p(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}function i(r,n){if(!r)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==('undefined'==typeof n?'undefined':z(n))||'function'==typeof n)?n:r}function n(r,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+('undefined'==typeof n?'undefined':z(n)));r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(r,n):r.__proto__=n)}e.__esModule=!0;var o=d('./WebGLManager'),a=r(o),u=d('../filters/spriteMask/SpriteMaskFilter'),h=r(u),l=function(a){function t(e){p(this,t);var r=i(this,a.call(this,e));return r.scissor=!1,r.scissorData=null,r.scissorRenderTarget=null,r.enableScissor=!0,r.alphaMaskPool=[],r.alphaMaskIndex=0,r}return n(t,a),t.prototype.pushMask=function(a,t){if(t.texture)this.pushSpriteMask(a,t);else if(this.enableScissor&&!this.scissor&&this.renderer._activeRenderTarget.root&&!this.renderer.stencilManager.stencilMaskStack.length&&t.isFastRect()){var e=t.worldTransform,r=M(e.b,e.a);r=s(r*(180/C)),r%90?this.pushStencilMask(t):this.pushScissorMask(a,t)}else this.pushStencilMask(t)},t.prototype.popMask=function(r,t){t.texture?this.popSpriteMask(r,t):this.enableScissor&&!this.renderer.stencilManager.stencilMaskStack.length?this.popScissorMask(r,t):this.popStencilMask(r,t)},t.prototype.pushSpriteMask=function(n,t){var e=this.alphaMaskPool[this.alphaMaskIndex];e||(e=this.alphaMaskPool[this.alphaMaskIndex]=[new h.default(t)]),e[0].resolution=this.renderer.resolution,e[0].maskSprite=t,n.filterArea=t.getBounds(!0),this.renderer.filterManager.pushFilter(n,e),this.alphaMaskIndex++},t.prototype.popSpriteMask=function(){this.renderer.filterManager.popFilter(),this.alphaMaskIndex--},t.prototype.pushStencilMask=function(e){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.pushStencil(e)},t.prototype.popStencilMask=function(){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.popStencil()},t.prototype.pushScissorMask=function(a,t){t.renderable=!0;var e=this.renderer._activeRenderTarget,r=t.getBounds();r.fit(e.size),t.renderable=!1,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST);var n=this.renderer.resolution;this.renderer.gl.scissor(r.x*n,(e.root?e.size.height-r.y-r.height:r.y)*n,r.width*n,r.height*n),this.scissorRenderTarget=e,this.scissorData=t,this.scissor=!0},t.prototype.popScissorMask=function(){this.scissorRenderTarget=null,this.scissorData=null,this.scissor=!1;var e=this.renderer.gl;e.disable(e.SCISSOR_TEST)},t}(a.default);e.default=l},{"../filters/spriteMask/SpriteMaskFilter":89,"./WebGLManager":93}],92:[function(d,t,e){function l(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}function n(r,n){if(!r)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==('undefined'==typeof n?'undefined':z(n))||'function'==typeof n)?n:r}function r(r,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+('undefined'==typeof n?'undefined':z(n)));r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(r,n):r.__proto__=n)}e.__esModule=!0;var o=d('./WebGLManager'),i=function(e){return e&&e.__esModule?e:{default:e}}(o),a=function(a){function t(e){l(this,t);var r=n(this,a.call(this,e));return r.stencilMaskStack=null,r}return r(t,a),t.prototype.setMaskStack=function(r){this.stencilMaskStack=r;var t=this.renderer.gl;0===r.length?t.disable(t.STENCIL_TEST):t.enable(t.STENCIL_TEST)},t.prototype.pushStencil=function(n){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),this.renderer._activeRenderTarget.attachStencilBuffer();var t=this.renderer.gl,e=this.stencilMaskStack.length;0===e&&t.enable(t.STENCIL_TEST),this.stencilMaskStack.push(n),t.colorMask(!1,!1,!1,!1),t.stencilFunc(t.EQUAL,e,this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.INCR),this.renderer.plugins.graphics.render(n),this._useCurrent()},t.prototype.popStencil=function(){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);var r=this.renderer.gl,t=this.stencilMaskStack.pop();0===this.stencilMaskStack.length?(r.disable(r.STENCIL_TEST),r.clear(r.STENCIL_BUFFER_BIT),r.clearStencil(0)):(r.colorMask(!1,!1,!1,!1),r.stencilOp(r.KEEP,r.KEEP,r.DECR),this.renderer.plugins.graphics.render(t),this._useCurrent())},t.prototype._useCurrent=function(){var e=this.renderer.gl;e.colorMask(!0,!0,!0,!0),e.stencilFunc(e.EQUAL,this.stencilMaskStack.length,this._getBitwiseMask()),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)},t.prototype._getBitwiseMask=function(){return(1<<this.stencilMaskStack.length)-1},t.prototype.destroy=function(){i.default.prototype.destroy.call(this),this.stencilMaskStack.stencilStack=null},t}(i.default);e.default=a},{"./WebGLManager":93}],93:[function(a,t,e){function r(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}e.__esModule=!0;var n=function(){function n(t){r(this,n),this.renderer=t,this.renderer.on('context',this.onContextChange,this)}return n.prototype.onContextChange=function(){},n.prototype.destroy=function(){this.renderer.off('context',this.onContextChange,this),this.renderer=null},n}();e.default=n},{}],94:[function(d,t,e){function r(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}function n(r,n){if(!r)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==('undefined'==typeof n?'undefined':z(n))||'function'==typeof n)?n:r}function i(r,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+('undefined'==typeof n?'undefined':z(n)));r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(r,n):r.__proto__=n)}e.__esModule=!0;var o=d('../managers/WebGLManager'),s=function(e){return e&&e.__esModule?e:{default:e}}(o),a=function(a){function t(){return r(this,t),n(this,a.apply(this,arguments))}return i(t,a),t.prototype.start=function(){},t.prototype.stop=function(){this.flush()},t.prototype.flush=function(){},t.prototype.render=function(){},t}(s.default);e.default=a},{"../managers/WebGLManager":93}],95:[function(d,t,e){function r(e){return e&&e.__esModule?e:{default:e}}function l(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}e.__esModule=!0;var n=d('pixi-gl-core'),o=r(n),i=d('../../../utils/createIndicesForQuads'),a=r(i),s=function(){function i(t,e){l(this,i),this.gl=t,this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.interleaved=new Float32Array(16);for(var r=0;4>r;r++)this.interleaved[4*r]=this.vertices[2*r],this.interleaved[4*r+1]=this.vertices[2*r+1],this.interleaved[4*r+2]=this.uvs[2*r],this.interleaved[4*r+3]=this.uvs[2*r+1];this.indices=(0,a.default)(1),this.vertexBuffer=o.default.GLBuffer.createVertexBuffer(t,this.interleaved,t.STATIC_DRAW),this.indexBuffer=o.default.GLBuffer.createIndexBuffer(t,this.indices,t.STATIC_DRAW),this.vao=new o.default.VertexArrayObject(t,e)}return i.prototype.initVao=function(e){this.vao.clear().addIndex(this.indexBuffer).addAttribute(this.vertexBuffer,e.attributes.aVertexPosition,this.gl.FLOAT,!1,16,0).addAttribute(this.vertexBuffer,e.attributes.aTextureCoord,this.gl.FLOAT,!1,16,8)},i.prototype.map=function(a,t){var e=0,r=0;return this.uvs[0]=e,this.uvs[1]=r,this.uvs[2]=e+t.width/a.width,this.uvs[3]=r,this.uvs[4]=e+t.width/a.width,this.uvs[5]=r+t.height/a.height,this.uvs[6]=e,this.uvs[7]=r+t.height/a.height,e=t.x,r=t.y,this.vertices[0]=e,this.vertices[1]=r,this.vertices[2]=e+t.width,this.vertices[3]=r,this.vertices[4]=e+t.width,this.vertices[5]=r+t.height,this.vertices[6]=e,this.vertices[7]=r+t.height,this},i.prototype.upload=function(){for(var e=0;4>e;e++)this.interleaved[4*e]=this.vertices[2*e],this.interleaved[4*e+1]=this.vertices[2*e+1],this.interleaved[4*e+2]=this.uvs[2*e],this.interleaved[4*e+3]=this.uvs[2*e+1];return this.vertexBuffer.upload(this.interleaved),this},i.prototype.destroy=function(){var e=this.gl;e.deleteBuffer(this.vertexBuffer),e.deleteBuffer(this.indexBuffer)},i}();e.default=s},{"../../../utils/createIndicesForQuads":122,"pixi-gl-core":15}],96:[function(d,t,e){function p(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}e.__esModule=!0;var n=d('../../../math'),i=d('../../../const'),r=d('../../../settings'),o=function(e){return e&&e.__esModule?e:{default:e}}(r),a=d('pixi-gl-core'),s=function(){function d(t,e,r,s,u,l){p(this,d),this.gl=t,this.frameBuffer=null,this.texture=null,this.clearColor=[0,0,0,0],this.size=new n.Rectangle(0,0,1,1),this.resolution=u||o.default.RESOLUTION,this.projectionMatrix=new n.Matrix,this.transform=null,this.frame=null,this.defaultFrame=new n.Rectangle,this.destinationFrame=null,this.sourceFrame=null,this.stencilBuffer=null,this.stencilMaskStack=[],this.filterData=null,this.scaleMode=void 0===s?o.default.SCALE_MODE:s,this.root=l,this.root?(this.frameBuffer=new a.GLFramebuffer(t,100,100),this.frameBuffer.framebuffer=null):(this.frameBuffer=a.GLFramebuffer.createRGBA(t,100,100),this.scaleMode===i.SCALE_MODES.NEAREST?this.frameBuffer.texture.enableNearestScaling():this.frameBuffer.texture.enableLinearScaling(),this.texture=this.frameBuffer.texture),this.setFrame(),this.resize(e,r)}return d.prototype.clear=function(r){var t=r||this.clearColor;this.frameBuffer.clear(t[0],t[1],t[2],t[3])},d.prototype.attachStencilBuffer=function(){this.root||this.frameBuffer.enableStencil()},d.prototype.setFrame=function(r,t){this.destinationFrame=r||this.destinationFrame||this.defaultFrame,this.sourceFrame=t||this.sourceFrame||this.destinationFrame},d.prototype.activate=function(){var e=this.gl;this.frameBuffer.bind(),this.calculateProjection(this.destinationFrame,this.sourceFrame),this.transform&&this.projectionMatrix.append(this.transform),this.destinationFrame===this.sourceFrame?e.disable(e.SCISSOR_TEST):(e.enable(e.SCISSOR_TEST),e.scissor(0|this.destinationFrame.x,0|this.destinationFrame.y,0|this.destinationFrame.width*this.resolution,0|this.destinationFrame.height*this.resolution)),e.viewport(0|this.destinationFrame.x,0|this.destinationFrame.y,0|this.destinationFrame.width*this.resolution,0|this.destinationFrame.height*this.resolution)},d.prototype.calculateProjection=function(n,t){var e=this.projectionMatrix;t=t||n,e.identity(),this.root?(e.a=2*(1/n.width),e.d=2*(-1/n.height),e.tx=-1-t.x*e.a,e.ty=1-t.y*e.d):(e.a=2*(1/n.width),e.d=2*(1/n.height),e.tx=-1-t.x*e.a,e.ty=-1-t.y*e.d)},d.prototype.resize=function(n,t){if(n|=0,t|=0,this.size.width!==n||this.size.height!==t){this.size.width=n,this.size.height=t,this.defaultFrame.width=n,this.defaultFrame.height=t,this.frameBuffer.resize(n*this.resolution,t*this.resolution);var e=this.frame||this.size;this.calculateProjection(e)}},d.prototype.destroy=function(){this.frameBuffer.destroy(),this.frameBuffer=null,this.texture=null},d}();e.default=s},{"../../../const":46,"../../../math":70,"../../../settings":101,"pixi-gl-core":15}],97:[function(n,t,e){function r(n){for(var t='',e=0;e<n;++e)0<e&&(t+='\nelse '),e<n-1&&(t+='if(test == '+e+'.0){}');return t}e.__esModule=!0,e.default=function(a,t){var i=!t;if(i){var d=document.createElement('canvas');d.width=1,d.height=1,t=o.default.createContext(d)}for(var n=t.createShader(t.FRAGMENT_SHADER),l;;){if(l=s.replace(/%forloop%/gi,r(a)),t.shaderSource(n,l),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS))break;a=0|a/2}return i&&t.getExtension('WEBGL_lose_context')&&t.getExtension('WEBGL_lose_context').loseContext(),a};var i=n('pixi-gl-core'),o=function(e){return e&&e.__esModule?e:{default:e}}(i),s='precision mediump float;\nvoid main(void){\nfloat test = 0.1;\n%forloop%\ngl_FragColor = vec4(0.0);\n}'},{"pixi-gl-core":15}],98:[function(n,t,e){e.__esModule=!0,e.default=function(n){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];return t[r.BLEND_MODES.NORMAL]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.ADD]=[n.ONE,n.DST_ALPHA],t[r.BLEND_MODES.MULTIPLY]=[n.DST_COLOR,n.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.SCREEN]=[n.ONE,n.ONE_MINUS_SRC_COLOR],t[r.BLEND_MODES.OVERLAY]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.DARKEN]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.LIGHTEN]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.COLOR_DODGE]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.COLOR_BURN]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.HARD_LIGHT]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.SOFT_LIGHT]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.DIFFERENCE]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.EXCLUSION]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.HUE]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.SATURATION]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.COLOR]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.LUMINOSITY]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.NORMAL_NPM]=[n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.ADD_NPM]=[n.SRC_ALPHA,n.DST_ALPHA,n.ONE,n.DST_ALPHA],t[r.BLEND_MODES.SCREEN_NPM]=[n.SRC_ALPHA,n.ONE_MINUS_SRC_COLOR,n.ONE,n.ONE_MINUS_SRC_COLOR],t};var r=n('../../../const')},{"../../../const":46}],99:[function(n,t,e){e.__esModule=!0,e.default=function(n){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return t[r.DRAW_MODES.POINTS]=n.POINTS,t[r.DRAW_MODES.LINES]=n.LINES,t[r.DRAW_MODES.LINE_LOOP]=n.LINE_LOOP,t[r.DRAW_MODES.LINE_STRIP]=n.LINE_STRIP,t[r.DRAW_MODES.TRIANGLES]=n.TRIANGLES,t[r.DRAW_MODES.TRIANGLE_STRIP]=n.TRIANGLE_STRIP,t[r.DRAW_MODES.TRIANGLE_FAN]=n.TRIANGLE_FAN,t};var r=n('../../../const')},{"../../../const":46}],100:[function(n,t,e){e.__esModule=!0,e.default=function(e){e.getContextAttributes().stencil||console.warn('Provided WebGL context does not have a stencil buffer, masks may not render correctly')}},{}],101:[function(d,t,e){function r(e){return e&&e.__esModule?e:{default:e}}e.__esModule=!0;var n=d('./utils/maxRecommendedTextures'),i=r(n),o=d('./utils/canUploadSameBuffer'),s=r(o);e.default={TARGET_FPMS:.06,MIPMAP_TEXTURES:!0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(0,i.default)(32),SPRITE_BATCH_SIZE:4096,RETINA_PREFIX:/@([0-9\.]+)x/,RENDER_OPTIONS:{view:null,antialias:!1,forceFXAA:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,roundPixels:!1,width:800,height:600,legacy:!1},TRANSFORM_MODE:0,GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:0,SCALE_MODE:0,PRECISION_VERTEX:'highp',PRECISION_FRAGMENT:'mediump',CAN_UPLOAD_SAME_BUFFER:(0,s.default)()}},{"./utils/canUploadSameBuffer":121,"./utils/maxRecommendedTextures":126}],102:[function(g,t,e){function r(e){return e&&e.__esModule?e:{default:e}}function m(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}function i(r,n){if(!r)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==('undefined'==typeof n?'undefined':z(n))||'function'==typeof n)?n:r}function n(r,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+('undefined'==typeof n?'undefined':z(n)));r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(r,n):r.__proto__=n)}e.__esModule=!0;var o=function(){function a(a,o){for(var e=0,r;e<o.length;e++)r=o[e],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}return function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}}(),a=g('../math'),s=g('../utils'),u=g('../const'),l=g('../textures/Texture'),c=r(l),d=g('../display/Container'),h=r(d),p=new a.Point,f=function(d){function l(e){m(this,l);var t=i(this,d.call(this));return t._anchor=new a.ObservablePoint(t._onAnchorUpdate,t),t._texture=null,t._width=0,t._height=0,t._tint=null,t._tintRGB=null,t.tint=16777215,t.blendMode=u.BLEND_MODES.NORMAL,t.shader=null,t.cachedTint=16777215,t.texture=e||c.default.EMPTY,t.vertexData=new Float32Array(8),t.vertexTrimmedData=null,t._transformID=-1,t._textureID=-1,t._transformTrimmedID=-1,t._textureTrimmedID=-1,t.pluginName='sprite',t}return n(l,d),l.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._width&&(this.scale.x=(0,s.sign)(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=(0,s.sign)(this.scale.y)*this._height/this._texture.orig.height)},l.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},l.prototype.calculateVertices=function(){if(this._transformID!==this.transform._worldID||this._textureID!==this._texture._updateID){this._transformID=this.transform._worldID,this._textureID=this._texture._updateID;var g=this._texture,t=this.transform.worldTransform,e=t.a,r=t.b,n=t.c,i=t.d,o=t.tx,s=t.ty,a=this.vertexData,u=g.trim,h=g.orig,l=this._anchor,c=0,d=0,f=0,p=0;u?(d=u.x-l._x*h.width,c=d+u.width,p=u.y-l._y*h.height,f=p+u.height):(d=-l._x*h.width,c=d+h.width,p=-l._y*h.height,f=p+h.height),a[0]=e*d+n*p+o,a[1]=i*p+r*d+s,a[2]=e*c+n*p+o,a[3]=i*p+r*c+s,a[4]=e*c+n*f+o,a[5]=i*f+r*c+s,a[6]=e*d+n*f+o,a[7]=i*f+r*d+s}},l.prototype.calculateTrimmedVertices=function(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var g=this._texture,t=this.vertexTrimmedData,e=g.orig,r=this._anchor,n=this.transform.worldTransform,i=n.a,o=n.b,s=n.c,a=n.d,u=n.tx,h=n.ty,l=-r._x*e.width,c=l+e.width,d=-r._y*e.height,f=d+e.height;t[0]=i*l+s*d+u,t[1]=a*d+o*l+h,t[2]=i*c+s*d+u,t[3]=a*d+o*c+h,t[4]=i*c+s*f+u,t[5]=a*f+o*c+h,t[6]=i*l+s*f+u,t[7]=a*f+o*l+h},l.prototype._renderWebGL=function(e){this.calculateVertices(),e.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)},l.prototype._renderCanvas=function(e){e.plugins[this.pluginName].render(this)},l.prototype._calculateBounds=function(){var r=this._texture.trim,t=this._texture.orig;r&&(r.width!==t.width||r.height!==t.height)?(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData)):(this.calculateVertices(),this._bounds.addQuad(this.vertexData))},l.prototype.getLocalBounds=function(t){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new a.Rectangle),t=this._localBoundsRect),this._bounds.getRectangle(t)):d.prototype.getLocalBounds.call(this,t)},l.prototype.containsPoint=function(a){this.worldTransform.applyInverse(a,p);var t=this._texture.orig.width,o=this._texture.orig.height,s=-t*this.anchor.x,n=0;return p.x>=s&&p.x<s+t&&(n=-o*this.anchor.y,p.y>=n&&p.y<n+o)},l.prototype.destroy=function(t){if(d.prototype.destroy.call(this,t),this._anchor=null,'boolean'==typeof t?t:t&&t.texture){var n='boolean'==typeof t?t:t&&t.baseTexture;this._texture.destroy(!!n)}this._texture=null,this.shader=null},l.from=function(e){return new l(c.default.from(e))},l.fromFrame=function(e){var t=s.TextureCache[e];if(!t)throw new Error('The frameId "'+e+'" does not exist in the texture cache');return new l(t)},l.fromImage=function(e,t,r){return new l(c.default.fromImage(e,t,r))},o(l,[{key:'width',get:function(){return W(this.scale.x)*this._texture.orig.width},set:function(r){var t=(0,s.sign)(this.scale.x)||1;this.scale.x=t*r/this._texture.orig.width,this._width=r}},{key:'height',get:function(){return W(this.scale.y)*this._texture.orig.height},set:function(r){var t=(0,s.sign)(this.scale.y)||1;this.scale.y=t*r/this._texture.orig.height,this._height=r}},{key:'anchor',get:function(){return this._anchor},set:function(e){this._anchor.copy(e)}},{key:'tint',get:function(){return this._tint},set:function(e){this._tint=e,this._tintRGB=(e>>16)+(65280&e)+((255&e)<<16)}},{key:'texture',get:function(){return this._texture},set:function(e){this._texture!==e&&(this._texture=e,this.cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.hasLoaded?this._onTextureUpdate():e.once('update',this._onTextureUpdate,this)))}}]),l}(h.default);e.default=f},{"../const":46,"../display/Container":48,"../math":70,"../textures/Texture":115,"../utils":124}],103:[function(p,t,e){function r(e){return e&&e.__esModule?e:{default:e}}function n(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}e.__esModule=!0;var i=p('../../renderers/canvas/CanvasRenderer'),o=r(i),g=p('../../const'),a=p('../../math'),s=p('./CanvasTinter'),u=r(s),l=new a.Matrix,c=function(){function r(t){n(this,r),this.renderer=t}return r.prototype.render=function(p){var t=p._texture,e=this.renderer,r=t._frame.width,n=t._frame.height,i=p.transform.worldTransform,o=0,s=0;if(!(0>=t.orig.width||0>=t.orig.height)&&t.baseTexture.source&&(e.setBlendMode(p.blendMode),t.valid)){e.context.globalAlpha=p.worldAlpha;var c=t.baseTexture.scaleMode===g.SCALE_MODES.LINEAR;e.smoothProperty&&e.context[e.smoothProperty]!==c&&(e.context[e.smoothProperty]=c),t.trim?(o=t.trim.width/2+t.trim.x-p.anchor.x*t.orig.width,s=t.trim.height/2+t.trim.y-p.anchor.y*t.orig.height):(o=(.5-p.anchor.x)*t.orig.width,s=(.5-p.anchor.y)*t.orig.height),t.rotate&&(i.copy(l),i=l,a.GroupD8.matrixAppendRotationInv(i,t.rotate,o,s),o=0,s=0),o-=r/2,s-=n/2,e.roundPixels?(e.context.setTransform(i.a,i.b,i.c,i.d,0|i.tx*e.resolution,0|i.ty*e.resolution),o|=0,s|=0):e.context.setTransform(i.a,i.b,i.c,i.d,i.tx*e.resolution,i.ty*e.resolution);var d=t.baseTexture.resolution;16777215===p.tint?e.context.drawImage(t.baseTexture.source,t._frame.x*d,t._frame.y*d,r*d,n*d,o*e.resolution,s*e.resolution,r*e.resolution,n*e.resolution):(p.cachedTint===p.tint&&p.tintedTexture.tintId===p._texture._updateID||(p.cachedTint=p.tint,p.tintedTexture=u.default.getTintedTexture(p,p.tint)),e.context.drawImage(p.tintedTexture,0,0,r*d,n*d,o*e.resolution,s*e.resolution,r*e.resolution,n*e.resolution))}},r.prototype.destroy=function(){this.renderer=null},r}();e.default=c,o.default.registerPlugin('sprite',c)},{"../../const":46,"../../math":70,"../../renderers/canvas/CanvasRenderer":77,"./CanvasTinter":104}],104:[function(a,t,e){e.__esModule=!0;var p=a('../../utils'),r=a('../../renderers/canvas/utils/canUseNewCanvasBlendModes'),n=function(e){return e&&e.__esModule?e:{default:e}}(r),d={getTintedTexture:function(s,t){var e=s._texture;t=d.roundColor(t);var r='#'+('00000'+(0|t).toString(16)).substr(-6);e.tintCache=e.tintCache||{};var n=e.tintCache[r],i;if(n){if(n.tintId===e._updateID)return e.tintCache[r];i=e.tintCache[r]}else i=d.canvas||document.createElement('canvas');if(d.tintMethod(e,t,i),i.tintId=e._updateID,d.convertTintToImage){var o=new Image;o.src=i.toDataURL(),e.tintCache[r]=o}else e.tintCache[r]=i,d.canvas=null;return i},tintWithMultiply:function(a,t,e){var r=e.getContext('2d'),n=a._frame.clone(),i=a.baseTexture.resolution;n.x*=i,n.y*=i,n.width*=i,n.height*=i,e.width=S(n.width),e.height=S(n.height),r.save(),r.fillStyle='#'+('00000'+(0|t).toString(16)).substr(-6),r.fillRect(0,0,n.width,n.height),r.globalCompositeOperation='multiply',r.drawImage(a.baseTexture.source,n.x,n.y,n.width,n.height,0,0,n.width,n.height),r.globalCompositeOperation='destination-atop',r.drawImage(a.baseTexture.source,n.x,n.y,n.width,n.height,0,0,n.width,n.height),r.restore()},tintWithOverlay:function(a,t,e){var r=e.getContext('2d'),n=a._frame.clone(),i=a.baseTexture.resolution;n.x*=i,n.y*=i,n.width*=i,n.height*=i,e.width=S(n.width),e.height=S(n.height),r.save(),r.globalCompositeOperation='copy',r.fillStyle='#'+('00000'+(0|t).toString(16)).substr(-6),r.fillRect(0,0,n.width,n.height),r.globalCompositeOperation='destination-atop',r.drawImage(a.baseTexture.source,n.x,n.y,n.width,n.height,0,0,n.width,n.height),r.restore()},tintWithPerPixel:function(n,t,e){var r=e.getContext('2d'),i=n._frame.clone(),o=n.baseTexture.resolution;i.x*=o,i.y*=o,i.width*=o,i.height*=o,e.width=S(i.width),e.height=S(i.height),r.save(),r.globalCompositeOperation='copy',r.drawImage(n.baseTexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height),r.restore();for(var s=(0,p.hex2rgb)(t),a=s[0],u=s[1],h=s[2],l=r.getImageData(0,0,i.width,i.height),c=l.data,d=0;d<c.length;d+=4)c[d+0]*=a,c[d+1]*=u,c[d+2]*=h;r.putImageData(l,0,0)},roundColor:function(n){var t=d.cacheStepsPerColorChannel,e=(0,p.hex2rgb)(n);return e[0]=B(255,e[0]/t*t),e[1]=B(255,e[1]/t*t),e[2]=B(255,e[2]/t*t),(0,p.rgb2hex)(e)},cacheStepsPerColorChannel:8,convertTintToImage:!1,canUseMultiply:(0,n.default)(),tintMethod:0};d.tintMethod=d.canUseMultiply?d.tintWithMultiply:d.tintWithPerPixel,e.default=d},{"../../renderers/canvas/utils/canUseNewCanvasBlendModes":80,"../../utils":124}],105:[function(a,t,e){function r(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}e.__esModule=!0;var n=function(){function n(t){r(this,n),this.vertices=new ArrayBuffer(t),this.float32View=new Float32Array(this.vertices),this.uint32View=new Uint32Array(this.vertices)}return n.prototype.destroy=function(){this.vertices=null,this.positions=null,this.uvs=null,this.colors=null},n}();e.default=n},{}],106:[function(C,t,e){function r(e){return e&&e.__esModule?e:{default:e}}function R(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}function i(r,n){if(!r)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==('undefined'==typeof n?'undefined':z(n))||'function'==typeof n)?n:r}function n(r,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+('undefined'==typeof n?'undefined':z(n)));r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(r,n):r.__proto__=n)}e.__esModule=!0;var o=C('../../renderers/webgl/utils/ObjectRenderer'),a=r(o),s=C('../../renderers/webgl/WebGLRenderer'),u=r(s),l=C('../../utils/createIndicesForQuads'),c=r(l),d=C('./generateMultiTextureShader'),h=r(d),p=C('../../renderers/webgl/utils/checkMaxIfStatmentsInShader'),f=r(p),y=C('./BatchBuffer'),g=r(y),m=C('../../settings'),G=r(m),b=C('../../utils'),_=C('pixi-gl-core'),x=r(_),T=C('bit-twiddle'),w=r(T),S=0,v=0,E=function(o){function t(e){R(this,t);var r=i(this,o.call(this,e));r.vertSize=5,r.vertByteSize=4*r.vertSize,r.size=G.default.SPRITE_BATCH_SIZE,r.buffers=[];for(var n=1;n<=w.default.nextPow2(r.size);n*=2)r.buffers.push(new g.default(4*n*r.vertByteSize));r.indices=(0,c.default)(r.size),r.shader=null,r.currentIndex=0,r.groups=[];for(var s=0;s<r.size;s++)r.groups[s]={textures:[],textureCount:0,ids:[],size:0,start:0,blend:0};return r.sprites=[],r.vertexBuffers=[],r.vaos=[],r.vaoMax=2,r.vertexCount=0,r.renderer.on('prerender',r.onPrerender,r),r}return n(t,o),t.prototype.onContextChange=function(){var a=this.renderer.gl;this.renderer.legacy?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=B(a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS),G.default.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=(0,f.default)(this.MAX_TEXTURES,a)),this.shader=(0,h.default)(a,this.MAX_TEXTURES),this.indexBuffer=x.default.GLBuffer.createIndexBuffer(a,this.indices,a.STATIC_DRAW),this.renderer.bindVao(null);for(var t=this.shader.attributes,e=0;e<this.vaoMax;e++){var r=this.vertexBuffers[e]=x.default.GLBuffer.createVertexBuffer(a,null,a.STREAM_DRAW),n=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(r,t.aVertexPosition,a.FLOAT,!1,this.vertByteSize,0).addAttribute(r,t.aTextureCoord,a.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(r,t.aColor,a.UNSIGNED_BYTE,!0,this.vertByteSize,12);t.aTextureId&&n.addAttribute(r,t.aTextureId,a.FLOAT,!1,this.vertByteSize,16),this.vaos[e]=n}this.vao=this.vaos[0],this.currentBlendMode=99999,this.boundTextures=Array(this.MAX_TEXTURES)},t.prototype.onPrerender=function(){this.vertexCount=0},t.prototype.render=function(e){this.currentIndex>=this.size&&this.flush(),e._texture._uvs&&(this.sprites[this.currentIndex++]=e)},t.prototype.flush=function(){if(0!==this.currentIndex){var P=this.renderer.gl,t=this.MAX_TEXTURES,e=w.default.nextPow2(this.currentIndex),r=w.default.log2(e),n=this.buffers[r],i=this.sprites,o=this.groups,s=n.float32View,a=n.uint32View,u=this.boundTextures,h=this.renderer.boundTextures,l=this.renderer.textureGC.count,c=0,d=1,O=0,y=o[0],g=b.premultiplyBlendMode[i[0]._texture.baseTexture.premultipliedAlpha?1:0][i[0].blendMode],T,f,p,m;y.textureCount=0,y.start=0,y.blend=g,S++;var _;for(_=0;_<t;++_)u[_]=h[_],u[_]._virtalBoundId=_;for(_=0;_<this.currentIndex;++_){var E=i[_];T=E._texture.baseTexture;var M=b.premultiplyBlendMode[+T.premultipliedAlpha][E.blendMode];if(g!==M&&(g=M,f=null,O=t,S++),f!==T&&(f=T,T._enabled!==S)){if(O===t&&(S++,y.size=_-y.start,O=0,y=o[d++],y.blend=g,y.textureCount=0,y.start=_),T.touched=l,-1===T._virtalBoundId)for(var C=0;C<t;++C){var R=(C+v)%t,A=u[R];if(A._enabled!==S){v++,A._virtalBoundId=-1,T._virtalBoundId=R,u[R]=T;break}}T._enabled=S,y.textureCount++,y.ids[O]=T._virtalBoundId,y.textures[O++]=T}if(p=E.vertexData,m=E._texture._uvs.uvsUint32,this.renderer.roundPixels){var I=this.renderer.resolution;s[c]=(0|p[0]*I)/I,s[c+1]=(0|p[1]*I)/I,s[c+5]=(0|p[2]*I)/I,s[c+6]=(0|p[3]*I)/I,s[c+10]=(0|p[4]*I)/I,s[c+11]=(0|p[5]*I)/I,s[c+15]=(0|p[6]*I)/I,s[c+16]=(0|p[7]*I)/I}else s[c]=p[0],s[c+1]=p[1],s[c+5]=p[2],s[c+6]=p[3],s[c+10]=p[4],s[c+11]=p[5],s[c+15]=p[6],s[c+16]=p[7];a[c+2]=m[0],a[c+7]=m[1],a[c+12]=m[2],a[c+17]=m[3];var D=B(E.worldAlpha,1),L=1>D&&T.premultipliedAlpha?(0,b.premultiplyTint)(E._tintRGB,D):E._tintRGB+(255*D<<24);a[c+3]=a[c+8]=a[c+13]=a[c+18]=L,s[c+4]=s[c+9]=s[c+14]=s[c+19]=T._virtalBoundId,c+=20}if(y.size=_-y.start,G.default.CAN_UPLOAD_SAME_BUFFER)this.vertexBuffers[this.vertexCount].upload(n.vertices,0,!0);else{if(this.vaoMax<=this.vertexCount){this.vaoMax++;var N=this.shader.attributes,F=this.vertexBuffers[this.vertexCount]=x.default.GLBuffer.createVertexBuffer(P,null,P.STREAM_DRAW),W=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(F,N.aVertexPosition,P.FLOAT,!1,this.vertByteSize,0).addAttribute(F,N.aTextureCoord,P.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(F,N.aColor,P.UNSIGNED_BYTE,!0,this.vertByteSize,12);N.aTextureId&&W.addAttribute(F,N.aTextureId,P.FLOAT,!1,this.vertByteSize,16),this.vaos[this.vertexCount]=W}this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].upload(n.vertices,0,!1),this.vertexCount++}for(_=0;_<t;++_)h[_]._virtalBoundId=-1;for(_=0;_<d;++_){for(var k=o[_],H=k.textureCount,U=0;U<H;U++)f=k.textures[U],h[k.ids[U]]!==f&&this.renderer.bindTexture(f,k.ids[U],!0),f._virtalBoundId=-1;this.renderer.state.setBlendMode(k.blend),P.drawElements(P.TRIANGLES,6*k.size,P.UNSIGNED_SHORT,2*(6*k.start))}this.currentIndex=0}},t.prototype.start=function(){this.renderer.bindShader(this.shader),G.default.CAN_UPLOAD_SAME_BUFFER&&(this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].bind())},t.prototype.stop=function(){this.flush()},t.prototype.destroy=function(){for(var t=0;t<this.vaoMax;t++)this.vertexBuffers[t]&&this.vertexBuffers[t].destroy(),this.vaos[t]&&this.vaos[t].destroy();this.indexBuffer&&this.indexBuffer.destroy(),this.renderer.off('prerender',this.onPrerender,this),o.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.vertexBuffers=null,this.vaos=null,this.indexBuffer=null,this.indices=null,this.sprites=null;for(var e=0;e<this.buffers.length;++e)this.buffers[e].destroy()},t}(a.default);e.default=E,u.default.registerPlugin('sprite',E)},{"../../renderers/webgl/WebGLRenderer":84,"../../renderers/webgl/utils/ObjectRenderer":94,"../../renderers/webgl/utils/checkMaxIfStatmentsInShader":97,"../../settings":101,"../../utils":124,"../../utils/createIndicesForQuads":122,"./BatchBuffer":105,"./generateMultiTextureShader":107,"bit-twiddle":1,"pixi-gl-core":15}],107:[function(n,t,e){function d(n){var t='';t+='\n',t+='\n';for(var e=0;e<n;e++)0<e&&(t+='\nelse '),e<n-1&&(t+='if(textureId == '+e+'.0)'),t+='\n{',t+='\n\tcolor = texture2D(uSamplers['+e+'], vTextureCoord);',t+='\n}';return t+='\n',t+='\n'}e.__esModule=!0,e.default=function(a,t){var e=s;e=e.replace(/%count%/gi,t),e=e.replace(/%forloop%/gi,d(t));for(var r=new i.default(a,'precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor;\n}\n',e),n=[],o=0;o<t;o++)n[o]=o;return r.bind(),r.uniforms.uSamplers=n,r};var r=n('../../Shader'),i=function(e){return e&&e.__esModule?e:{default:e}}(r),s=(n('path'),'varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\nvoid main(void){\nvec4 color;\nfloat textureId = floor(vTextureId+0.5);\n%forloop%\ngl_FragColor = color * vColor;\n}')},{"../../Shader":44,path:8}],108:[function(P,t,e){function r(e){return e&&e.__esModule?e:{default:e}}function C(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}function i(r,n){if(!r)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==('undefined'==typeof n?'undefined':z(n))||'function'==typeof n)?n:r}function n(r,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+('undefined'==typeof n?'undefined':z(n)));r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(r,n):r.__proto__=n)}e.__esModule=!0;var o=function(){function a(a,o){for(var e=0,r;e<o.length;e++)r=o[e],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}return function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}}(),a=P('../sprites/Sprite'),s=r(a),u=P('../textures/Texture'),l=r(u),c=P('../math'),d=P('../utils'),M=P('../const'),p=P('../settings'),h=r(p),f=P('./TextStyle'),g=r(f),m=P('./TextMetrics'),_=r(m),y=P('../utils/trimCanvas'),x=r(y),b={texture:!0,children:!1,baseTexture:!0},v=function(p){function t(e,r,n){C(this,t),n=n||document.createElement('canvas'),n.width=3,n.height=3;var o=l.default.fromCanvas(n,h.default.SCALE_MODE,'text');o.orig=new c.Rectangle,o.trim=new c.Rectangle;var a=i(this,p.call(this,o));return l.default.addToCache(a._texture,a._texture.baseTexture.textureCacheIds[0]),a.canvas=n,a.context=a.canvas.getContext('2d'),a.resolution=h.default.RESOLUTION,a._text=null,a._style=null,a._styleListener=null,a._font='',a.text=e,a.style=r,a.localStyleID=-1,a}return n(t,p),t.prototype.updateText=function(g){var m=this._style;if(this.localStyleID!==m.styleID&&(this.dirty=!0,this.localStyleID=m.styleID),this.dirty||!g){this._font=this._style.toFontString();var e=this.context,r=_.default.measureText(this._text,this._style,this._style.wordWrap,this.canvas),n=r.width,i=r.height,o=r.lines,s=r.lineHeight,a=r.lineWidths,u=r.maxLineWidth,h=r.fontProperties;this.canvas.width=S((n+2*m.padding)*this.resolution),this.canvas.height=S((i+2*m.padding)*this.resolution),e.scale(this.resolution,this.resolution),e.clearRect(0,0,this.canvas.width,this.canvas.height),e.font=this._font,e.strokeStyle=m.stroke,e.lineWidth=m.strokeThickness,e.textBaseline=m.textBaseline,e.lineJoin=m.lineJoin,e.miterLimit=m.miterLimit;var l,c;if(m.dropShadow){e.fillStyle=m.dropShadowColor,e.globalAlpha=m.dropShadowAlpha,e.shadowBlur=m.dropShadowBlur,0<m.dropShadowBlur&&(e.shadowColor=m.dropShadowColor);for(var d=E(m.dropShadowAngle)*m.dropShadowDistance,f=T(m.dropShadowAngle)*m.dropShadowDistance,p=0;p<o.length;p++)l=m.strokeThickness/2,c=m.strokeThickness/2+p*s+h.ascent,'right'===m.align?l+=u-a[p]:'center'===m.align&&(l+=(u-a[p])/2),m.fill&&(this.drawLetterSpacing(o[p],l+d+m.padding,c+f+m.padding),m.stroke&&m.strokeThickness&&(e.strokeStyle=m.dropShadowColor,this.drawLetterSpacing(o[p],l+d+m.padding,c+f+m.padding,!0),e.strokeStyle=m.stroke))}e.shadowBlur=0,e.globalAlpha=1,e.fillStyle=this._generateFillStyle(m,o);for(var x=0;x<o.length;x++)l=m.strokeThickness/2,c=m.strokeThickness/2+x*s+h.ascent,'right'===m.align?l+=u-a[x]:'center'===m.align&&(l+=(u-a[x])/2),m.stroke&&m.strokeThickness&&this.drawLetterSpacing(o[x],l+m.padding,c+m.padding,!0),m.fill&&this.drawLetterSpacing(o[x],l+m.padding,c+m.padding);this.updateTexture()}},t.prototype.drawLetterSpacing=function(d,t,e){var r=3<arguments.length&&void 0!==arguments[3]&&arguments[3],n=this._style,i=n.letterSpacing;if(0===i)return void(r?this.context.strokeText(d,t,e):this.context.fillText(d,t,e));for(var o=String.prototype.split.call(d,''),s=t,a=0,l='';a<d.length;)l=o[a++],r?this.context.strokeText(l,s,e):this.context.fillText(l,s,e),s+=this.context.measureText(l).width+i},t.prototype.updateTexture=function(){var a=this.canvas;if(this._style.trim){var t=(0,x.default)(a);a.width=t.width,a.height=t.height,this.context.putImageData(t.data,0,0)}var e=this._texture,r=this._style,n=r.trim?0:r.padding,s=e.baseTexture;s.hasLoaded=!0,s.resolution=this.resolution,s.realWidth=a.width,s.realHeight=a.height,s.width=a.width/this.resolution,s.height=a.height/this.resolution,e.trim.width=e._frame.width=a.width/this.resolution,e.trim.height=e._frame.height=a.height/this.resolution,e.trim.x=-n,e.trim.y=-n,e.orig.width=e._frame.width-2*n,e.orig.height=e._frame.height-2*n,this._onTextureUpdate(),s.emit('update',s),this.dirty=!1},t.prototype.renderWebGL=function(t){this.resolution!==t.resolution&&(this.resolution=t.resolution,this.dirty=!0),this.updateText(!0),p.prototype.renderWebGL.call(this,t)},t.prototype._renderCanvas=function(t){this.resolution!==t.resolution&&(this.resolution=t.resolution,this.dirty=!0),this.updateText(!0),p.prototype._renderCanvas.call(this,t)},t.prototype.getLocalBounds=function(t){return this.updateText(!0),p.prototype.getLocalBounds.call(this,t)},t.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},t.prototype._onStyleChange=function(){this.dirty=!0},t.prototype._generateFillStyle=function(p,t){if(!Array.isArray(p.fill))return p.fill;if(navigator.isCocoonJS)return p.fill[0];var e=this.canvas.width/this.resolution,s=this.canvas.height/this.resolution,a=p.fill.slice(),u=p.fillGradientStops.slice(),h,r,n,i;if(!u.length)for(var o=a.length+1,l=1;l<o;++l)u.push(l/o);if(a.unshift(p.fill[0]),u.unshift(0),a.push(p.fill[p.fill.length-1]),u.push(1),p.fillGradientType===M.TEXT_GRADIENT.LINEAR_VERTICAL){h=this.context.createLinearGradient(e/2,0,e/2,s),r=(a.length+1)*t.length,n=0;for(var c=0;c<t.length;c++){n+=1;for(var d=0;d<a.length;d++)i='number'==typeof u[d]?u[d]/t.length+c/t.length:n/r,h.addColorStop(i,a[d]),n++}}else{h=this.context.createLinearGradient(0,s/2,e,s/2),r=a.length+1,n=1;for(var f=0;f<a.length;f++)i='number'==typeof u[f]?u[f]:n/r,h.addColorStop(i,a[f]),n++}return h},t.prototype.destroy=function(t){'boolean'==typeof t&&(t={children:t}),t=Object.assign({},b,t),p.prototype.destroy.call(this,t),this.context=null,this.canvas=null,this._style=null},o(t,[{key:'width',get:function(){return this.updateText(!0),W(this.scale.x)*this._texture.orig.width},set:function(r){this.updateText(!0);var t=(0,d.sign)(this.scale.x)||1;this.scale.x=t*r/this._texture.orig.width,this._width=r}},{key:'height',get:function(){return this.updateText(!0),W(this.scale.y)*this._texture.orig.height},set:function(r){this.updateText(!0);var t=(0,d.sign)(this.scale.y)||1;this.scale.y=t*r/this._texture.orig.height,this._height=r}},{key:'style',get:function(){return this._style},set:function(e){e=e||{},this._style=e instanceof g.default?e:new g.default(e),this.localStyleID=-1,this.dirty=!0}},{key:'text',get:function(){return this._text},set:function(e){e=(''===e||null===e||void 0===e?' ':e)+'',this._text!==e&&(this._text=e,this.dirty=!0)}}]),t}(s.default);e.default=v},{"../const":46,"../math":70,"../settings":101,"../sprites/Sprite":102,"../textures/Texture":115,"../utils":124,"../utils/trimCanvas":129,"./TextMetrics":109,"./TextStyle":110}],109:[function(a,t,e){function d(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}e.__esModule=!0;var r=function(){function _(t,e,r,n,o,i,a,s,u){d(this,_),this.text=t,this.style=e,this.width=r,this.height=n,this.lines=o,this.lineWidths=i,this.lineHeight=a,this.maxLineWidth=s,this.fontProperties=u}return _.measureText=function(t,e,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:_._canvas;r=r||e.wordWrap;var i=e.toFontString(),o=_.measureFont(i),s=n.getContext('2d');s.font=i;for(var a=r?_.wordWrap(t,e,n):t,u=a.split(/(?:\r\n|\r|\n)/),h=Array(u.length),l=0,c=0,d;c<u.length;c++)d=s.measureText(u[c]).width+(u[c].length-1)*e.letterSpacing,h[c]=d,l=P(l,d);var f=l+e.strokeThickness;e.dropShadow&&(f+=e.dropShadowDistance);var p=e.lineHeight||o.fontSize+e.strokeThickness,g=P(p,o.fontSize+e.strokeThickness)+(u.length-1)*(p+e.leading);return e.dropShadow&&(g+=e.dropShadowDistance),new _(t,e,f,g,u,h,p+e.leading,l,o)},_.wordWrap=function(t,e){for(var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:_._canvas,n=r.getContext('2d'),i='',o=t.split('\n'),s=e.wordWrapWidth,a={},u=0;u<o.length;u++){for(var h=s,l=o[u].split(' '),c=0,d;c<l.length;c++)if(d=n.measureText(l[c]).width,e.breakWords&&d>s)for(var f=l[c].split(''),p=0;p<f.length;p++){var x=f[p],y=a[x];void 0===y&&(y=n.measureText(x).width,a[x]=y),y>h?(i+='\n'+x,h=s-y):(0===p&&(i+=' '),i+=x,h-=y)}else{var g=d+n.measureText(' ').width;0===c||g>h?(0<c&&(i+='\n'),i+=l[c],h=s-d):(h-=g,i+=' '+l[c])}u<o.length-1&&(i+='\n')}return i},_.measureFont=function(t){if(_._fonts[t])return _._fonts[t];var e={},r=_._canvas,n=_._context;n.font=t;var i=S(n.measureText('|M\xC9q').width),o=S(n.measureText('M').width),s=2*o;o=0|1.4*o,r.width=i,r.height=s,n.fillStyle='#f00',n.fillRect(0,0,i,s),n.font=t,n.textBaseline='alphabetic',n.fillStyle='#000',n.fillText('|M\xC9q',0,o);var a=n.getImageData(0,0,i,s).data,u=a.length,h=4*i,l=0,c=0,d=!1;for(l=0;l<o;++l){for(var f=0;f<h;f+=4)if(255!==a[c+f]){d=!0;break}if(d)break;c+=h}for(e.ascent=o-l,c=u-h,d=!1,l=s;l>o;--l){for(var p=0;p<h;p+=4)if(255!==a[c+p]){d=!0;break}if(d)break;c-=h}return e.descent=l-o,e.fontSize=e.ascent+e.descent,_._fonts[t]=e,e},_}();e.default=r;var n=document.createElement('canvas');n.width=n.height=10,r._canvas=n,r._context=n.getContext('2d'),r._fonts={}},{}],110:[function(d,t,e){function r(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}function n(e){return'number'==typeof e?(0,u.hex2string)(e):('string'==typeof e&&0===e.indexOf('0x')&&(e=e.replace('0x','#')),e)}function i(r){if(Array.isArray(r)){for(var t=0;t<r.length;++t)r[t]=n(r[t]);return r}return n(r)}function o(n,t){if(!Array.isArray(n)||!Array.isArray(t))return!1;if(n.length!==t.length)return!1;for(var e=0;e<n.length;++e)if(n[e]!==t[e])return!1;return!0}e.__esModule=!0;var s=function(){function a(a,o){for(var e=0,r;e<o.length;e++)r=o[e],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}return function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}}(),a=d('../const'),u=d('../utils'),p={align:'left',breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:C/6,dropShadowBlur:0,dropShadowColor:'black',dropShadowDistance:5,fill:'black',fillGradientType:a.TEXT_GRADIENT.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:'Arial',fontSize:26,fontStyle:'normal',fontVariant:'normal',fontWeight:'normal',letterSpacing:0,lineHeight:0,lineJoin:'miter',miterLimit:10,padding:0,stroke:'black',strokeThickness:0,textBaseline:'alphabetic',trim:!1,wordWrap:!1,wordWrapWidth:100,leading:0},l=function(){function n(t){r(this,n),this.styleID=0,Object.assign(this,p,t)}return n.prototype.clone=function(){var t={};for(var e in p)t[e]=this[e];return new n(t)},n.prototype.reset=function(){Object.assign(this,p)},n.prototype.toFontString=function(){var a='number'==typeof this.fontSize?this.fontSize+'px':this.fontSize,t=this.fontFamily;Array.isArray(this.fontFamily)||(t=this.fontFamily.split(','));for(var e=t.length-1,r;0<=e;e--)r=t[e].trim(),/([\"\'])[^\'\"]+\1/.test(r)||(r='"'+r+'"'),t[e]=r;return this.fontStyle+' '+this.fontVariant+' '+this.fontWeight+' '+a+' '+t.join(',')},s(n,[{key:'align',get:function(){return this._align},set:function(e){this._align!==e&&(this._align=e,this.styleID++)}},{key:'breakWords',get:function(){return this._breakWords},set:function(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)}},{key:'dropShadow',get:function(){return this._dropShadow},set:function(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)}},{key:'dropShadowAlpha',get:function(){return this._dropShadowAlpha},set:function(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)}},{key:'dropShadowAngle',get:function(){return this._dropShadowAngle},set:function(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)}},{key:'dropShadowBlur',get:function(){return this._dropShadowBlur},set:function(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)}},{key:'dropShadowColor',get:function(){return this._dropShadowColor},set:function(r){var t=i(r);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)}},{key:'dropShadowDistance',get:function(){return this._dropShadowDistance},set:function(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)}},{key:'fill',get:function(){return this._fill},set:function(r){var t=i(r);this._fill!==t&&(this._fill=t,this.styleID++)}},{key:'fillGradientType',get:function(){return this._fillGradientType},set:function(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)}},{key:'fillGradientStops',get:function(){return this._fillGradientStops},set:function(e){o(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)}},{key:'fontFamily',get:function(){return this._fontFamily},set:function(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)}},{key:'fontSize',get:function(){return this._fontSize},set:function(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)}},{key:'fontStyle',get:function(){return this._fontStyle},set:function(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)}},{key:'fontVariant',get:function(){return this._fontVariant},set:function(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)}},{key:'fontWeight',get:function(){return this._fontWeight},set:function(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)}},{key:'letterSpacing',get:function(){return this._letterSpacing},set:function(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)}},{key:'lineHeight',get:function(){return this._lineHeight},set:function(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)}},{key:'leading',get:function(){return this._leading},set:function(e){this._leading!==e&&(this._leading=e,this.styleID++)}},{key:'lineJoin',get:function(){return this._lineJoin},set:function(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)}},{key:'miterLimit',get:function(){return this._miterLimit},set:function(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)}},{key:'padding',get:function(){return this._padding},set:function(e){this._padding!==e&&(this._padding=e,this.styleID++)}},{key:'stroke',get:function(){return this._stroke},set:function(r){var t=i(r);this._stroke!==t&&(this._stroke=t,this.styleID++)}},{key:'strokeThickness',get:function(){return this._strokeThickness},set:function(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)}},{key:'textBaseline',get:function(){return this._textBaseline},set:function(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)}},{key:'trim',get:function(){return this._trim},set:function(e){this._trim!==e&&(this._trim=e,this.styleID++)}},{key:'wordWrap',get:function(){return this._wordWrap},set:function(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)}},{key:'wordWrapWidth',get:function(){return this._wordWrapWidth},set:function(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)}}]),n}();e.default=l},{"../const":46,"../utils":124}],111:[function(d,t,e){function r(e){return e&&e.__esModule?e:{default:e}}function p(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}function i(r,n){if(!r)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==('undefined'==typeof n?'undefined':z(n))||'function'==typeof n)?n:r}function n(r,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+('undefined'==typeof n?'undefined':z(n)));r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(r,n):r.__proto__=n)}e.__esModule=!0;var o=d('./BaseTexture'),a=r(o),s=d('../settings'),h=r(s),l=function(o){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:100,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:100,n=arguments[2],s=arguments[3];p(this,t);var a=i(this,o.call(this,null,n));return a.resolution=s||h.default.RESOLUTION,a.width=e,a.height=r,a.realWidth=a.width*a.resolution,a.realHeight=a.height*a.resolution,a.scaleMode=void 0===n?h.default.SCALE_MODE:n,a.hasLoaded=!0,a._glRenderTargets={},a._canvasRenderTarget=null,a.valid=!1,a}return n(t,o),t.prototype.resize=function(r,t){r===this.width&&t===this.height||(this.valid=0<r&&0<t,this.width=r,this.height=t,this.realWidth=this.width*this.resolution,this.realHeight=this.height*this.resolution,this.valid&&this.emit('update',this))},t.prototype.destroy=function(){o.prototype.destroy.call(this,!0),this.renderer=null},t}(a.default);e.default=l},{"../settings":101,"./BaseTexture":112}],112:[function(g,t,e){function r(e){return e&&e.__esModule?e:{default:e}}function m(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}function i(r,n){if(!r)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==('undefined'==typeof n?'undefined':z(n))||'function'==typeof n)?n:r}function n(r,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+('undefined'==typeof n?'undefined':z(n)));r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(r,n):r.__proto__=n)}e.__esModule=!0;var _=g('../utils'),a=g('../settings'),o=r(a),u=g('eventemitter3'),l=r(u),c=g('../utils/determineCrossOrigin'),d=r(c),h=g('bit-twiddle'),p=r(h),f=function(a){function l(e,t,r){m(this,l);var n=i(this,a.call(this));return n.uid=(0,_.uid)(),n.touched=0,n.resolution=r||o.default.RESOLUTION,n.width=100,n.height=100,n.realWidth=100,n.realHeight=100,n.scaleMode=void 0===t?o.default.SCALE_MODE:t,n.hasLoaded=!1,n.isLoading=!1,n.source=null,n.origSource=null,n.imageType=null,n.sourceScale=1,n.premultipliedAlpha=!0,n.imageUrl=null,n.isPowerOfTwo=!1,n.mipmap=o.default.MIPMAP_TEXTURES,n.wrapMode=o.default.WRAP_MODE,n._glTextures={},n._enabled=0,n._virtalBoundId=-1,n._destroyed=!1,n.textureCacheIds=[],e&&n.loadSource(e),n}return n(l,a),l.prototype.update=function(){'svg'!==this.imageType&&(this.realWidth=this.source.naturalWidth||this.source.videoWidth||this.source.width,this.realHeight=this.source.naturalHeight||this.source.videoHeight||this.source.height,this._updateDimensions()),this.emit('update',this)},l.prototype._updateDimensions=function(){this.width=this.realWidth/this.resolution,this.height=this.realHeight/this.resolution,this.isPowerOfTwo=p.default.isPow2(this.realWidth)&&p.default.isPow2(this.realHeight)},l.prototype.loadSource=function(a){var t=this.isLoading;this.hasLoaded=!1,this.isLoading=!1,t&&this.source&&(this.source.onload=null,this.source.onerror=null);var e=!this.source;if(this.source=a,(a.src&&a.complete||a.getContext)&&a.width&&a.height)this._updateImageType(),'svg'===this.imageType?this._loadSvgSource():this._sourceLoaded(),e&&this.emit('loaded',this);else if(!a.getContext){this.isLoading=!0;var r=this;if(a.onload=function(){if(r._updateImageType(),a.onload=null,a.onerror=null,r.isLoading){if(r.isLoading=!1,r._sourceLoaded(),'svg'===r.imageType)return void r._loadSvgSource();r.emit('loaded',r)}},a.onerror=function(){a.onload=null,a.onerror=null,r.isLoading&&(r.isLoading=!1,r.emit('error',r))},a.complete&&a.src){if(a.onload=null,a.onerror=null,'svg'===r.imageType)return void r._loadSvgSource();this.isLoading=!1,a.width&&a.height?(this._sourceLoaded(),t&&this.emit('loaded',this)):t&&this.emit('error',this)}}},l.prototype._updateImageType=function(){if(this.imageUrl){var n=(0,_.decomposeDataUri)(this.imageUrl),t;if(n&&'image'===n.mediaType){var e=n.subType.split('+')[0];if(!(t=(0,_.getUrlFileExtension)('.'+e)))throw new Error('Invalid image type in data URI.')}else(t=(0,_.getUrlFileExtension)(this.imageUrl))||(t='png');this.imageType=t}},l.prototype._loadSvgSource=function(){if('svg'===this.imageType){var e=(0,_.decomposeDataUri)(this.imageUrl);e?this._loadSvgSourceUsingDataUri(e):this._loadSvgSourceUsingXhr()}},l.prototype._loadSvgSourceUsingDataUri=function(r){var t;if('base64'===r.encoding){if(!atob)throw new Error('Your browser doesn\'t support base64 conversions.');t=atob(r.data)}else t=r.data;this._loadSvgSourceUsingString(t)},l.prototype._loadSvgSourceUsingXhr=function(){var r=this,t=new XMLHttpRequest;t.onload=function(){if(t.readyState!==t.DONE||200!==t.status)throw new Error('Failed to load SVG using XHR.');r._loadSvgSourceUsingString(t.response)},t.onerror=function(){return r.emit('error',r)},t.open('GET',this.imageUrl,!0),t.send()},l.prototype._loadSvgSourceUsingString=function(e){var t=(0,_.getSvgSize)(e),r=t.width,a=t.height;if(!r||!a)throw new Error('The SVG image must have width and height defined (in pixels), canvas API needs them.');this.realWidth=s(r*this.sourceScale),this.realHeight=s(a*this.sourceScale),this._updateDimensions();var d=document.createElement('canvas');d.width=this.realWidth,d.height=this.realHeight,d._pixiId='canvas_'+(0,_.uid)(),d.getContext('2d').drawImage(this.source,0,0,r,a,0,0,this.realWidth,this.realHeight),this.origSource=this.source,this.source=d,l.addToCache(this,d._pixiId),this.isLoading=!1,this._sourceLoaded(),this.emit('loaded',this)},l.prototype._sourceLoaded=function(){this.hasLoaded=!0,this.update()},l.prototype.destroy=function(){this.imageUrl&&(delete _.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src='')),this.source=null,this.dispose(),l.removeFromCache(this),this.textureCacheIds=null,this._destroyed=!0},l.prototype.dispose=function(){this.emit('dispose',this)},l.prototype.updateSourceImage=function(e){this.source.src=e,this.loadSource(this.source)},l.fromImage=function(e,t,a,n){var i=_.BaseTextureCache[e];if(!i){var u=new Image;void 0===t&&0!==e.indexOf('data:')?u.crossOrigin=(0,d.default)(e):t&&(u.crossOrigin='string'==typeof t?t:'anonymous'),i=new l(u,a),i.imageUrl=e,n&&(i.sourceScale=n),i.resolution=(0,_.getResolutionOfUrl)(e),u.src=e,l.addToCache(i,e)}return i},l.fromCanvas=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:'canvas';e._pixiId||(e._pixiId=r+'_'+(0,_.uid)());var n=_.BaseTextureCache[e._pixiId];return n||(n=new l(e,t),l.addToCache(n,e._pixiId)),n},l.from=function(e,a,r){if('string'==typeof e)return l.fromImage(e,void 0,a,r);if(e instanceof HTMLImageElement){var n=e.src,i=_.BaseTextureCache[n];return i||(i=new l(e,a),i.imageUrl=n,r&&(i.sourceScale=r),i.resolution=(0,_.getResolutionOfUrl)(n),l.addToCache(i,n)),i}return e instanceof HTMLCanvasElement?l.fromCanvas(e,a):e},l.addToCache=function(r,t){t&&(-1===r.textureCacheIds.indexOf(t)&&r.textureCacheIds.push(t),_.BaseTextureCache[t]=r)},l.removeFromCache=function(a){if('string'==typeof a){var o=_.BaseTextureCache[a];if(o){var e=o.textureCacheIds.indexOf(a);return-1<e&&o.textureCacheIds.splice(e,1),delete _.BaseTextureCache[a],o}}else if(a&&a.textureCacheIds){for(var r=0;r<a.textureCacheIds.length;++r)delete _.BaseTextureCache[a.textureCacheIds[r]];return a.textureCacheIds.length=0,a}return null},l}(l.default);e.default=f},{"../settings":101,"../utils":124,"../utils/determineCrossOrigin":123,"bit-twiddle":1,eventemitter3:3}],113:[function(d,t,e){function r(e){return e&&e.__esModule?e:{default:e}}function p(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}function i(r,n){if(!r)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==('undefined'==typeof n?'undefined':z(n))||'function'==typeof n)?n:r}function n(r,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+('undefined'==typeof n?'undefined':z(n)));r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(r,n):r.__proto__=n)}e.__esModule=!0;var o=d('./BaseRenderTexture'),f=r(o),a=d('./Texture'),s=r(a),l=function(o){function u(e,t){p(this,u);var r=null;if(!(e instanceof f.default)){var n=arguments[1],a=arguments[2],s=arguments[3],l=arguments[4];console.warn('Please use RenderTexture.create('+n+', '+a+') instead of the ctor directly.'),r=arguments[0],t=null,e=new f.default(n,a,s,l)}var c=i(this,o.call(this,e,t));return c.legacyRenderer=r,c.valid=!0,c._updateUvs(),c}return n(u,o),u.prototype.resize=function(n,t,e){this.valid=0<n&&0<t,this._frame.width=this.orig.width=n,this._frame.height=this.orig.height=t,e||this.baseTexture.resize(n,t),this._updateUvs()},u.create=function(e,t,r,n){return new u(new f.default(e,t,r,n))},u}(s.default);e.default=l},{"./BaseRenderTexture":111,"./Texture":115}],114:[function(d,t,e){function l(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}e.__esModule=!0;var r=function(){function a(a,o){for(var e=0,r;e<o.length;e++)r=o[e],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}return function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}}(),n=d('../'),o=d('../utils'),i=function(){function d(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;l(this,d),this.baseTexture=t,this.textures={},this.data=e,this.resolution=this._updateResolution(r||this.baseTexture.imageUrl),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return r(d,null,[{key:'BATCH_SIZE',get:function(){return 1e3}}]),d.prototype._updateResolution=function(n){var t=this.data.meta.scale,e=(0,o.getResolutionOfUrl)(n,null);return null===e&&(e=void 0===t?1:parseFloat(t)),1!==e&&(this.baseTexture.resolution=e,this.baseTexture.update()),e},d.prototype.parse=function(t){this._batchIndex=0,this._callback=t,this._frameKeys.length<=d.BATCH_SIZE?(this._processFrames(0),this._parseComplete()):this._nextBatch()},d.prototype._processFrames=function(t){for(var e=t,r=d.BATCH_SIZE;e-t<r&&e<this._frameKeys.length;){var o=this._frameKeys[e],i=this._frames[o].frame;if(i){var s=null,a=null,l=new n.Rectangle(0,0,this._frames[o].sourceSize.w/this.resolution,this._frames[o].sourceSize.h/this.resolution);s=this._frames[o].rotated?new n.Rectangle(i.x/this.resolution,i.y/this.resolution,i.h/this.resolution,i.w/this.resolution):new n.Rectangle(i.x/this.resolution,i.y/this.resolution,i.w/this.resolution,i.h/this.resolution),this._frames[o].trimmed&&(a=new n.Rectangle(this._frames[o].spriteSourceSize.x/this.resolution,this._frames[o].spriteSourceSize.y/this.resolution,i.w/this.resolution,i.h/this.resolution)),this.textures[o]=new n.Texture(this.baseTexture,s,l,a,this._frames[o].rotated?2:0),n.Texture.addToCache(this.textures[o],o)}e++}},d.prototype._parseComplete=function(){var e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)},d.prototype._nextBatch=function(){var t=this;this._processFrames(this._batchIndex*d.BATCH_SIZE),this._batchIndex++,setTimeout(function(){t._batchIndex*d.BATCH_SIZE<t._frameKeys.length?t._nextBatch():t._parseComplete()},0)},d.prototype.destroy=function(){var r=0<arguments.length&&void 0!==arguments[0]&&arguments[0];for(var t in this.textures)this.textures[t].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,r&&this.baseTexture.destroy(),this.baseTexture=null},d}();e.default=i},{"../":65,"../utils":124}],115:[function(T,t,e){function r(e){return e&&e.__esModule?e:{default:e}}function E(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}function i(r,n){if(!r)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==('undefined'==typeof n?'undefined':z(n))||'function'==typeof n)?n:r}function n(r,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+('undefined'==typeof n?'undefined':z(n)));r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(r,n):r.__proto__=n)}function o(e){e.destroy=function(){},e.on=function(){},e.once=function(){},e.emit=function(){}}e.__esModule=!0;var a=function(){function a(a,o){for(var e=0,r;e<o.length;e++)r=o[e],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}return function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}}(),s=T('./BaseTexture'),u=r(s),l=T('./VideoBaseTexture'),c=r(l),d=T('./TextureUvs'),h=r(d),p=T('eventemitter3'),f=r(p),y=T('../math'),g=T('../utils'),m=T('../settings'),_=r(m),b=function(o){function d(e,t,r,n,a){E(this,d);var s=i(this,o.call(this));if(s.noFrame=!1,t||(s.noFrame=!0,t=new y.Rectangle(0,0,1,1)),e instanceof d&&(e=e.baseTexture),s.baseTexture=e,s._frame=t,s.trim=n,s.valid=!1,s.requiresUpdate=!1,s._uvs=null,s.orig=r||t,s._rotate=+(a||0),!0===a)s._rotate=2;else if(0!=s._rotate%2)throw new Error('attempt to use diamond-shaped UVs. If you are sure, set rotation manually');return e.hasLoaded?(s.noFrame&&(t=new y.Rectangle(0,0,e.width,e.height),e.on('update',s.onBaseTextureUpdated,s)),s.frame=t):e.once('loaded',s.onBaseTextureLoaded,s),s._updateID=0,s.transform=null,s.textureCacheIds=[],s}return n(d,o),d.prototype.update=function(){this.baseTexture.update()},d.prototype.onBaseTextureLoaded=function(e){this._updateID++,this.frame=this.noFrame?new y.Rectangle(0,0,e.width,e.height):this._frame,this.baseTexture.on('update',this.onBaseTextureUpdated,this),this.emit('update',this)},d.prototype.onBaseTextureUpdated=function(e){this._updateID++,this._frame.width=e.width,this._frame.height=e.height,this.emit('update',this)},d.prototype.destroy=function(e){this.baseTexture&&(e&&(g.TextureCache[this.baseTexture.imageUrl]&&d.removeFromCache(this.baseTexture.imageUrl),this.baseTexture.destroy()),this.baseTexture.off('update',this.onBaseTextureUpdated,this),this.baseTexture.off('loaded',this.onBaseTextureLoaded,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,d.removeFromCache(this),this.textureCacheIds=null},d.prototype.clone=function(){return new d(this.baseTexture,this.frame,this.orig,this.trim,this.rotate)},d.prototype._updateUvs=function(){this._uvs||(this._uvs=new h.default),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},d.fromImage=function(e,t,r,n){var a=g.TextureCache[e];return a||(a=new d(u.default.fromImage(e,t,r,n)),d.addToCache(a,e)),a},d.fromFrame=function(r){var t=g.TextureCache[r];if(!t)throw new Error('The frameId "'+r+'" does not exist in the texture cache');return t},d.fromCanvas=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:'canvas';return new d(u.default.fromCanvas(e,t,r))},d.fromVideo=function(e,n){return'string'==typeof e?d.fromVideoUrl(e,n):new d(c.default.fromVideo(e,n))},d.fromVideoUrl=function(e,t){return new d(c.default.fromUrl(e,t))},d.from=function(e){if('string'==typeof e){var n=g.TextureCache[e];return n?n:null===e.match(/\.(mp4|webm|ogg|h264|avi|mov)$/)?d.fromImage(e):d.fromVideoUrl(e)}return e instanceof HTMLImageElement?new d(u.default.from(e)):e instanceof HTMLCanvasElement?d.fromCanvas(e,_.default.SCALE_MODE,'HTMLCanvasElement'):e instanceof HTMLVideoElement?d.fromVideo(e):e instanceof u.default?new d(e):e},d.fromLoader=function(e,t,r){var n=new u.default(e,void 0,(0,g.getResolutionOfUrl)(t)),a=new d(n);return n.imageUrl=t,r||(r=t),u.default.addToCache(a.baseTexture,r),d.addToCache(a,r),r!==t&&(u.default.addToCache(a.baseTexture,t),d.addToCache(a,t)),a},d.addToCache=function(r,t){t&&(-1===r.textureCacheIds.indexOf(t)&&r.textureCacheIds.push(t),g.TextureCache[t]=r)},d.removeFromCache=function(a){if('string'==typeof a){var o=g.TextureCache[a];if(o){var e=o.textureCacheIds.indexOf(a);return-1<e&&o.textureCacheIds.splice(e,1),delete g.TextureCache[a],o}}else if(a&&a.textureCacheIds){for(var r=0;r<a.textureCacheIds.length;++r)g.TextureCache[a.textureCacheIds[r]]===a&&delete g.TextureCache[a.textureCacheIds[r]];return a.textureCacheIds.length=0,a}return null},a(d,[{key:'frame',get:function(){return this._frame},set:function(e){if(this._frame=e,this.noFrame=!1,e.x+e.width>this.baseTexture.width||e.y+e.height>this.baseTexture.height)throw new Error('Texture Error: frame does not fit inside the base Texture dimensions: X: '+e.x+' + '+e.width+' = '+(e.x+e.width)+' > '+this.baseTexture.width+' Y: '+e.y+' + '+e.height+' = '+(e.y+e.height)+' > '+this.baseTexture.height);this.valid=e&&e.width&&e.height&&this.baseTexture.hasLoaded,this.trim||this.rotate||(this.orig=e),this.valid&&this._updateUvs()}},{key:'rotate',get:function(){return this._rotate},set:function(e){this._rotate=e,this.valid&&this._updateUvs()}},{key:'width',get:function(){return this.orig.width}},{key:'height',get:function(){return this.orig.height}}]),d}(f.default);e.default=b,b.EMPTY=new b(new u.default()),o(b.EMPTY),o(b.EMPTY.baseTexture),b.WHITE=function(){var r=document.createElement('canvas');r.width=10,r.height=10;var t=r.getContext('2d');return t.fillStyle='white',t.fillRect(0,0,10,10),new b(new u.default(r))}(),o(b.WHITE),o(b.WHITE.baseTexture)},{"../math":70,"../settings":101,"../utils":124,"./BaseTexture":112,"./TextureUvs":116,"./VideoBaseTexture":117,eventemitter3:3}],116:[function(a,t,e){function r(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}e.__esModule=!0;var n=a('../math/GroupD8'),d=function(e){return e&&e.__esModule?e:{default:e}}(n),o=function(){function e(){r(this,e),this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsUint32=new Uint32Array(4)}return e.prototype.set=function(o,t,e){var r=t.width,n=t.height;if(e){var i=o.width/2/r,s=o.height/2/n,a=o.x/r+i,l=o.y/n+s;e=d.default.add(e,d.default.NW),this.x0=a+i*d.default.uX(e),this.y0=l+s*d.default.uY(e),e=d.default.add(e,2),this.x1=a+i*d.default.uX(e),this.y1=l+s*d.default.uY(e),e=d.default.add(e,2),this.x2=a+i*d.default.uX(e),this.y2=l+s*d.default.uY(e),e=d.default.add(e,2),this.x3=a+i*d.default.uX(e),this.y3=l+s*d.default.uY(e)}else this.x0=o.x/r,this.y0=o.y/n,this.x1=(o.x+o.width)/r,this.y1=o.y/n,this.x2=(o.x+o.width)/r,this.y2=(o.y+o.height)/n,this.x3=o.x/r,this.y3=(o.y+o.height)/n;this.uvsUint32[0]=(65535&65535*this.y0)<<16|65535&65535*this.x0,this.uvsUint32[1]=(65535&65535*this.y1)<<16|65535&65535*this.x1,this.uvsUint32[2]=(65535&65535*this.y2)<<16|65535&65535*this.x2,this.uvsUint32[3]=(65535&65535*this.y3)<<16|65535&65535*this.x3},e}();e.default=o},{"../math/GroupD8":66}],117:[function(p,t,e){function g(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}function n(r,n){if(!r)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==('undefined'==typeof n?'undefined':z(n))||'function'==typeof n)?n:r}function r(r,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+('undefined'==typeof n?'undefined':z(n)));r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(r,n):r.__proto__=n)}function o(n,t){t||(t='video/'+n.substr(n.lastIndexOf('.')+1));var e=document.createElement('source');return e.src=n,e.type=t,e}e.__esModule=!0;var i=function(){function a(a,o){for(var e=0,r;e<o.length;e++)r=o[e],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}return function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}}(),a=p('./BaseTexture'),s=function(e){return e&&e.__esModule?e:{default:e}}(a),u=p('../utils'),l=p('../ticker'),c=p('../const'),d=function(a){function d(e,t){if(g(this,d),!e)throw new Error('No video source element specified.');(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0);var o=n(this,a.call(this,e,t));return o.width=e.videoWidth,o.height=e.videoHeight,o._autoUpdate=!0,o._isAutoUpdating=!1,o.autoPlay=!0,o.update=o.update.bind(o),o._onCanPlay=o._onCanPlay.bind(o),e.addEventListener('play',o._onPlayStart.bind(o)),e.addEventListener('pause',o._onPlayStop.bind(o)),o.hasLoaded=!1,o.__loaded=!1,o._isSourceReady()?o._onCanPlay():(e.addEventListener('canplay',o._onCanPlay),e.addEventListener('canplaythrough',o._onCanPlay)),o}return r(d,a),d.prototype._isSourcePlaying=function(){var e=this.source;return 0<e.currentTime&&!1===e.paused&&!1===e.ended&&2<e.readyState},d.prototype._isSourceReady=function(){return 3===this.source.readyState||4===this.source.readyState},d.prototype._onPlayStart=function(){this.hasLoaded||this._onCanPlay(),!this._isAutoUpdating&&this.autoUpdate&&(l.shared.add(this.update,this,c.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0)},d.prototype._onPlayStop=function(){this._isAutoUpdating&&(l.shared.remove(this.update,this),this._isAutoUpdating=!1)},d.prototype._onCanPlay=function(){this.hasLoaded=!0,this.source&&(this.source.removeEventListener('canplay',this._onCanPlay),this.source.removeEventListener('canplaythrough',this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.__loaded||(this.__loaded=!0,this.emit('loaded',this)),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.source.play())},d.prototype.destroy=function(){this._isAutoUpdating&&l.shared.remove(this.update,this),this.source&&this.source._pixiId&&(s.default.removeFromCache(this.source._pixiId),delete this.source._pixiId),a.prototype.destroy.call(this)},d.fromVideo=function(e,t){e._pixiId||(e._pixiId='video_'+(0,u.uid)());var r=u.BaseTextureCache[e._pixiId];return r||(r=new d(e,t),s.default.addToCache(r,e._pixiId)),r},d.fromUrl=function(e,t){var r=document.createElement('video');if(r.setAttribute('webkit-playsinline',''),r.setAttribute('playsinline',''),Array.isArray(e))for(var n=0;n<e.length;++n)r.appendChild(o(e[n].src||e[n],e[n].mime));else r.appendChild(o(e.src||e,e.mime));return r.load(),d.fromVideo(r,t)},i(d,[{key:'autoUpdate',get:function(){return this._autoUpdate},set:function(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isAutoUpdating?(l.shared.remove(this.update,this),this._isAutoUpdating=!1):this._autoUpdate&&!this._isAutoUpdating&&(l.shared.add(this.update,this,c.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0))}}]),d}(s.default);e.default=d,d.fromUrls=d.fromUrl},{"../const":46,"../ticker":120,"../utils":124,"./BaseTexture":112}],118:[function(d,t,e){function r(e){return e&&e.__esModule?e:{default:e}}function n(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}e.__esModule=!0;var i=function(){function a(a,o){for(var e=0,r;e<o.length;e++)r=o[e],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}return function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}}(),o=d('../settings'),s=r(o),a=d('../const'),u=d('./TickerListener'),p=r(u),l=function(){function r(){var a=this;n(this,r),this._head=new p.default(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this.autoStart=!1,this.deltaTime=1,this.elapsedMS=1/s.default.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._tick=function(e){a._requestId=null,a.started&&(a.update(e),a.started&&null===a._requestId&&a._head.next&&(a._requestId=requestAnimationFrame(a._tick)))}}return r.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))},r.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},r.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},r.prototype.add=function(n,t){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:a.UPDATE_PRIORITY.NORMAL;return this._addListener(new p.default(n,t,e))},r.prototype.addOnce=function(n,t){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:a.UPDATE_PRIORITY.NORMAL;return this._addListener(new p.default(n,t,e,!0))},r.prototype._addListener=function(n){var t=this._head.next,e=this._head;if(t){for(;t;){if(n.priority>t.priority){n.connect(e);break}e=t,t=t.next}n.previous||n.connect(e)}else n.connect(e);return this._startIfPossible(),this},r.prototype.remove=function(n,t){for(var e=this._head.next;e;)e=e.match(n,t)?e.destroy():e.next;return this._head.next||this._cancelIfNeeded(),this},r.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},r.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},r.prototype.destroy=function(){this.stop();for(var e=this._head.next;e;)e=e.destroy(!0);this._head.destroy(),this._head=null},r.prototype.update=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:performance.now(),t;if(a>this.lastTime){t=this.elapsedMS=a-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),this.deltaTime=t*s.default.TARGET_FPMS*this.speed;for(var e=this._head,r=e.next;r;)r=r.emit(this.deltaTime);e.next||this._cancelIfNeeded()}else this.deltaTime=this.elapsedMS=0;this.lastTime=a},i(r,[{key:'FPS',get:function(){return 1e3/this.elapsedMS}},{key:'minFPS',get:function(){return 1e3/this._maxElapsedMS},set:function(r){var t=B(P(0,r)/1e3,s.default.TARGET_FPMS);this._maxElapsedMS=1/t}}]),r}();e.default=l},{"../const":46,"../settings":101,"./TickerListener":119}],119:[function(a,t,e){function s(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}e.__esModule=!0;var r=function(){function n(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,a=3<arguments.length&&void 0!==arguments[3]&&arguments[3];s(this,n),this.fn=t,this.context=e,this.priority=r,this.once=a,this.next=null,this.previous=null,this._destroyed=!1}return n.prototype.match=function(r,t){return t=t||null,this.fn===r&&this.context===t},n.prototype.emit=function(r){this.fn&&(this.context?this.fn.call(this.context,r):this.fn(r));var t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t},n.prototype.connect=function(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this},n.prototype.destroy=function(){var r=0<arguments.length&&void 0!==arguments[0]&&arguments[0];this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var t=this.previous;return this.next=r?null:t,this.previous=null,t},n}();e.default=r},{}],120:[function(a,t,e){e.__esModule=!0,e.Ticker=e.shared=void 0;var r=a('./Ticker'),n=function(e){return e&&e.__esModule?e:{default:e}}(r),i=new n.default;i.autoStart=!0,i.destroy=function(){},e.shared=i,e.Ticker=n.default},{"./Ticker":118}],121:[function(n,t,e){e.__esModule=!0,e.default=function(){return!navigator.platform||!/iPad|iPhone|iPod/.test(navigator.platform)}},{}],122:[function(n,t,e){e.__esModule=!0,e.default=function(a){for(var t=6*a,e=new Uint16Array(t),r=0,n=0;r<t;r+=6,n+=4)e[r+0]=n+0,e[r+1]=n+1,e[r+2]=n+2,e[r+3]=n+0,e[r+4]=n+2,e[r+5]=n+3;return e}},{}],123:[function(n,t,e){e.__esModule=!0,e.default=function(n){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:window.location;if(0===n.indexOf('data:'))return'';t=t||window.location,o||(o=document.createElement('a')),o.href=n,n=a.default.parse(o.href);var e=!n.port&&''===t.port||n.port===t.port;return n.hostname===t.hostname&&e&&n.protocol===t.protocol?'':'anonymous'};var r=n('url'),a=function(e){return e&&e.__esModule?e:{default:e}}(r),o=void 0},{url:38}],124:[function(a,t,e){function r(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t.default=n,t}function n(e){return e&&e.__esModule?e:{default:e}}e.__esModule=!0,e.premultiplyBlendMode=e.BaseTextureCache=e.TextureCache=e.mixins=e.pluginTarget=e.EventEmitter=e.removeItems=e.isMobile=void 0,e.uid=function(){return++T},e.hex2rgb=function(r,t){return t=t||[],t[0]=(255&r>>16)/255,t[1]=(255&r>>8)/255,t[2]=(255&r)/255,t},e.hex2string=function(e){return e=e.toString(16),'#'+(e='000000'.substr(0,6-e.length)+e)},e.rgb2hex=function(e){return(255*e[0]<<16)+(255*e[1]<<8)+(0|255*e[2])},e.getResolutionOfUrl=function(n,t){var e=d.default.RETINA_PREFIX.exec(n);return e?parseFloat(e[1]):void 0===t?1:t},e.decomposeDataUri=function(r){var t=o.DATA_URI.exec(r);if(t)return{mediaType:t[1]?t[1].toLowerCase():void 0,subType:t[2]?t[2].toLowerCase():void 0,encoding:t[3]?t[3].toLowerCase():void 0,data:t[4]}},e.getUrlFileExtension=function(r){var t=o.URL_FILE_EXTENSION.exec(r);if(t)return t[1].toLowerCase()},e.getSvgSize=function(n){var t=o.SVG_SIZE.exec(n),e={};return t&&(e[t[1]]=s(parseFloat(t[3])),e[t[5]]=s(parseFloat(t[7]))),e},e.skipHello=function(){v=!0},e.sayHello=function(r){if(!v){if(-1<navigator.userAgent.toLowerCase().indexOf('chrome')){var t=['\n %c %c %c PixiJS '+o.VERSION+' - \u2730 '+r+' \u2730  %c  %c  http://www.pixijs.com/  %c %c \u2665%c\u2665%c\u2665 \n\n','background: #ff66a5; padding:5px 0;','background: #ff66a5; padding:5px 0;','color: #ff66a5; background: #030307; padding:5px 0;','background: #ff66a5; padding:5px 0;','background: #ffc3dc; padding:5px 0;','background: #ff66a5; padding:5px 0;','color: #ff2424; background: #fff; padding:5px 0;','color: #ff2424; background: #fff; padding:5px 0;','color: #ff2424; background: #fff; padding:5px 0;'];window.console.log.apply(console,t)}else window.console&&window.console.log('PixiJS '+o.VERSION+' - '+r+' - http://www.pixijs.com/');v=!0}},e.isWebGLSupported=function(){var a={stencil:!0,failIfMajorPerformanceCaveat:!0};try{if(!window.WebGLRenderingContext)return!1;var t=document.createElement('canvas'),e=t.getContext('webgl',a)||t.getContext('experimental-webgl',a),r=e&&e.getContextAttributes().stencil;if(e){var n=e.getExtension('WEBGL_lose_context');n&&n.loseContext()}return e=null,r}catch(e){return!1}},e.sign=function(e){return 0===e?0:0>e?-1:1},e.destroyTextureCache=function(){for(var e in E)E[e].destroy();for(e in S)S[e].destroy()},e.clearTextureCache=function(){for(var e in E)delete E[e];for(e in S)delete S[e]},e.correctBlendMode=function(r,t){return P[t?1:0][r]},e.premultiplyTint=function(a,t){if(1===t)return(255*t<<24)+a;if(0===t)return 0;var e=255&a>>16,r=255&a>>8,n=255&a;return e=0|e*t+.5,r=0|r*t+.5,n=0|n*t+.5,(255*t<<24)+(e<<16)+(r<<8)+n},e.premultiplyRgba=function(a,t,e,r){return e=e||new Float32Array(4),r||void 0===r?(e[0]=a[0]*t,e[1]=a[1]*t,e[2]=a[2]*t):(e[0]=a[0],e[1]=a[1],e[2]=a[2]),e[3]=t,e},e.premultiplyTintToRgba=function(a,t,e,r){return e=e||new Float32Array(4),e[0]=(255&a>>16)/255,e[1]=(255&a>>8)/255,e[2]=(255&a)/255,(r||void 0===r)&&(e[0]*=t,e[1]*=t,e[2]*=t),e[3]=t,e};var o=a('../const'),i=a('../settings'),d=n(i),l=a('eventemitter3'),u=n(l),p=a('./pluginTarget'),c=n(p),h=a('./mixin'),f=r(h),g=a('ismobilejs'),m=r(g),_=a('remove-array-items'),y=n(_),x=a('./mapPremultipliedBlendModes'),b=n(x),T=0,v=!1;e.isMobile=m,e.removeItems=y.default,e.EventEmitter=u.default,e.pluginTarget=c.default,e.mixins=f;var E=e.TextureCache=Object.create(null),S=e.BaseTextureCache=Object.create(null),P=e.premultiplyBlendMode=(0,b.default)()},{"../const":46,"../settings":101,"./mapPremultipliedBlendModes":125,"./mixin":127,"./pluginTarget":128,eventemitter3:3,ismobilejs:4,"remove-array-items":31}],125:[function(n,t,e){e.__esModule=!0,e.default=function(){for(var o=[],t=[],e=0;32>e;e++)o[e]=e,t[e]=e;o[a.BLEND_MODES.NORMAL_NPM]=a.BLEND_MODES.NORMAL,o[a.BLEND_MODES.ADD_NPM]=a.BLEND_MODES.ADD,o[a.BLEND_MODES.SCREEN_NPM]=a.BLEND_MODES.SCREEN,t[a.BLEND_MODES.NORMAL]=a.BLEND_MODES.NORMAL_NPM,t[a.BLEND_MODES.ADD]=a.BLEND_MODES.ADD_NPM,t[a.BLEND_MODES.SCREEN]=a.BLEND_MODES.SCREEN_NPM;var r=[];return r.push(t),r.push(o),r};var a=n('../const')},{"../const":46}],126:[function(n,t,e){e.__esModule=!0,e.default=function(e){return a.default.tablet||a.default.phone?4:e};var r=n('ismobilejs'),a=function(e){return e&&e.__esModule?e:{default:e}}(r)},{ismobilejs:4}],127:[function(a,t,e){function r(a,t){if(a&&t)for(var e=Object.keys(t),r=0,o;r<e.length;++r)o=e[r],Object.defineProperty(a,o,Object.getOwnPropertyDescriptor(t,o))}e.__esModule=!0,e.mixin=r,e.delayMixin=function(r,t){n.push(r,t)},e.performMixins=function(){for(var e=0;e<n.length;e+=2)r(n[e],n[e+1]);n.length=0};var n=[]},{}],128:[function(a,t,e){function r(n){n.__plugins={},n.registerPlugin=function(t,e){n.__plugins[t]=e},n.prototype.initPlugins=function(){for(var t in this.plugins=this.plugins||{},n.__plugins)this.plugins[t]=new n.__plugins[t](this)},n.prototype.destroyPlugins=function(){for(var e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null;this.plugins=null}}e.__esModule=!0,e.default={mixin:function(e){r(e)}}},{}],129:[function(n,t,e){e.__esModule=!0,e.default=function(d){var t=d.width,p=d.height,c=d.getContext('2d'),n=c.getImageData(0,0,t,p),i=n.data,o=i.length,s={top:null,left:null,right:null,bottom:null},a,u,h;for(a=0;a<o;a+=4)0!==i[a+3]&&(u=a/4%t,h=~~(a/4/t),null===s.top&&(s.top=h),null===s.left?s.left=u:u<s.left&&(s.left=u),null===s.right?s.right=u+1:s.right<u&&(s.right=u+1),null===s.bottom?s.bottom=h:s.bottom<h&&(s.bottom=h));return t=s.right-s.left,p=s.bottom-s.top+1,{height:p,width:t,data:c.getImageData(s.left,s.top,t,p)}}},{}],130:[function(a,t,e){function l(){}e.__esModule=!0,e.default=function(n){var t=n.mesh,e=n.particles,r=n.extras,i=n.filters,o=n.prepare,s=n.loaders,a=n.interaction;Object.defineProperties(n,{SpriteBatch:{get:function(){throw new ReferenceError('SpriteBatch does not exist any more, please use the new ParticleContainer instead.')}},AssetLoader:{get:function(){throw new ReferenceError('The loader system was overhauled in PixiJS v3, please see the new PIXI.loaders.Loader class.')}},Stage:{get:function(){return l('You do not need to use a PIXI Stage any more, you can simply render any container.'),n.Container}},DisplayObjectContainer:{get:function(){return l('DisplayObjectContainer has been shortened to Container, please use Container from now on.'),n.Container}},Strip:{get:function(){return l('The Strip class has been renamed to Mesh and moved to mesh.Mesh, please use mesh.Mesh from now on.'),t.Mesh}},Rope:{get:function(){return l('The Rope class has been moved to mesh.Rope, please use mesh.Rope from now on.'),t.Rope}},ParticleContainer:{get:function(){return l('The ParticleContainer class has been moved to particles.ParticleContainer, please use particles.ParticleContainer from now on.'),e.ParticleContainer}},MovieClip:{get:function(){return l('The MovieClip class has been moved to extras.AnimatedSprite, please use extras.AnimatedSprite.'),r.AnimatedSprite}},TilingSprite:{get:function(){return l('The TilingSprite class has been moved to extras.TilingSprite, please use extras.TilingSprite from now on.'),r.TilingSprite}},BitmapText:{get:function(){return l('The BitmapText class has been moved to extras.BitmapText, please use extras.BitmapText from now on.'),r.BitmapText}},blendModes:{get:function(){return l('The blendModes has been moved to BLEND_MODES, please use BLEND_MODES from now on.'),n.BLEND_MODES}},scaleModes:{get:function(){return l('The scaleModes has been moved to SCALE_MODES, please use SCALE_MODES from now on.'),n.SCALE_MODES}},BaseTextureCache:{get:function(){return l('The BaseTextureCache class has been moved to utils.BaseTextureCache, please use utils.BaseTextureCache from now on.'),n.utils.BaseTextureCache}},TextureCache:{get:function(){return l('The TextureCache class has been moved to utils.TextureCache, please use utils.TextureCache from now on.'),n.utils.TextureCache}},math:{get:function(){return l('The math namespace is deprecated, please access members already accessible on PIXI.'),n}},AbstractFilter:{get:function(){return l('AstractFilter has been renamed to Filter, please use PIXI.Filter'),n.Filter}},TransformManual:{get:function(){return l('TransformManual has been renamed to TransformBase, please update your pixi-spine'),n.TransformBase}},TARGET_FPMS:{get:function(){return l('PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS'),n.settings.TARGET_FPMS},set:function(t){l('PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS'),n.settings.TARGET_FPMS=t}},FILTER_RESOLUTION:{get:function(){return l('PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION'),n.settings.FILTER_RESOLUTION},set:function(t){l('PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION'),n.settings.FILTER_RESOLUTION=t}},RESOLUTION:{get:function(){return l('PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION'),n.settings.RESOLUTION},set:function(t){l('PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION'),n.settings.RESOLUTION=t}},MIPMAP_TEXTURES:{get:function(){return l('PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES'),n.settings.MIPMAP_TEXTURES},set:function(t){l('PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES'),n.settings.MIPMAP_TEXTURES=t}},SPRITE_BATCH_SIZE:{get:function(){return l('PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE'),n.settings.SPRITE_BATCH_SIZE},set:function(t){l('PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE'),n.settings.SPRITE_BATCH_SIZE=t}},SPRITE_MAX_TEXTURES:{get:function(){return l('PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES'),n.settings.SPRITE_MAX_TEXTURES},set:function(t){l('PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES'),n.settings.SPRITE_MAX_TEXTURES=t}},RETINA_PREFIX:{get:function(){return l('PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX'),n.settings.RETINA_PREFIX},set:function(t){l('PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX'),n.settings.RETINA_PREFIX=t}},DEFAULT_RENDER_OPTIONS:{get:function(){return l('PIXI.DEFAULT_RENDER_OPTIONS has been deprecated, please use PIXI.settings.DEFAULT_RENDER_OPTIONS'),n.settings.RENDER_OPTIONS}}});for(var u=[{parent:'TRANSFORM_MODE',target:'TRANSFORM_MODE'},{parent:'GC_MODES',target:'GC_MODE'},{parent:'WRAP_MODES',target:'WRAP_MODE'},{parent:'SCALE_MODES',target:'SCALE_MODE'},{parent:'PRECISION',target:'PRECISION_FRAGMENT'}],p=0;p<u.length;p++)!function(t){var a=u[t];Object.defineProperty(n[a.parent],'DEFAULT',{get:function(){return l('PIXI.'+a.parent+'.DEFAULT has been deprecated, please use PIXI.settings.'+a.target),n.settings[a.target]},set:function(t){l('PIXI.'+a.parent+'.DEFAULT has been deprecated, please use PIXI.settings.'+a.target),n.settings[a.target]=t}})}(p);Object.defineProperties(n.settings,{PRECISION:{get:function(){return l('PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT'),n.settings.PRECISION_FRAGMENT},set:function(t){l('PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT'),n.settings.PRECISION_FRAGMENT=t}}}),r.AnimatedSprite&&Object.defineProperties(r,{MovieClip:{get:function(){return l('The MovieClip class has been renamed to AnimatedSprite, please use AnimatedSprite from now on.'),r.AnimatedSprite}}}),n.DisplayObject.prototype.generateTexture=function(n,t,e){return l('generateTexture has moved to the renderer, please use renderer.generateTexture(displayObject)'),n.generateTexture(this,t,e)},n.Graphics.prototype.generateTexture=function(r,t){return l('graphics generate texture has moved to the renderer. Or to render a graphics to a texture using canvas please use generateCanvasTexture'),this.generateCanvasTexture(r,t)},n.RenderTexture.prototype.render=function(n,t,e,r){this.legacyRenderer.render(n,this,e,t,!r),l('RenderTexture.render is now deprecated, please use renderer.render(displayObject, renderTexture)')},n.RenderTexture.prototype.getImage=function(e){return l('RenderTexture.getImage is now deprecated, please use renderer.extract.image(target)'),this.legacyRenderer.extract.image(e)},n.RenderTexture.prototype.getBase64=function(e){return l('RenderTexture.getBase64 is now deprecated, please use renderer.extract.base64(target)'),this.legacyRenderer.extract.base64(e)},n.RenderTexture.prototype.getCanvas=function(e){return l('RenderTexture.getCanvas is now deprecated, please use renderer.extract.canvas(target)'),this.legacyRenderer.extract.canvas(e)},n.RenderTexture.prototype.getPixels=function(e){return l('RenderTexture.getPixels is now deprecated, please use renderer.extract.pixels(target)'),this.legacyRenderer.pixels(e)},n.Sprite.prototype.setTexture=function(e){this.texture=e,l('setTexture is now deprecated, please use the texture property, e.g : sprite.texture = texture;')},r.BitmapText&&(r.BitmapText.prototype.setText=function(e){this.text=e,l('setText is now deprecated, please use the text property, e.g : myBitmapText.text = \'my text\';')}),n.Text.prototype.setText=function(e){this.text=e,l('setText is now deprecated, please use the text property, e.g : myText.text = \'my text\';')},n.Text.calculateFontProperties=function(t){return l('Text.calculateFontProperties is now deprecated, please use the TextMetrics.measureFont'),n.TextMetrics.measureFont(t)},Object.defineProperties(n.Text,{fontPropertiesCache:{get:function(){return l('Text.fontPropertiesCache is deprecated'),n.TextMetrics._fonts}},fontPropertiesCanvas:{get:function(){return l('Text.fontPropertiesCanvas is deprecated'),n.TextMetrics._canvas}},fontPropertiesContext:{get:function(){return l('Text.fontPropertiesContext is deprecated'),n.TextMetrics._context}}}),n.Text.prototype.setStyle=function(e){this.style=e,l('setStyle is now deprecated, please use the style property, e.g : myText.style = style;')},n.Text.prototype.determineFontProperties=function(t){return l('determineFontProperties is now deprecated, please use TextMetrics.measureFont method'),n.TextMetrics.measureFont(t)},n.Text.getFontStyle=function(t){return l('getFontStyle is now deprecated, please use TextStyle.toFontString() instead'),t=t||{},t instanceof n.TextStyle||(t=new n.TextStyle(t)),t.toFontString()},Object.defineProperties(n.TextStyle.prototype,{font:{get:function(){l('text style property \'font\' is now deprecated, please use the \'fontFamily\', \'fontSize\', \'fontStyle\', \'fontVariant\' and \'fontWeight\' properties from now on');var e='number'==typeof this._fontSize?this._fontSize+'px':this._fontSize;return this._fontStyle+' '+this._fontVariant+' '+this._fontWeight+' '+e+' '+this._fontFamily},set:function(n){l('text style property \'font\' is now deprecated, please use the \'fontFamily\',\'fontSize\',fontStyle\',\'fontVariant\' and \'fontWeight\' properties from now on'),this._fontStyle=1<n.indexOf('italic')?'italic':-1<n.indexOf('oblique')?'oblique':'normal',this._fontVariant=-1<n.indexOf('small-caps')?'small-caps':'normal';var t=n.split(' '),e=-1;this._fontSize=26;for(var r=0;r<t.length;++r)if(t[r].match(/(px|pt|em|%)/)){e=r,this._fontSize=t[r];break}this._fontWeight='normal';for(var a=0;a<e;++a)if(t[a].match(/(bold|bolder|lighter|100|200|300|400|500|600|700|800|900)/)){this._fontWeight=t[a];break}if(-1<e&&e<t.length-1){this._fontFamily='';for(var o=e+1;o<t.length;++o)this._fontFamily+=t[o]+' ';this._fontFamily=this._fontFamily.slice(0,-1)}else this._fontFamily='Arial';this.styleID++}}}),n.Texture.prototype.setFrame=function(e){this.frame=e,l('setFrame is now deprecated, please use the frame property, e.g: myTexture.frame = frame;')},n.Texture.addTextureToCache=function(t,e){n.Texture.addToCache(t,e),l('Texture.addTextureToCache is deprecated, please use Texture.addToCache from now on.')},n.Texture.removeTextureFromCache=function(t){return l('Texture.removeTextureFromCache is deprecated, please use Texture.removeFromCache from now on. Be aware that Texture.removeFromCache does not automatically its BaseTexture from the BaseTextureCache. For that, use BaseTexture.removeFromCache'),n.BaseTexture.removeFromCache(t),n.Texture.removeFromCache(t)},Object.defineProperties(i,{AbstractFilter:{get:function(){return l('AstractFilter has been renamed to Filter, please use PIXI.Filter'),n.AbstractFilter}},SpriteMaskFilter:{get:function(){return l('filters.SpriteMaskFilter is an undocumented alias, please use SpriteMaskFilter from now on.'),n.SpriteMaskFilter}}}),n.utils.uuid=function(){return l('utils.uuid() is deprecated, please use utils.uid() from now on.'),n.utils.uid()},n.utils.canUseNewCanvasBlendModes=function(){return l('utils.canUseNewCanvasBlendModes() is deprecated, please use CanvasTinter.canUseMultiply from now on'),n.CanvasTinter.canUseMultiply};var h=!0;if(Object.defineProperty(n.utils,'_saidHello',{set:function(e){e&&(l('PIXI.utils._saidHello is deprecated, please use PIXI.utils.skipHello()'),this.skipHello()),h=e},get:function(){return h}}),o.BasePrepare&&(o.BasePrepare.prototype.register=function(r,t){return l('renderer.plugins.prepare.register is now deprecated, please use renderer.plugins.prepare.registerFindHook & renderer.plugins.prepare.registerUploadHook'),r&&this.registerFindHook(r),t&&this.registerUploadHook(t),this}),o.canvas&&Object.defineProperty(o.canvas,'UPLOADS_PER_FRAME',{set:function(){l('PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer')},get:function(){return l('PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter'),NaN}}),o.webgl&&Object.defineProperty(o.webgl,'UPLOADS_PER_FRAME',{set:function(){l('PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer')},get:function(){return l('PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter'),NaN}}),s.Loader){var c=s.Resource,d=s.Loader;Object.defineProperties(c.prototype,{isJson:{get:function(){return l('The isJson property is deprecated, please use `resource.type === Resource.TYPE.JSON`.'),this.type===c.TYPE.JSON}},isXml:{get:function(){return l('The isXml property is deprecated, please use `resource.type === Resource.TYPE.XML`.'),this.type===c.TYPE.XML}},isImage:{get:function(){return l('The isImage property is deprecated, please use `resource.type === Resource.TYPE.IMAGE`.'),this.type===c.TYPE.IMAGE}},isAudio:{get:function(){return l('The isAudio property is deprecated, please use `resource.type === Resource.TYPE.AUDIO`.'),this.type===c.TYPE.AUDIO}},isVideo:{get:function(){return l('The isVideo property is deprecated, please use `resource.type === Resource.TYPE.VIDEO`.'),this.type===c.TYPE.VIDEO}}}),Object.defineProperties(d.prototype,{before:{get:function(){return l('The before() method is deprecated, please use pre().'),this.pre}},after:{get:function(){return l('The after() method is deprecated, please use use().'),this.use}}})}a.interactiveTarget&&Object.defineProperty(a.interactiveTarget,'defaultCursor',{set:function(e){l('Property defaultCursor has been replaced with \'cursor\'. '),this.cursor=e},get:function(){return l('Property defaultCursor has been replaced with \'cursor\'. '),this.cursor}}),a.InteractionManager&&(Object.defineProperty(a.InteractionManager,'defaultCursorStyle',{set:function(e){l('Property defaultCursorStyle has been replaced with \'cursorStyles.default\'. '),this.cursorStyles.default=e},get:function(){return l('Property defaultCursorStyle has been replaced with \'cursorStyles.default\'. '),this.cursorStyles.default}}),Object.defineProperty(a.InteractionManager,'currentCursorStyle',{set:function(e){l('Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently.'),this.currentCursorMode=e},get:function(){return l('Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently.'),this.currentCursorMode}}))}},{}],131:[function(d,t,e){function r(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}e.__esModule=!0;var n=d('../../core'),p=function(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t.default=n,t}(n),o=new p.Rectangle,i=function(){function n(t){r(this,n),this.renderer=t,t.extract=this}return n.prototype.image=function(r){var t=new Image;return t.src=this.base64(r),t},n.prototype.base64=function(e){return this.canvas(e).toDataURL()},n.prototype.canvas=function(s){var t=this.renderer,e,r,n,i;s&&(i=s instanceof p.RenderTexture?s:t.generateTexture(s)),i?(e=i.baseTexture._canvasRenderTarget.context,r=i.baseTexture._canvasRenderTarget.resolution,n=i.frame):(e=t.rootContext,n=o,n.width=this.renderer.width,n.height=this.renderer.height);var a=n.width*r,d=n.height*r,u=new p.CanvasRenderTarget(a,d),l=e.getImageData(n.x*r,n.y*r,a,d);return u.context.putImageData(l,0,0),u.canvas},n.prototype.pixels=function(s){var t=this.renderer,e,r,n,i;return s&&(i=s instanceof p.RenderTexture?s:t.generateTexture(s)),i?(e=i.baseTexture._canvasRenderTarget.context,r=i.baseTexture._canvasRenderTarget.resolution,n=i.frame):(e=t.rootContext,n=o,n.width=t.width,n.height=t.height),e.getImageData(0,0,n.width*r,n.height*r).data},n.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},n}();e.default=i,p.CanvasRenderer.registerPlugin('extract',i)},{"../../core":65}],132:[function(a,t,e){function r(e){return e&&e.__esModule?e:{default:e}}e.__esModule=!0;var n=a('./webgl/WebGLExtract');Object.defineProperty(e,'webgl',{enumerable:!0,get:function(){return r(n).default}});var i=a('./canvas/CanvasExtract');Object.defineProperty(e,'canvas',{enumerable:!0,get:function(){return r(i).default}})},{"./canvas/CanvasExtract":131,"./webgl/WebGLExtract":133}],133:[function(d,t,e){function r(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}e.__esModule=!0;var n=d('../../core'),g=function(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t.default=n,t}(n),o=new g.Rectangle,i=function(){function n(t){r(this,n),this.renderer=t,t.extract=this}return n.prototype.image=function(r){var t=new Image;return t.src=this.base64(r),t},n.prototype.base64=function(e){return this.canvas(e).toDataURL()},n.prototype.canvas=function(s){var t=this.renderer,e=!1,a,r,n,i;s&&(i=s instanceof g.RenderTexture?s:this.renderer.generateTexture(s)),i?(a=i.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID],r=a.resolution,n=i.frame,e=!1):(a=this.renderer.rootRenderTarget,r=a.resolution,e=!0,n=o,n.width=a.size.width,n.height=a.size.height);var u=n.width*r,h=n.height*r,m=new g.CanvasRenderTarget(u,h);if(a){t.bindRenderTarget(a);var c=new Uint8Array(4*u*h),d=t.gl;d.readPixels(n.x*r,n.y*r,u,h,d.RGBA,d.UNSIGNED_BYTE,c);var f=m.context.getImageData(0,0,u,h);f.data.set(c),m.context.putImageData(f,0,0),e&&(m.context.scale(1,-1),m.context.drawImage(m.canvas,0,-h))}return m.canvas},n.prototype.pixels=function(s){var t=this.renderer,e,r,n,i;s&&(i=s instanceof g.RenderTexture?s:this.renderer.generateTexture(s)),i?(e=i.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID],r=e.resolution,n=i.frame):(e=this.renderer.rootRenderTarget,r=e.resolution,n=o,n.width=e.size.width,n.height=e.size.height);var a=n.width*r,d=n.height*r,u=new Uint8Array(4*a*d);if(e){t.bindRenderTarget(e);var l=t.gl;l.readPixels(n.x*r,n.y*r,a,d,l.RGBA,l.UNSIGNED_BYTE,u)}return u},n.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},n}();e.default=i,g.WebGLRenderer.registerPlugin('extract',i)},{"../../core":65}],134:[function(d,t,e){function l(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}function n(r,n){if(!r)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==('undefined'==typeof n?'undefined':z(n))||'function'==typeof n)?n:r}function i(r,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+('undefined'==typeof n?'undefined':z(n)));r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(r,n):r.__proto__=n)}e.__esModule=!0;var o=function(){function a(a,o){for(var e=0,r;e<o.length;e++)r=o[e],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}return function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}}(),s=d('../core'),a=function(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t.default=n,t}(s),u=function(d){function u(e,t){l(this,u);var r=n(this,d.call(this,e[0]instanceof a.Texture?e[0]:e[0].texture));return r._textures=null,r._durations=null,r.textures=e,r._autoUpdate=!1!==t,r.animationSpeed=1,r.loop=!0,r.onComplete=null,r.onFrameChange=null,r.onLoop=null,r._currentTime=0,r.playing=!1,r}return i(u,d),u.prototype.stop=function(){this.playing&&(this.playing=!1,this._autoUpdate&&a.ticker.shared.remove(this.update,this))},u.prototype.play=function(){this.playing||(this.playing=!0,this._autoUpdate&&a.ticker.shared.add(this.update,this,a.UPDATE_PRIORITY.HIGH))},u.prototype.gotoAndStop=function(r){this.stop();var t=this.currentFrame;this._currentTime=r,t!==this.currentFrame&&this.updateTexture()},u.prototype.gotoAndPlay=function(r){var t=this.currentFrame;this._currentTime=r,t!==this.currentFrame&&this.updateTexture(),this.play()},u.prototype.update=function(a){var t=this.animationSpeed*a,e=this.currentFrame;if(null!==this._durations){var o=this._currentTime%1*this._durations[this.currentFrame];for(o+=1e3*(t/60);0>o;)this._currentTime--,o+=this._durations[this.currentFrame];var n=r(this.animationSpeed*a);for(this._currentTime=k(this._currentTime);o>=this._durations[this.currentFrame];)o-=this._durations[this.currentFrame]*n,this._currentTime+=n;this._currentTime+=o/this._durations[this.currentFrame]}else this._currentTime+=t;0>this._currentTime&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):e!==this.currentFrame&&(this.loop&&this.onLoop&&(0<this.animationSpeed&&this.currentFrame<e?this.onLoop():0>this.animationSpeed&&this.currentFrame>e&&this.onLoop()),this.updateTexture())},u.prototype.updateTexture=function(){this._texture=this._textures[this.currentFrame],this._textureID=-1,this.onFrameChange&&this.onFrameChange(this.currentFrame)},u.prototype.destroy=function(t){this.stop(),d.prototype.destroy.call(this,t)},u.fromFrames=function(e){for(var t=[],r=0;r<e.length;++r)t.push(a.Texture.fromFrame(e[r]));return new u(t)},u.fromImages=function(e){for(var t=[],r=0;r<e.length;++r)t.push(a.Texture.fromImage(e[r]));return new u(t)},o(u,[{key:'totalFrames',get:function(){return this._textures.length}},{key:'textures',get:function(){return this._textures},set:function(r){if(r[0]instanceof a.Texture)this._textures=r,this._durations=null;else{this._textures=[],this._durations=[];for(var t=0;t<r.length;t++)this._textures.push(r[t].texture),this._durations.push(r[t].time)}this.gotoAndStop(0),this.updateTexture()}},{key:'currentFrame',get:function(){var e=k(this._currentTime)%this._textures.length;return 0>e&&(e+=this._textures.length),e}}]),u}(a.Sprite);e.default=u},{"../core":65}],135:[function(g,t,e){function r(e){return e&&e.__esModule?e:{default:e}}function m(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}function i(r,n){if(!r)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==('undefined'==typeof n?'undefined':z(n))||'function'==typeof n)?n:r}function n(r,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+('undefined'==typeof n?'undefined':z(n)));r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(r,n):r.__proto__=n)}e.__esModule=!0;var o=function(){function a(a,o){for(var e=0,r;e<o.length;e++)r=o[e],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}return function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}}(),a=g('../core'),_=function(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t.default=n,t}(a),s=g('../core/math/ObservablePoint'),l=r(s),u=g('../core/settings'),h=r(u),d=function(a){function x(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};m(this,x);var r=i(this,a.call(this));return r._textWidth=0,r._textHeight=0,r._glyphs=[],r._font={tint:void 0===t.tint?16777215:t.tint,align:t.align||'left',name:null,size:0},r.font=t.font,r._text=e,r._maxWidth=0,r._maxLineHeight=0,r._anchor=new l.default(function(){r.dirty=!0},r,0,0),r.dirty=!1,r.updateText(),r}return n(x,a),x.prototype.updateText=function(){for(var e=x.fonts[this._font.name],t=this._font.size/e.size,r=new _.Point,n=[],i=[],o=null,s=0,a=0,u=0,h=-1,c=0,d=0,f=0,p=0,v;p<this.text.length;p++)if(v=this.text.charCodeAt(p),/(\s)/.test(this.text.charAt(p))&&(h=p,c=s),/(?:\r\n|\r|\n)/.test(this.text.charAt(p)))i.push(s),a=P(a,s),u++,r.x=0,r.y+=e.lineHeight,o=null;else if(-1!==h&&0<this._maxWidth&&r.x*t>this._maxWidth)_.utils.removeItems(n,h-d,p-h),p=h,h=-1,++d,i.push(c),a=P(a,c),u++,r.x=0,r.y+=e.lineHeight,o=null;else{var C=e.chars[v];C&&(o&&C.kerning[o]&&(r.x+=C.kerning[o]),n.push({texture:C.texture,line:u,charCode:v,position:new _.Point(r.x+C.xOffset,r.y+C.yOffset)}),s=r.x+(C.texture.width+C.xOffset),r.x+=C.xAdvance,f=P(f,C.yOffset+C.texture.height),o=v)}i.push(s),a=P(a,s);for(var g=[],m=0,M;m<=u;m++)M=0,'right'===this._font.align?M=a-i[m]:'center'===this._font.align&&(M=(a-i[m])/2),g.push(M);for(var b=n.length,R=this.tint,T=0,w;T<b;T++)w=this._glyphs[T],w?w.texture=n[T].texture:(w=new _.Sprite(n[T].texture),this._glyphs.push(w)),w.position.x=(n[T].position.x+g[n[T].line])*t,w.position.y=n[T].position.y*t,w.scale.x=w.scale.y=t,w.tint=R,w.parent||this.addChild(w);for(var E=b;E<this._glyphs.length;++E)this.removeChild(this._glyphs[E]);if(this._textWidth=a*t,this._textHeight=(r.y+e.lineHeight)*t,0!==this.anchor.x||0!==this.anchor.y)for(var S=0;S<b;S++)this._glyphs[S].x-=this._textWidth*this.anchor.x,this._glyphs[S].y-=this._textHeight*this.anchor.y;this._maxLineHeight=f*t},x.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},x.prototype.getLocalBounds=function(){return this.validate(),a.prototype.getLocalBounds.call(this)},x.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},x.registerFont=function(e,t){var r={},n=e.getElementsByTagName('info')[0],i=e.getElementsByTagName('common')[0],o=t.baseTexture.resolution||h.default.RESOLUTION;r.font=n.getAttribute('face'),r.size=parseInt(n.getAttribute('size'),10),r.lineHeight=parseInt(i.getAttribute('lineHeight'),10)/o,r.chars={};for(var s=e.getElementsByTagName('char'),a=0;a<s.length;a++){var u=s[a],l=parseInt(u.getAttribute('id'),10),c=new _.Rectangle(parseInt(u.getAttribute('x'),10)/o+t.frame.x/o,parseInt(u.getAttribute('y'),10)/o+t.frame.y/o,parseInt(u.getAttribute('width'),10)/o,parseInt(u.getAttribute('height'),10)/o);r.chars[l]={xOffset:parseInt(u.getAttribute('xoffset'),10)/o,yOffset:parseInt(u.getAttribute('yoffset'),10)/o,xAdvance:parseInt(u.getAttribute('xadvance'),10)/o,kerning:{},texture:new _.Texture(t.baseTexture,c)}}for(var d=e.getElementsByTagName('kerning'),p=0;p<d.length;p++){var f=d[p],y=parseInt(f.getAttribute('first'),10)/o,g=parseInt(f.getAttribute('second'),10)/o,m=parseInt(f.getAttribute('amount'),10)/o;r.chars[g]&&(r.chars[g].kerning[y]=m)}return x.fonts[r.font]=r,r},o(x,[{key:'tint',get:function(){return this._font.tint},set:function(e){this._font.tint='number'==typeof e&&0<=e?e:16777215,this.dirty=!0}},{key:'align',get:function(){return this._font.align},set:function(e){this._font.align=e||'left',this.dirty=!0}},{key:'anchor',get:function(){return this._anchor},set:function(e){'number'==typeof e?this._anchor.set(e):this._anchor.copy(e)}},{key:'font',get:function(){return this._font},set:function(e){e&&('string'==typeof e?(e=e.split(' '),this._font.name=1===e.length?e[0]:e.slice(1).join(' '),this._font.size=2<=e.length?parseInt(e[0],10):x.fonts[this._font.name].size):(this._font.name=e.name,this._font.size='number'==typeof e.size?e.size:parseInt(e.size,10)),this.dirty=!0)}},{key:'text',get:function(){return this._text},set:function(e){e=e.toString()||' ',this._text!==e&&(this._text=e,this.dirty=!0)}},{key:'maxWidth',get:function(){return this._maxWidth},set:function(e){this._maxWidth!==e&&(this._maxWidth=e,this.dirty=!0)}},{key:'maxLineHeight',get:function(){return this.validate(),this._maxLineHeight}},{key:'textWidth',get:function(){return this.validate(),this._textWidth}},{key:'textHeight',get:function(){return this.validate(),this._textHeight}}]),x}(_.Container);e.default=d,d.fonts={}},{"../core":65,"../core/math/ObservablePoint":68,"../core/settings":101}],136:[function(d,t,e){function l(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}e.__esModule=!0;var r=function(){function a(a,o){for(var e=0,r;e<o.length;e++)r=o[e],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}return function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}}(),n=d('../core/math/Matrix'),o=function(e){return e&&e.__esModule?e:{default:e}}(n),p=new o.default,a=function(){function n(t,e){l(this,n),this._texture=t,this.mapCoord=new o.default,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._lastTextureID=-1,this.clampOffset=0,this.clampMargin=void 0===e?.5:e}return n.prototype.multiplyUvs=function(a,t){void 0===t&&(t=a);for(var e=this.mapCoord,r=0;r<a.length;r+=2){var n=a[r],i=a[r+1];t[r]=n*e.a+i*e.c+e.tx,t[r+1]=n*e.b+i*e.d+e.ty}return t},n.prototype.update=function(a){var d=this._texture;if(!d||!d.valid)return!1;if(!a&&this._lastTextureID===d._updateID)return!1;this._lastTextureID=d._updateID;var l=d._uvs;this.mapCoord.set(l.x1-l.x0,l.y1-l.y0,l.x3-l.x0,l.y3-l.y0,l.x0,l.y0);var r=d.orig,n=d.trim;n&&(p.set(r.width/n.width,0,0,r.height/n.height,-n.x/n.width,-n.y/n.height),this.mapCoord.append(p));var i=d.baseTexture,o=this.uClampFrame,s=this.clampMargin/i.resolution,u=this.clampOffset;return o[0]=(d._frame.x+s+u)/i.width,o[1]=(d._frame.y+s+u)/i.height,o[2]=(d._frame.x+d._frame.width-s+u)/i.width,o[3]=(d._frame.y+d._frame.height-s+u)/i.height,this.uClampOffset[0]=u/i.realWidth,this.uClampOffset[1]=u/i.realHeight,!0},r(n,[{key:'texture',get:function(){return this._texture},set:function(e){this._texture=e,this._lastTextureID=-1}}]),n}();e.default=a},{"../core/math/Matrix":67}],137:[function(g,t,e){function r(e){return e&&e.__esModule?e:{default:e}}function m(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}function i(r,n){if(!r)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==('undefined'==typeof n?'undefined':z(n))||'function'==typeof n)?n:r}function n(r,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+('undefined'==typeof n?'undefined':z(n)));r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(r,n):r.__proto__=n)}e.__esModule=!0;var o=function(){function a(a,o){for(var e=0,r;e<o.length;e++)r=o[e],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}return function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}}(),a=g('../core'),u=function(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t.default=n,t}(a),s=g('../core/sprites/canvas/CanvasTinter'),h=r(s),l=g('./TextureTransform'),d=r(l),c=new u.Point,p=function(l){function p(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:100,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:100;m(this,p);var n=i(this,l.call(this,e));return n.tileTransform=new u.TransformStatic,n._width=t,n._height=r,n._canvasPattern=null,n.uvTransform=e.transform||new d.default(e),n.pluginName='tilingSprite',n.uvRespectAnchor=!1,n}return n(p,l),p.prototype._onTextureUpdate=function(){this.uvTransform&&(this.uvTransform.texture=this._texture)},p.prototype._renderWebGL=function(r){var t=this._texture;t&&t.valid&&(this.tileTransform.updateLocalTransform(),this.uvTransform.update(),r.setObjectRenderer(r.plugins[this.pluginName]),r.plugins[this.pluginName].render(this))},p.prototype._renderCanvas=function(p){var t=this._texture;if(t.baseTexture.hasLoaded){var e=p.context,r=this.worldTransform,n=p.resolution,i=t.baseTexture,o=i.resolution,s=this.tilePosition.x/this.tileScale.x%t._frame.width*o,c=this.tilePosition.y/this.tileScale.y%t._frame.height*o;if(!this._canvasPattern){var g=new u.CanvasRenderTarget(t._frame.width,t._frame.height,o);16777215===this.tint?g.context.drawImage(i.source,-t._frame.x*o,-t._frame.y*o):(this.cachedTint!==this.tint&&(this.cachedTint=this.tint,this.tintedTexture=h.default.getTintedTexture(this,this.tint)),g.context.drawImage(this.tintedTexture,0,0)),this._canvasPattern=g.context.createPattern(g.canvas,'repeat')}e.globalAlpha=this.worldAlpha,e.setTransform(r.a*n,r.b*n,r.c*n,r.d*n,r.tx*n,r.ty*n),p.setBlendMode(this.blendMode),e.fillStyle=this._canvasPattern,e.scale(this.tileScale.x/o,this.tileScale.y/o);var l=this.anchor.x*-this._width,d=this.anchor.y*-this._height;this.uvRespectAnchor?(e.translate(s,c),e.fillRect(-s+l,-c+d,this._width/this.tileScale.x*o,this._height/this.tileScale.y*o)):(e.translate(s+l,c+d),e.fillRect(-s,-c,this._width/this.tileScale.x*o,this._height/this.tileScale.y*o))}},p.prototype._calculateBounds=function(){var a=this._width*-this._anchor._x,t=this._height*-this._anchor._y,e=this._width*(1-this._anchor._x),r=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,a,t,e,r)},p.prototype.getLocalBounds=function(t){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._x),t||(this._localBoundsRect||(this._localBoundsRect=new u.Rectangle),t=this._localBoundsRect),this._bounds.getRectangle(t)):l.prototype.getLocalBounds.call(this,t)},p.prototype.containsPoint=function(a){this.worldTransform.applyInverse(a,c);var t=this._width,o=this._height,s=-t*this.anchor._x;if(c.x>=s&&c.x<s+t){var n=-o*this.anchor._y;if(c.y>=n&&c.y<n+o)return!0}return!1},p.prototype.destroy=function(t){l.prototype.destroy.call(this,t),this.tileTransform=null,this.uvTransform=null},p.from=function(e,t,r){return new p(u.Texture.from(e),t,r)},p.fromFrame=function(e,t,r){var n=u.utils.TextureCache[e];if(!n)throw new Error('The frameId "'+e+'" does not exist in the texture cache '+this);return new p(n,t,r)},p.fromImage=function(e,t,r,n,a){return new p(u.Texture.fromImage(e,n,a),t,r)},o(p,[{key:'clampMargin',get:function(){return this.uvTransform.clampMargin},set:function(e){this.uvTransform.clampMargin=e,this.uvTransform.update(!0)}},{key:'tileScale',get:function(){return this.tileTransform.scale},set:function(e){this.tileTransform.scale.copy(e)}},{key:'tilePosition',get:function(){return this.tileTransform.position},set:function(e){this.tileTransform.position.copy(e)}},{key:'width',get:function(){return this._width},set:function(e){this._width=e}},{key:'height',get:function(){return this._height},set:function(e){this._height=e}}]),p}(u.Sprite);e.default=p},{"../core":65,"../core/sprites/canvas/CanvasTinter":104,"./TextureTransform":136}],138:[function(e){function t(e){return e&&e.__esModule?e:{default:e}}function r(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}var n=e('../core'),g=function(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t.default=n,t}(n),o=e('../core/textures/Texture'),s=t(o),a=e('../core/textures/BaseTexture'),u=t(a),l=e('../core/utils'),i=g.DisplayObject,c=new g.Matrix;i.prototype._cacheAsBitmap=!1,i.prototype._cacheData=!1;var d=function e(){r(this,e),this.textureCacheId=null,this.originalRenderWebGL=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalHitTest=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.sprite=null};Object.defineProperties(i.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(r){if(this._cacheAsBitmap!==r){this._cacheAsBitmap=r;var t;r?(this._cacheData||(this._cacheData=new d),t=this._cacheData,t.originalRenderWebGL=this.renderWebGL,t.originalRenderCanvas=this.renderCanvas,t.originalUpdateTransform=this.updateTransform,t.originalCalculateBounds=this._calculateBounds,t.originalGetLocalBounds=this.getLocalBounds,t.originalDestroy=this.destroy,t.originalContainsPoint=this.containsPoint,t.originalMask=this._mask,t.originalFilterArea=this.filterArea,this.renderWebGL=this._renderCachedWebGL,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(t=this._cacheData,t.sprite&&this._destroyCachedDisplayObject(),this.renderWebGL=t.originalRenderWebGL,this.renderCanvas=t.originalRenderCanvas,this._calculateBounds=t.originalCalculateBounds,this.getLocalBounds=t.originalGetLocalBounds,this.destroy=t.originalDestroy,this.updateTransform=t.originalUpdateTransform,this.containsPoint=t.originalContainsPoint,this._mask=t.originalMask,this.filterArea=t.originalFilterArea)}}}}),i.prototype._renderCachedWebGL=function(e){this.visible&&!(0>=this.worldAlpha)&&this.renderable&&(this._initCachedDisplayObject(e),this._cacheData.sprite._transformID=-1,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderWebGL(e))},i.prototype._initCachedDisplayObject=function(f){if(!this._cacheData||!this._cacheData.sprite){var t=this.alpha;this.alpha=1,f.currentRenderer.flush();var e=this.getLocalBounds().clone();if(this._filters){var r=this._filters[0].padding;e.pad(r)}var n=f._activeRenderTarget,i=f.filterManager.filterStack,o=g.RenderTexture.create(0|e.width,0|e.height),a='cacheAsBitmap_'+(0,l.uid)();this._cacheData.textureCacheId=a,u.default.addToCache(o.baseTexture,a),s.default.addToCache(o,a);var h=c;h.tx=-e.x,h.ty=-e.y,this.transform.worldTransform.identity(),this.renderWebGL=this._cacheData.originalRenderWebGL,f.render(this,o,!0,h,!0),f.bindRenderTarget(n),f.filterManager.filterStack=i,this.renderWebGL=this._renderCachedWebGL,this.updateTransform=this.displayObjectUpdateTransform,this._mask=null,this.filterArea=null;var d=new g.Sprite(o);d.transform.worldTransform=this.transform.worldTransform,d.anchor.x=-e.x/e.width,d.anchor.y=-e.y/e.height,d.alpha=t,d._bounds=this._bounds,this._calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._cacheData.sprite=d,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=f._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=d.containsPoint.bind(d)}},i.prototype._renderCachedCanvas=function(e){this.visible&&!(0>=this.worldAlpha)&&this.renderable&&(this._initCachedDisplayObjectCanvas(e),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite.renderCanvas(e))},i.prototype._initCachedDisplayObjectCanvas=function(d){if(!this._cacheData||!this._cacheData.sprite){var t=this.getLocalBounds(),e=this.alpha;this.alpha=1;var r=d.context,n=g.RenderTexture.create(0|t.width,0|t.height),i='cacheAsBitmap_'+(0,l.uid)();this._cacheData.textureCacheId=i,u.default.addToCache(n.baseTexture,i),s.default.addToCache(n,i);var o=c;this.transform.localTransform.copy(o),o.invert(),o.tx-=t.x,o.ty-=t.y,this.renderCanvas=this._cacheData.originalRenderCanvas,d.render(this,n,!0,o,!1),d.context=r,this.renderCanvas=this._renderCachedCanvas,this._calculateBounds=this._calculateCachedBounds,this._mask=null,this.filterArea=null;var a=new g.Sprite(n);a.transform.worldTransform=this.transform.worldTransform,a.anchor.x=-t.x/t.width,a.anchor.y=-t.y/t.height,a._bounds=this._bounds,a.alpha=e,this.parent?this.updateTransform():(this.parent=d._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.updateTransform=this.displayObjectUpdateTransform,this._cacheData.sprite=a,this.containsPoint=a.containsPoint.bind(a)}},i.prototype._calculateCachedBounds=function(){this._cacheData.sprite._calculateBounds()},i.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds()},i.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,u.default.removeFromCache(this._cacheData.textureCacheId),s.default.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},i.prototype._cacheAsBitmapDestroy=function(e){this.cacheAsBitmap=!1,this.destroy(e)}},{"../core":65,"../core/textures/BaseTexture":112,"../core/textures/Texture":115,"../core/utils":124}],139:[function(e){var t=e('../core'),r=function(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t.default=n,t}(t);r.DisplayObject.prototype.name=null,r.Container.prototype.getChildByName=function(r){for(var t=0;t<this.children.length;t++)if(this.children[t].name===r)return this.children[t];return null}},{"../core":65}],140:[function(e){var t=e('../core'),r=function(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t.default=n,t}(t);r.DisplayObject.prototype.getGlobalPosition=function(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new r.Point,t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return this.parent?this.parent.toGlobal(this.position,n,t):(n.x=this.position.x,n.y=this.position.y),n}},{"../core":65}],141:[function(d,t,e){function r(e){return e&&e.__esModule?e:{default:e}}e.__esModule=!0,e.BitmapText=e.TilingSpriteRenderer=e.TilingSprite=e.TextureTransform=e.AnimatedSprite=void 0;var n=d('./AnimatedSprite');Object.defineProperty(e,'AnimatedSprite',{enumerable:!0,get:function(){return r(n).default}});var i=d('./TextureTransform');Object.defineProperty(e,'TextureTransform',{enumerable:!0,get:function(){return r(i).default}});var o=d('./TilingSprite');Object.defineProperty(e,'TilingSprite',{enumerable:!0,get:function(){return r(o).default}});var s=d('./webgl/TilingSpriteRenderer');Object.defineProperty(e,'TilingSpriteRenderer',{enumerable:!0,get:function(){return r(s).default}});var a=d('./BitmapText');Object.defineProperty(e,'BitmapText',{enumerable:!0,get:function(){return r(a).default}}),d('./cacheAsBitmap'),d('./getChildByName'),d('./getGlobalPosition')},{"./AnimatedSprite":134,"./BitmapText":135,"./TextureTransform":136,"./TilingSprite":137,"./cacheAsBitmap":138,"./getChildByName":139,"./getGlobalPosition":140,"./webgl/TilingSpriteRenderer":142}],142:[function(d,t,e){function p(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}function n(r,n){if(!r)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==('undefined'==typeof n?'undefined':z(n))||'function'==typeof n)?n:r}function r(r,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+('undefined'==typeof n?'undefined':z(n)));r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(r,n):r.__proto__=n)}e.__esModule=!0;var o=d('../../core'),g=function(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t.default=n,t}(o),a=d('../../core/const'),u=(d('path'),new g.Matrix),i=function(i){function t(e){p(this,t);var r=n(this,i.call(this,e));return r.shader=null,r.simpleShader=null,r.quad=null,r}return r(t,i),t.prototype.onContextChange=function(){var e=this.renderer.gl;this.shader=new g.Shader(e,'attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n','varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = mod(vTextureCoord - uClampOffset, vec2(1.0, 1.0)) + uClampOffset;\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 sample = texture2D(uSampler, coord);\n    gl_FragColor = sample * uColor;\n}\n'),this.simpleShader=new g.Shader(e,'attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n','varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = sample * uColor;\n}\n'),this.renderer.bindVao(null),this.quad=new g.Quad(e,this.renderer.state.attribState),this.quad.initVao(this.shader)},t.prototype.render=function(h){var t=this.renderer,e=this.quad;t.bindVao(e.vao);var r=e.vertices;r[0]=r[6]=h._width*-h.anchor.x,r[1]=r[3]=h._height*-h.anchor.y,r[2]=r[4]=h._width*(1-h.anchor.x),r[5]=r[7]=h._height*(1-h.anchor.y),h.uvRespectAnchor&&(r=e.uvs,r[0]=r[6]=-h.anchor.x,r[1]=r[3]=-h.anchor.y,r[2]=r[4]=1-h.anchor.x,r[5]=r[7]=1-h.anchor.y),e.upload();var n=h._texture,i=n.baseTexture,o=h.tileTransform.localTransform,s=h.uvTransform,l=i.isPowerOfTwo&&n.frame.width===i.width&&n.frame.height===i.height;l&&(i._glTextures[t.CONTEXT_UID]?l=i.wrapMode!==a.WRAP_MODES.CLAMP:i.wrapMode===a.WRAP_MODES.CLAMP&&(i.wrapMode=a.WRAP_MODES.REPEAT));var c=l?this.simpleShader:this.shader;t.bindShader(c);var d=n.width,f=n.height,p=h._width,m=h._height;u.set(o.a*d/p,o.b*d/m,o.c*f/p,o.d*f/m,o.tx/p,o.ty/m),u.invert(),l?u.prepend(s.mapCoord):(c.uniforms.uMapCoord=s.mapCoord.toArray(!0),c.uniforms.uClampFrame=s.uClampFrame,c.uniforms.uClampOffset=s.uClampOffset),c.uniforms.uTransform=u.toArray(!0),c.uniforms.uColor=g.utils.premultiplyTintToRgba(h.tint,h.worldAlpha,c.uniforms.uColor,i.premultipliedAlpha),c.uniforms.translationMatrix=h.transform.worldTransform.toArray(!0),c.uniforms.uSampler=t.bindTexture(n),t.setBlendMode(g.utils.correctBlendMode(h.blendMode,i.premultipliedAlpha)),e.vao.draw(this.renderer.gl.TRIANGLES,6,0)},t}(g.ObjectRenderer);e.default=i,g.WebGLRenderer.registerPlugin('tilingSprite',i)},{"../../core":65,"../../core/const":46,path:8}],143:[function(g,t,e){function r(e){return e&&e.__esModule?e:{default:e}}function m(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}function i(r,n){if(!r)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==('undefined'==typeof n?'undefined':z(n))||'function'==typeof n)?n:r}function n(r,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+('undefined'==typeof n?'undefined':z(n)));r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(r,n):r.__proto__=n)}e.__esModule=!0;var o=function(){function a(a,o){for(var e=0,r;e<o.length;e++)r=o[e],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}return function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}}(),a=g('../../core'),_=function(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t.default=n,t}(a),s=g('./BlurXFilter'),l=r(s),u=g('./BlurYFilter'),d=r(u),c=function(p){function t(e,r,n,o){m(this,t);var a=i(this,p.call(this));return a.blurXFilter=new l.default(e,r,n,o),a.blurYFilter=new d.default(e,r,n,o),a.padding=0,a.resolution=n||_.settings.RESOLUTION,a.quality=r||4,a.blur=e||8,a}return n(t,p),t.prototype.apply=function(a,t,e){var r=a.getRenderTarget(!0);this.blurXFilter.apply(a,t,r,!0),this.blurYFilter.apply(a,r,e,!1),a.returnRenderTarget(r)},o(t,[{key:'blur',get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.padding=2*P(W(this.blurXFilter.strength),W(this.blurYFilter.strength))}},{key:'quality',get:function(){return this.blurXFilter.quality},set:function(e){this.blurXFilter.quality=this.blurYFilter.quality=e}},{key:'blurX',get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=e,this.padding=2*P(W(this.blurXFilter.strength),W(this.blurYFilter.strength))}},{key:'blurY',get:function(){return this.blurYFilter.blur},set:function(e){this.blurYFilter.blur=e,this.padding=2*P(W(this.blurXFilter.strength),W(this.blurYFilter.strength))}},{key:'blendMode',get:function(){return this.blurYFilter._blendMode},set:function(e){this.blurYFilter._blendMode=e}}]),t}(_.Filter);e.default=c},{"../../core":65,"./BlurXFilter":144,"./BlurYFilter":145}],144:[function(g,t,e){function r(e){return e&&e.__esModule?e:{default:e}}function m(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}function i(r,n){if(!r)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==('undefined'==typeof n?'undefined':z(n))||'function'==typeof n)?n:r}function n(r,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+('undefined'==typeof n?'undefined':z(n)));r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(r,n):r.__proto__=n)}e.__esModule=!0;var o=function(){function a(a,o){for(var e=0,r;e<o.length;e++)r=o[e],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}return function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}}(),a=g('../../core'),_=function(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t.default=n,t}(a),s=g('./generateBlurVertSource'),h=r(s),l=g('./generateBlurFragSource'),c=r(l),d=g('./getMaxBlurKernelSize'),u=r(d),p=function(p){function t(e,r,n,o){m(this,t),o=o||5;var a=(0,h.default)(o,!0),s=(0,c.default)(o),l=i(this,p.call(this,a,s));return l.resolution=n||_.settings.RESOLUTION,l._quality=0,l.quality=r||4,l.strength=e||8,l.firstRun=!0,l}return n(t,p),t.prototype.apply=function(d,t,e,r){if(this.firstRun){var n=d.renderer.gl,i=(0,u.default)(n);this.vertexSrc=(0,h.default)(i,!0),this.fragmentSrc=(0,c.default)(i),this.firstRun=!1}if(this.uniforms.strength=1/e.size.width*(e.size.width/t.size.width),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)d.applyFilter(this,t,e,r);else{for(var o=d.getRenderTarget(!0),s=t,a=o,p=0;p<this.passes-1;p++){d.applyFilter(this,s,a,!0);var f=a;a=s,s=f}d.applyFilter(this,s,e,r),d.returnRenderTarget(o)}},o(t,[{key:'blur',get:function(){return this.strength},set:function(e){this.padding=2*W(e),this.strength=e}},{key:'quality',get:function(){return this._quality},set:function(e){this._quality=e,this.passes=e}}]),t}(_.Filter);e.default=p},{"../../core":65,"./generateBlurFragSource":146,"./generateBlurVertSource":147,"./getMaxBlurKernelSize":148}],145:[function(g,t,e){function r(e){return e&&e.__esModule?e:{default:e}}function m(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}function i(r,n){if(!r)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==('undefined'==typeof n?'undefined':z(n))||'function'==typeof n)?n:r}function n(r,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+('undefined'==typeof n?'undefined':z(n)));r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(r,n):r.__proto__=n)}e.__esModule=!0;var o=function(){function a(a,o){for(var e=0,r;e<o.length;e++)r=o[e],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}return function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}}(),a=g('../../core'),_=function(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t.default=n,t}(a),s=g('./generateBlurVertSource'),h=r(s),l=g('./generateBlurFragSource'),c=r(l),d=g('./getMaxBlurKernelSize'),u=r(d),p=function(p){function t(e,r,n,o){m(this,t),o=o||5;var a=(0,h.default)(o,!1),s=(0,c.default)(o),l=i(this,p.call(this,a,s));return l.resolution=n||_.settings.RESOLUTION,l._quality=0,l.quality=r||4,l.strength=e||8,l.firstRun=!0,l}return n(t,p),t.prototype.apply=function(d,t,e,r){if(this.firstRun){var n=d.renderer.gl,i=(0,u.default)(n);this.vertexSrc=(0,h.default)(i,!1),this.fragmentSrc=(0,c.default)(i),this.firstRun=!1}if(this.uniforms.strength=1/e.size.height*(e.size.height/t.size.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)d.applyFilter(this,t,e,r);else{for(var o=d.getRenderTarget(!0),s=t,a=o,p=0;p<this.passes-1;p++){d.applyFilter(this,s,a,!0);var f=a;a=s,s=f}d.applyFilter(this,s,e,r),d.returnRenderTarget(o)}},o(t,[{key:'blur',get:function(){return this.strength},set:function(e){this.padding=2*W(e),this.strength=e}},{key:'quality',get:function(){return this._quality},set:function(e){this._quality=e,this.passes=e}}]),t}(_.Filter);e.default=p},{"../../core":65,"./generateBlurFragSource":146,"./generateBlurVertSource":147,"./getMaxBlurKernelSize":148}],146:[function(n,t,e){e.__esModule=!0,e.default=function(o){for(var t=a[o],e=t.length,r=i,n='',s=void 0,d=0,u;d<o;d++)u='gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;'.replace('%index%',d),s=d,d>=e&&(s=o-d-1),u=u.replace('%value%',t[s]),n+=u,n+='\n';return r=r.replace('%blur%',n),r=r.replace('%size%',o)};var a={5:[0.153388,0.221461,0.250301],7:[0.071303,0.131514,0.189879,0.214607],9:[0.028532,0.067234,0.124009,0.179044,0.20236],11:[0.0093,0.028002,0.065984,0.121703,0.175713,0.198596],13:[0.002406,0.009255,0.027867,0.065666,0.121117,0.174868,0.197641],15:[0.000489,0.002403,0.009246,0.02784,0.065602,0.120999,0.174697,0.197448]},i='varying vec2 vBlurTexCoords[%size%];\nuniform sampler2D uSampler;\nvoid main(void)\n{\n    gl_FragColor = vec4(0.0);\n    %blur%\n}'},{}],147:[function(n,t,e){e.__esModule=!0,e.default=function(i,t){var e=S(i/2),r=d,n='',o;o=t?'vBlurTexCoords[%index%] = aTextureCoord + vec2(%sampleIndex% * strength, 0.0);':'vBlurTexCoords[%index%] = aTextureCoord + vec2(0.0, %sampleIndex% * strength);';for(var s=0,a;s<i;s++)a=o.replace('%index%',s),a=a.replace('%sampleIndex%',s-(e-1)+'.0'),n+=a,n+='\n';return r=r.replace('%blur%',n),r=r.replace('%size%',i)};var d='attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nuniform float strength;\nuniform mat3 projectionMatrix;\nvarying vec2 vBlurTexCoords[%size%];\nvoid main(void)\n{\ngl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);\n%blur%\n}'},{}],148:[function(n,t,e){e.__esModule=!0,e.default=function(n){for(var t=n.getParameter(n.MAX_VARYING_VECTORS),e=15;e>t;)e-=2;return e}},{}],149:[function(d,t,e){function l(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}function n(r,n){if(!r)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==('undefined'==typeof n?'undefined':z(n))||'function'==typeof n)?n:r}function r(r,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+('undefined'==typeof n?'undefined':z(n)));r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(r,n):r.__proto__=n)}e.__esModule=!0;var o=function(){function a(a,o){for(var e=0,r;e<o.length;e++)r=o[e],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}return function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}}(),i=d('../../core'),a=function(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t.default=n,t}(i),s=(d('path'),function(a){function t(){l(this,t);var e=n(this,a.call(this,'attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}','varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n'));return e.uniforms.m=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],e.alpha=1,e}return r(t,a),t.prototype._loadMatrix=function(n){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],e=n;t&&(this._multiply(e,this.uniforms.m,n),e=this._colorMatrix(e)),this.uniforms.m=e},t.prototype._multiply=function(n,t,e){return n[0]=t[0]*e[0]+t[1]*e[5]+t[2]*e[10]+t[3]*e[15],n[1]=t[0]*e[1]+t[1]*e[6]+t[2]*e[11]+t[3]*e[16],n[2]=t[0]*e[2]+t[1]*e[7]+t[2]*e[12]+t[3]*e[17],n[3]=t[0]*e[3]+t[1]*e[8]+t[2]*e[13]+t[3]*e[18],n[4]=t[0]*e[4]+t[1]*e[9]+t[2]*e[14]+t[3]*e[19]+t[4],n[5]=t[5]*e[0]+t[6]*e[5]+t[7]*e[10]+t[8]*e[15],n[6]=t[5]*e[1]+t[6]*e[6]+t[7]*e[11]+t[8]*e[16],n[7]=t[5]*e[2]+t[6]*e[7]+t[7]*e[12]+t[8]*e[17],n[8]=t[5]*e[3]+t[6]*e[8]+t[7]*e[13]+t[8]*e[18],n[9]=t[5]*e[4]+t[6]*e[9]+t[7]*e[14]+t[8]*e[19]+t[9],n[10]=t[10]*e[0]+t[11]*e[5]+t[12]*e[10]+t[13]*e[15],n[11]=t[10]*e[1]+t[11]*e[6]+t[12]*e[11]+t[13]*e[16],n[12]=t[10]*e[2]+t[11]*e[7]+t[12]*e[12]+t[13]*e[17],n[13]=t[10]*e[3]+t[11]*e[8]+t[12]*e[13]+t[13]*e[18],n[14]=t[10]*e[4]+t[11]*e[9]+t[12]*e[14]+t[13]*e[19]+t[14],n[15]=t[15]*e[0]+t[16]*e[5]+t[17]*e[10]+t[18]*e[15],n[16]=t[15]*e[1]+t[16]*e[6]+t[17]*e[11]+t[18]*e[16],n[17]=t[15]*e[2]+t[16]*e[7]+t[17]*e[12]+t[18]*e[17],n[18]=t[15]*e[3]+t[16]*e[8]+t[17]*e[13]+t[18]*e[18],n[19]=t[15]*e[4]+t[16]*e[9]+t[17]*e[14]+t[18]*e[19]+t[19],n},t.prototype._colorMatrix=function(r){var t=new Float32Array(r);return t[4]/=255,t[9]/=255,t[14]/=255,t[19]/=255,t},t.prototype.brightness=function(r,t){this._loadMatrix([r,0,0,0,0,0,r,0,0,0,0,0,r,0,0,0,0,0,1,0],t)},t.prototype.greyscale=function(r,t){this._loadMatrix([r,r,r,0,0,r,r,r,0,0,r,r,r,0,0,0,0,0,1,0],t)},t.prototype.blackAndWhite=function(e){this._loadMatrix([0.3,0.6,0.1,0,0,0.3,0.6,0.1,0,0,0.3,0.6,0.1,0,0,0,0,0,1,0],e)},t.prototype.hue=function(a,t){a=(a||0)/180*C;var e=E(a),r=T(a),n=1/3,o=H(n);this._loadMatrix([e+(1-e)*n,n*(1-e)-o*r,n*(1-e)+o*r,0,0,n*(1-e)+o*r,e+n*(1-e),n*(1-e)-o*r,0,0,n*(1-e)-o*r,n*(1-e)+o*r,e+n*(1-e),0,0,0,0,0,1,0],t)},t.prototype.contrast=function(a,t){var e=(a||0)+1,r=-.5*(e-1);this._loadMatrix([e,0,0,0,r,0,e,0,0,r,0,0,e,0,r,0,0,0,1,0],t)},t.prototype.saturate=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=arguments[1],e=2*a/3+1,r=-.5*(e-1);this._loadMatrix([e,r,r,0,0,r,e,r,0,0,r,r,e,0,0,0,0,0,1,0],t)},t.prototype.desaturate=function(){this.saturate(-1)},t.prototype.negative=function(e){this._loadMatrix([0,1,1,0,0,1,0,1,0,0,1,1,0,0,0,0,0,0,1,0],e)},t.prototype.sepia=function(e){this._loadMatrix([0.393,0.7689999,0.18899999,0,0,0.349,0.6859999,0.16799999,0,0,0.272,0.5339999,0.13099999,0,0,0,0,0,1,0],e)},t.prototype.technicolor=function(e){this._loadMatrix([1.9125277891456083,-0.8545344976951645,-0.09155508482755585,0,11.793603434377337,-0.3087833385928097,1.7658908555458428,-0.10601743074722245,0,-70.35205161461398,-0.231103377548616,-0.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],e)},t.prototype.polaroid=function(e){this._loadMatrix([1.438,-0.062,-0.062,0,0,-0.122,1.378,-0.122,0,0,-0.016,-0.016,1.483,0,0,0,0,0,1,0],e)},t.prototype.toBGR=function(e){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],e)},t.prototype.kodachrome=function(e){this._loadMatrix([1.1285582396593525,-0.3967382283601348,-0.03992559172921793,0,63.72958762196502,-0.16404339962244616,1.0835251566291304,-0.05498805115633132,0,24.732407896706203,-0.16786010706155763,-0.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],e)},t.prototype.browni=function(e){this._loadMatrix([0.5997023498159715,0.34553243048391263,-0.2708298674538042,0,47.43192855600873,-0.037703249837783157,0.8609577587992641,0.15059552388459913,0,-36.96841498319127,0.24113635128153335,-0.07441037908422492,0.44972182064877153,0,-7.562075277591283,0,0,0,1,0],e)},t.prototype.vintage=function(e){this._loadMatrix([0.6279345635605994,0.3202183420819367,-0.03965408211312453,0,9.651285835294123,0.02578397704808868,0.6441188644374771,0.03259127616149294,0,7.462829176470591,0.0466055556782719,-0.0851232987247891,0.5241648018700465,0,5.159190588235296,0,0,0,1,0],e)},t.prototype.colorTone=function(d,t,e,r,n){d=d||.2,t=t||.15,e=e||16770432,r=r||3375104;var i=(255&e>>16)/255,o=(255&e>>8)/255,s=(255&e)/255,a=(255&r>>16)/255,u=(255&r>>8)/255,p=(255&r)/255,l=[.3,.59,.11,0,0,i,o,s,d,0,a,u,p,t,0,i-a,o-u,s-p,0,0];this._loadMatrix(l,n)},t.prototype.night=function(n,a){n=n||.1;var e=[-2*n,-n,0,0,0,-n,0,n,0,0,0,n,2*n,0,0,0,0,0,1,0];this._loadMatrix(e,a)},t.prototype.predator=function(r,t){this._loadMatrix([11.224130630493164*r,-4.794486999511719*r,-2.8746118545532227*r,0*r,.40342438220977783*r,-3.6330697536468506*r,9.193157196044922*r,-2.951810836791992*r,0*r,-1.316135048866272*r,-3.2184197902679443*r,-4.2375030517578125*r,7.476448059082031*r,0*r,.8044459223747253*r,0,0,0,1,0],t)},t.prototype.lsd=function(e){this._loadMatrix([2,-0.4,0.5,0,0,-0.5,2,-0.4,0,0,-0.4,-0.5,3,0,0,0,0,0,1,0],e)},t.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},o(t,[{key:'matrix',get:function(){return this.uniforms.m},set:function(e){this.uniforms.m=e}},{key:'alpha',get:function(){return this.uniforms.uAlpha},set:function(e){this.uniforms.uAlpha=e}}]),t}(a.Filter));e.default=s,s.prototype.grayscale=s.prototype.greyscale},{"../../core":65,path:8}],150:[function(d,t,e){function l(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}function n(r,n){if(!r)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==('undefined'==typeof n?'undefined':z(n))||'function'==typeof n)?n:r}function r(r,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+('undefined'==typeof n?'undefined':z(n)));r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(r,n):r.__proto__=n)}e.__esModule=!0;var o=function(){function a(a,o){for(var e=0,r;e<o.length;e++)r=o[e],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}return function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}}(),i=d('../../core'),p=function(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t.default=n,t}(i),a=(d('path'),function(i){function t(e,r){l(this,t);var o=new p.Matrix;e.renderable=!1;var s=n(this,i.call(this,'attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nvoid main(void)\n{\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vTextureCoord = aTextureCoord;\n}','varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\n\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n   vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n   map -= 0.5;\n   map.xy *= scale;\n\n   gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), filterClamp.xy, filterClamp.zw));\n}\n'));return s.maskSprite=e,s.maskMatrix=o,s.uniforms.mapSampler=e._texture,s.uniforms.filterMatrix=o,s.uniforms.scale={x:1,y:1},null!==r&&void 0!==r||(r=20),s.scale=new p.Point(r,r),s}return r(t,i),t.prototype.apply=function(a,t,e){var r=1/e.destinationFrame.width*(e.size.width/t.size.width);this.uniforms.filterMatrix=a.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x*r,this.uniforms.scale.y=this.scale.y*r,a.applyFilter(this,t,e)},o(t,[{key:'map',get:function(){return this.uniforms.mapSampler},set:function(e){this.uniforms.mapSampler=e}}]),t}(p.Filter));e.default=a},{"../../core":65,path:8}],151:[function(d,t,e){function r(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}function n(r,n){if(!r)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==('undefined'==typeof n?'undefined':z(n))||'function'==typeof n)?n:r}function i(r,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+('undefined'==typeof n?'undefined':z(n)));r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(r,n):r.__proto__=n)}e.__esModule=!0;var o=d('../../core'),s=function(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t.default=n,t}(o),a=(d('path'),function(a){function t(){return r(this,t),n(this,a.call(this,'\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform vec4 filterArea;\n\nvarying vec2 vTextureCoord;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    vec2 inverseVP = 1.0 / resolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n   vTextureCoord = aTextureCoord;\n\n   vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n   texcoords(fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}','varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n \n --\n \n From:\n https://github.com/mitsuhiko/webgl-meincraft\n \n Copyright (c) 2011 by Armin Ronacher.\n \n Some rights reserved.\n \n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n \n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n \n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n \n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n \n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n    \n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n    \n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n    \n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n    \n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n    \n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n      vec4 color;\n\n    color = fxaa(uSampler, fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n'))}return i(t,a),t}(s.Filter));e.default=a},{"../../core":65,path:8}],152:[function(d,t,e){function r(e){return e&&e.__esModule?e:{default:e}}e.__esModule=!0;var n=d('./fxaa/FXAAFilter');Object.defineProperty(e,'FXAAFilter',{enumerable:!0,get:function(){return r(n).default}});var i=d('./noise/NoiseFilter');Object.defineProperty(e,'NoiseFilter',{enumerable:!0,get:function(){return r(i).default}});var o=d('./displacement/DisplacementFilter');Object.defineProperty(e,'DisplacementFilter',{enumerable:!0,get:function(){return r(o).default}});var s=d('./blur/BlurFilter');Object.defineProperty(e,'BlurFilter',{enumerable:!0,get:function(){return r(s).default}});var a=d('./blur/BlurXFilter');Object.defineProperty(e,'BlurXFilter',{enumerable:!0,get:function(){return r(a).default}});var u=d('./blur/BlurYFilter');Object.defineProperty(e,'BlurYFilter',{enumerable:!0,get:function(){return r(u).default}});var p=d('./colormatrix/ColorMatrixFilter');Object.defineProperty(e,'ColorMatrixFilter',{enumerable:!0,get:function(){return r(p).default}});var l=d('./void/VoidFilter');Object.defineProperty(e,'VoidFilter',{enumerable:!0,get:function(){return r(l).default}})},{"./blur/BlurFilter":143,"./blur/BlurXFilter":144,"./blur/BlurYFilter":145,"./colormatrix/ColorMatrixFilter":149,"./displacement/DisplacementFilter":150,"./fxaa/FXAAFilter":151,"./noise/NoiseFilter":153,"./void/VoidFilter":154}],153:[function(d,t,e){function l(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}function n(r,n){if(!r)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==('undefined'==typeof n?'undefined':z(n))||'function'==typeof n)?n:r}function r(r,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+('undefined'==typeof n?'undefined':z(n)));r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(r,n):r.__proto__=n)}e.__esModule=!0;var o=function(){function a(a,o){for(var e=0,r;e<o.length;e++)r=o[e],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}return function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}}(),i=d('../../core'),a=function(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t.default=n,t}(i),s=(d('path'),function(a){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:.5,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Math.random();l(this,t);var o=n(this,a.call(this,'attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}','precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n'));return o.noise=e,o.seed=r,o}return r(t,a),o(t,[{key:'noise',get:function(){return this.uniforms.uNoise},set:function(e){this.uniforms.uNoise=e}},{key:'seed',get:function(){return this.uniforms.uSeed},set:function(e){this.uniforms.uSeed=e}}]),t}(a.Filter));e.default=s},{"../../core":65,path:8}],154:[function(d,t,e){function l(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}function n(r,n){if(!r)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==('undefined'==typeof n?'undefined':z(n))||'function'==typeof n)?n:r}function r(r,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+('undefined'==typeof n?'undefined':z(n)));r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(r,n):r.__proto__=n)}e.__esModule=!0;var o=d('../../core'),i=function(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t.default=n,t}(o),a=(d('path'),function(a){function t(){l(this,t);var e=n(this,a.call(this,'attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}','varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n'));return e.glShaderKey='void',e}return r(t,a),t}(i.Filter));e.default=a},{"../../core":65,path:8}],155:[function(d,t,e){function r(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}e.__esModule=!0;var n=function(){function a(a,o){for(var e=0,r;e<o.length;e++)r=o[e],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}return function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}}(),i=d('../core'),o=function(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t.default=n,t}(i),s=function(){function e(){r(this,e),this.global=new o.Point,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return e.prototype.getLocalPosition=function(n,t,e){return n.worldTransform.applyInverse(e||this.global,t)},e.prototype._copyEvent=function(e){e.isPrimary&&(this.isPrimary=!0),this.button=e.button,this.buttons=e.buttons,this.width=e.width,this.height=e.height,this.tiltX=e.tiltX,this.tiltY=e.tiltY,this.pointerType=e.pointerType,this.pressure=e.pressure,this.rotationAngle=e.rotationAngle,this.twist=e.twist||0,this.tangentialPressure=e.tangentialPressure||0},e.prototype._reset=function(){this.isPrimary=!1},n(e,[{key:'pointerId',get:function(){return this.identifier}}]),e}();e.default=s},{"../core":65}],156:[function(a,t,e){function r(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}e.__esModule=!0;var n=function(){function e(){r(this,e),this.stopped=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return e.prototype.stopPropagation=function(){this.stopped=!0},e.prototype._reset=function(){this.stopped=!1,this.currentTarget=null,this.target=null},e}();e.default=n},{}],157:[function(E,t,e){function r(e){return e&&e.__esModule?e:{default:e}}function S(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}function i(r,n){if(!r)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==('undefined'==typeof n?'undefined':z(n))||'function'==typeof n)?n:r}function n(r,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+('undefined'==typeof n?'undefined':z(n)));r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(r,n):r.__proto__=n)}e.__esModule=!0;var o='function'==typeof Symbol&&'symbol'==z(Symbol.iterator)?function(e){return'undefined'==typeof e?'undefined':z(e)}:function(e){return e&&'function'==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?'symbol':'undefined'==typeof e?'undefined':z(e)},a=E('../core'),u=function(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t.default=n,t}(a),s=E('./InteractionData'),l=r(s),c=E('./InteractionEvent'),d=r(c),h=E('./InteractionTrackingData'),p=r(h),f=E('eventemitter3'),y=r(f),g=E('./interactiveTarget'),m=r(g);u.utils.mixins.delayMixin(u.DisplayObject.prototype,m.default);var _='MOUSE',b={target:null,data:{global:null}},x=function(a){function t(e,r){S(this,t);var n=i(this,a.call(this));return r=r||{},n.renderer=e,n.autoPreventDefault=void 0===r.autoPreventDefault||r.autoPreventDefault,n.interactionFrequency=r.interactionFrequency||10,n.mouse=new l.default,n.mouse.identifier=_,n.mouse.global.set(-999999),n.activeInteractionData={},n.activeInteractionData[_]=n.mouse,n.interactionDataPool=[],n.eventData=new d.default,n.interactionDOMElement=null,n.moveWhenInside=!1,n.eventsAdded=!1,n.mouseOverRenderer=!1,n.supportsTouchEvents='ontouchstart'in window,n.supportsPointerEvents=!!window.PointerEvent,n.onPointerUp=n.onPointerUp.bind(n),n.processPointerUp=n.processPointerUp.bind(n),n.onPointerCancel=n.onPointerCancel.bind(n),n.processPointerCancel=n.processPointerCancel.bind(n),n.onPointerDown=n.onPointerDown.bind(n),n.processPointerDown=n.processPointerDown.bind(n),n.onPointerMove=n.onPointerMove.bind(n),n.processPointerMove=n.processPointerMove.bind(n),n.onPointerOut=n.onPointerOut.bind(n),n.processPointerOverOut=n.processPointerOverOut.bind(n),n.onPointerOver=n.onPointerOver.bind(n),n.cursorStyles={default:'inherit',pointer:'pointer'},n.currentCursorMode=null,n.cursor=null,n._tempPoint=new u.Point,n.resolution=1,n.setTargetElement(n.renderer.view,n.renderer.resolution),n}return n(t,a),t.prototype.hitTest=function(r,t){return b.target=null,b.data.global=r,t||(t=this.renderer._lastObjectRendered),this.processInteractive(b,t,null,!0),b.target},t.prototype.setTargetElement=function(r){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;this.removeEvents(),this.interactionDOMElement=r,this.resolution=t,this.addEvents()},t.prototype.addEvents=function(){this.interactionDOMElement&&(u.ticker.shared.add(this.update,this,u.UPDATE_PRIORITY.INTERACTION),window.navigator.msPointerEnabled?(this.interactionDOMElement.style['-ms-content-zooming']='none',this.interactionDOMElement.style['-ms-touch-action']='none'):this.supportsPointerEvents&&(this.interactionDOMElement.style['touch-action']='none'),this.supportsPointerEvents?(window.document.addEventListener('pointermove',this.onPointerMove,!0),this.interactionDOMElement.addEventListener('pointerdown',this.onPointerDown,!0),this.interactionDOMElement.addEventListener('pointerleave',this.onPointerOut,!0),this.interactionDOMElement.addEventListener('pointerover',this.onPointerOver,!0),window.addEventListener('pointercancel',this.onPointerCancel,!0),window.addEventListener('pointerup',this.onPointerUp,!0)):(window.document.addEventListener('mousemove',this.onPointerMove,!0),this.interactionDOMElement.addEventListener('mousedown',this.onPointerDown,!0),this.interactionDOMElement.addEventListener('mouseout',this.onPointerOut,!0),this.interactionDOMElement.addEventListener('mouseover',this.onPointerOver,!0),window.addEventListener('mouseup',this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener('touchstart',this.onPointerDown,!0),this.interactionDOMElement.addEventListener('touchcancel',this.onPointerCancel,!0),this.interactionDOMElement.addEventListener('touchend',this.onPointerUp,!0),this.interactionDOMElement.addEventListener('touchmove',this.onPointerMove,!0)),this.eventsAdded=!0)},t.prototype.removeEvents=function(){this.interactionDOMElement&&(u.ticker.shared.remove(this.update,this),window.navigator.msPointerEnabled?(this.interactionDOMElement.style['-ms-content-zooming']='',this.interactionDOMElement.style['-ms-touch-action']=''):this.supportsPointerEvents&&(this.interactionDOMElement.style['touch-action']=''),this.supportsPointerEvents?(window.document.removeEventListener('pointermove',this.onPointerMove,!0),this.interactionDOMElement.removeEventListener('pointerdown',this.onPointerDown,!0),this.interactionDOMElement.removeEventListener('pointerleave',this.onPointerOut,!0),this.interactionDOMElement.removeEventListener('pointerover',this.onPointerOver,!0),window.removeEventListener('pointercancel',this.onPointerCancel,!0),window.removeEventListener('pointerup',this.onPointerUp,!0)):(window.document.removeEventListener('mousemove',this.onPointerMove,!0),this.interactionDOMElement.removeEventListener('mousedown',this.onPointerDown,!0),this.interactionDOMElement.removeEventListener('mouseout',this.onPointerOut,!0),this.interactionDOMElement.removeEventListener('mouseover',this.onPointerOver,!0),window.removeEventListener('mouseup',this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener('touchstart',this.onPointerDown,!0),this.interactionDOMElement.removeEventListener('touchcancel',this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener('touchend',this.onPointerUp,!0),this.interactionDOMElement.removeEventListener('touchmove',this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1)},t.prototype.update=function(a){if(this._deltaTime+=a,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.interactionDOMElement)){if(this.didMove)return void(this.didMove=!1);for(var t in this.cursor=null,this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(t)){var e=this.activeInteractionData[t];if(e.originalEvent&&'touch'!==e.pointerType){var r=this.configureInteractionEventForDOMEvent(this.eventData,e.originalEvent,e);this.processInteractive(r,this.renderer._lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},t.prototype.setCursorMode=function(r){if(r=r||'default',this.currentCursorMode!==r){this.currentCursorMode=r;var n=this.cursorStyles[r];if(n)switch(void 0===n?'undefined':o(n)){case'string':this.interactionDOMElement.style.cursor=n;break;case'function':n(r);break;case'object':Object.assign(this.interactionDOMElement.style,n);}else'string'!=typeof r||Object.prototype.hasOwnProperty.call(this.cursorStyles,r)||(this.interactionDOMElement.style.cursor=r)}},t.prototype.dispatchEvent=function(n,t,e){e.stopped||(e.currentTarget=n,e.type=t,n.emit(t,e),n[t]&&n[t](e))},t.prototype.mapPositionToPoint=function(a,t,e){var r=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0};var n=navigator.isCocoonJS?this.resolution:1/this.resolution;a.x=(t-r.left)*(this.interactionDOMElement.width/r.width)*n,a.y=(e-r.top)*(this.interactionDOMElement.height/r.height)*n},t.prototype.processInteractive=function(d,t,p,r,n){if(!t||!t.visible)return!1;var i=d.data.global;n=t.interactive||n;var o=!1,f=n;if(t.hitArea?f=!1:r&&t._mask&&(t._mask.containsPoint(i)||(r=!1)),t.interactiveChildren&&t.children)for(var a=t.children,u=a.length-1;0<=u;u--){var h=a[u],l=this.processInteractive(d,h,p,r,f);if(l){if(!h.parent)continue;f=!1,l&&(d.target&&(r=!1),o=!0)}}return n&&(r&&!d.target&&(t.hitArea?(t.worldTransform.applyInverse(i,this._tempPoint),t.hitArea.contains(this._tempPoint.x,this._tempPoint.y)&&(o=!0)):t.containsPoint&&t.containsPoint(i)&&(o=!0)),t.interactive&&(o&&!d.target&&(d.target=t),p&&p(d,t,!!o))),o},t.prototype.onPointerDown=function(d){if(!this.supportsTouchEvents||'touch'!==d.pointerType){var t=this.normalizeToPointerData(d);this.autoPreventDefault&&t[0].isNormalized&&d.preventDefault();for(var e=t.length,r=0;r<e;r++){var n=t[r],i=this.getInteractionDataForPointerId(n),o=this.configureInteractionEventForDOMEvent(this.eventData,n,i);if(o.data.originalEvent=d,this.processInteractive(o,this.renderer._lastObjectRendered,this.processPointerDown,!0),this.emit('pointerdown',o),'touch'===n.pointerType)this.emit('touchstart',o);else if('mouse'===n.pointerType||'pen'===n.pointerType){var s=2===n.button;this.emit(s?'rightdown':'mousedown',this.eventData)}}}},t.prototype.processPointerDown=function(a,t,e){var r=a.data,n=a.data.identifier;if(e)if(t.trackedPointers[n]||(t.trackedPointers[n]=new p.default(n)),this.dispatchEvent(t,'pointerdown',a),'touch'===r.pointerType)this.dispatchEvent(t,'touchstart',a);else if('mouse'===r.pointerType||'pen'===r.pointerType){var i=2===r.button;i?t.trackedPointers[n].rightDown=!0:t.trackedPointers[n].leftDown=!0,this.dispatchEvent(t,i?'rightdown':'mousedown',a)}},t.prototype.onPointerComplete=function(d,t,e){for(var r=this.normalizeToPointerData(d),n=r.length,i=d.target===this.interactionDOMElement?'':'outside',p=0;p<n;p++){var s=r[p],a=this.getInteractionDataForPointerId(s),u=this.configureInteractionEventForDOMEvent(this.eventData,s,a);if(u.data.originalEvent=d,this.processInteractive(u,this.renderer._lastObjectRendered,e,t||!i),this.emit(t?'pointercancel':'pointerup'+i,u),'mouse'===s.pointerType||'pen'===s.pointerType){var c=2===s.button;this.emit(c?'rightup'+i:'mouseup'+i,u)}else'touch'===s.pointerType&&(this.emit(t?'touchcancel':'touchend'+i,u),this.releaseInteractionDataForPointerId(s.pointerId,a))}},t.prototype.onPointerCancel=function(e){this.supportsTouchEvents&&'touch'===e.pointerType||this.onPointerComplete(e,!0,this.processPointerCancel)},t.prototype.processPointerCancel=function(a,t){var e=a.data,r=a.data.identifier;void 0!==t.trackedPointers[r]&&(delete t.trackedPointers[r],this.dispatchEvent(t,'pointercancel',a),'touch'===e.pointerType&&this.dispatchEvent(t,'touchcancel',a))},t.prototype.onPointerUp=function(e){this.supportsTouchEvents&&'touch'===e.pointerType||this.onPointerComplete(e,!1,this.processPointerUp)},t.prototype.processPointerUp=function(d,t,e){var r=d.data,n=d.data.identifier,i=t.trackedPointers[n],o='touch'===r.pointerType;if('mouse'===r.pointerType||'pen'===r.pointerType){var s=2===r.button,a=p.default.FLAGS,u=s?a.RIGHT_DOWN:a.LEFT_DOWN,c=void 0!==i&&i.flags&u;e?(this.dispatchEvent(t,s?'rightup':'mouseup',d),c&&this.dispatchEvent(t,s?'rightclick':'click',d)):c&&this.dispatchEvent(t,s?'rightupoutside':'mouseupoutside',d),i&&(s?i.rightDown=!1:i.leftDown=!1)}e?(this.dispatchEvent(t,'pointerup',d),o&&this.dispatchEvent(t,'touchend',d),i&&(this.dispatchEvent(t,'pointertap',d),o&&(this.dispatchEvent(t,'tap',d),i.over=!1))):i&&(this.dispatchEvent(t,'pointerupoutside',d),o&&this.dispatchEvent(t,'touchendoutside',d)),i&&i.none&&delete t.trackedPointers[n]},t.prototype.onPointerMove=function(d){if(!this.supportsTouchEvents||'touch'!==d.pointerType){var t=this.normalizeToPointerData(d);'mouse'===t[0].pointerType&&(this.didMove=!0,this.cursor=null);for(var e=t.length,r=0;r<e;r++){var n=t[r],i=this.getInteractionDataForPointerId(n),o=this.configureInteractionEventForDOMEvent(this.eventData,n,i);o.data.originalEvent=d;var s='touch'!==n.pointerType||this.moveWhenInside;this.processInteractive(o,this.renderer._lastObjectRendered,this.processPointerMove,s),this.emit('pointermove',o),'touch'===n.pointerType&&this.emit('touchmove',o),'mouse'!==n.pointerType&&'pen'!==n.pointerType||this.emit('mousemove',o)}'mouse'===t[0].pointerType&&this.setCursorMode(this.cursor)}},t.prototype.processPointerMove=function(a,t,e){var s=a.data,n='touch'===s.pointerType,i='mouse'===s.pointerType||'pen'===s.pointerType;i&&this.processPointerOverOut(a,t,e),this.moveWhenInside&&!e||(this.dispatchEvent(t,'pointermove',a),n&&this.dispatchEvent(t,'touchmove',a),i&&this.dispatchEvent(t,'mousemove',a))},t.prototype.onPointerOut=function(a){if(!this.supportsTouchEvents||'touch'!==a.pointerType){var t=this.normalizeToPointerData(a),e=t[0];'mouse'===e.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var r=this.getInteractionDataForPointerId(e),n=this.configureInteractionEventForDOMEvent(this.eventData,e,r);n.data.originalEvent=e,this.processInteractive(n,this.renderer._lastObjectRendered,this.processPointerOverOut,!1),this.emit('pointerout',n),'mouse'===e.pointerType||'pen'===e.pointerType?this.emit('mouseout',n):this.releaseInteractionDataForPointerId(r.identifier)}},t.prototype.processPointerOverOut=function(a,t,e){var r=a.data,n=a.data.identifier,i='mouse'===r.pointerType||'pen'===r.pointerType,o=t.trackedPointers[n];e&&!o&&(o=t.trackedPointers[n]=new p.default(n)),void 0!==o&&(e&&this.mouseOverRenderer?(o.over||(o.over=!0,this.dispatchEvent(t,'pointerover',a),i&&this.dispatchEvent(t,'mouseover',a)),i&&null===this.cursor&&(this.cursor=t.cursor)):o.over&&(o.over=!1,this.dispatchEvent(t,'pointerout',this.eventData),i&&this.dispatchEvent(t,'mouseout',a),o.none&&delete t.trackedPointers[n]))},t.prototype.onPointerOver=function(a){var t=this.normalizeToPointerData(a),e=t[0],r=this.getInteractionDataForPointerId(e),n=this.configureInteractionEventForDOMEvent(this.eventData,e,r);n.data.originalEvent=e,'mouse'===e.pointerType&&(this.mouseOverRenderer=!0),this.emit('pointerover',n),'mouse'!==e.pointerType&&'pen'!==e.pointerType||this.emit('mouseover',n)},t.prototype.getInteractionDataForPointerId=function(n){var t=n.pointerId,e;return t===_||'mouse'===n.pointerType?e=this.mouse:this.activeInteractionData[t]?e=this.activeInteractionData[t]:(e=this.interactionDataPool.pop()||new l.default,e.identifier=t,this.activeInteractionData[t]=e),e._copyEvent(n),e},t.prototype.releaseInteractionDataForPointerId=function(r){var t=this.activeInteractionData[r];t&&(delete this.activeInteractionData[r],t._reset(),this.interactionDataPool.push(t))},t.prototype.configureInteractionEventForDOMEvent=function(n,t,e){return n.data=e,this.mapPositionToPoint(e.global,t.clientX,t.clientY),navigator.isCocoonJS&&'touch'===t.pointerType&&(e.global.x/=this.resolution,e.global.y/=this.resolution),'touch'===t.pointerType&&(t.globalX=e.global.x,t.globalY=e.global.y),e.originalEvent=t,n._reset(),n},t.prototype.normalizeToPointerData=function(a){var t=[];if(this.supportsTouchEvents&&a instanceof TouchEvent)for(var e=0,r=a.changedTouches.length,n;e<r;e++)n=a.changedTouches[e],void 0===n.button&&(n.button=a.touches.length?1:0),void 0===n.buttons&&(n.buttons=a.touches.length?1:0),void 0===n.isPrimary&&(n.isPrimary=1===a.touches.length&&'touchstart'===a.type),void 0===n.width&&(n.width=n.radiusX||1),void 0===n.height&&(n.height=n.radiusY||1),void 0===n.tiltX&&(n.tiltX=0),void 0===n.tiltY&&(n.tiltY=0),void 0===n.pointerType&&(n.pointerType='touch'),void 0===n.pointerId&&(n.pointerId=n.identifier||0),void 0===n.pressure&&(n.pressure=n.force||.5),n.twist=0,n.tangentialPressure=0,void 0===n.layerX&&(n.layerX=n.offsetX=n.clientX),void 0===n.layerY&&(n.layerY=n.offsetY=n.clientY),n.isNormalized=!0,t.push(n);else!(a instanceof MouseEvent)||this.supportsPointerEvents&&a instanceof window.PointerEvent?t.push(a):(void 0===a.isPrimary&&(a.isPrimary=!0),void 0===a.width&&(a.width=1),void 0===a.height&&(a.height=1),void 0===a.tiltX&&(a.tiltX=0),void 0===a.tiltY&&(a.tiltY=0),void 0===a.pointerType&&(a.pointerType='mouse'),void 0===a.pointerId&&(a.pointerId=_),void 0===a.pressure&&(a.pressure=.5),a.twist=0,a.tangentialPressure=0,a.isNormalized=!0,t.push(a));return t},t.prototype.destroy=function(){this.removeEvents(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this._tempPoint=null},t}(y.default);e.default=x,u.WebGLRenderer.registerPlugin('interaction',x),u.CanvasRenderer.registerPlugin('interaction',x)},{"../core":65,"./InteractionData":155,"./InteractionEvent":156,"./InteractionTrackingData":158,"./interactiveTarget":160,eventemitter3:3}],158:[function(a,t,e){function r(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}e.__esModule=!0;var n=function(){function a(a,o){for(var e=0,r;e<o.length;e++)r=o[e],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}return function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}}(),i=function(){function a(t){r(this,a),this._pointerId=t,this._flags=a.FLAGS.NONE}return a.prototype._doSet=function(r,n){this._flags=n?this._flags|r:this._flags&~r},n(a,[{key:'pointerId',get:function(){return this._pointerId}},{key:'flags',get:function(){return this._flags},set:function(e){this._flags=e}},{key:'none',get:function(){return this._flags===this.constructor.FLAGS.NONE}},{key:'over',get:function(){return 0!=(this._flags&this.constructor.FLAGS.OVER)},set:function(e){this._doSet(this.constructor.FLAGS.OVER,e)}},{key:'rightDown',get:function(){return 0!=(this._flags&this.constructor.FLAGS.RIGHT_DOWN)},set:function(e){this._doSet(this.constructor.FLAGS.RIGHT_DOWN,e)}},{key:'leftDown',get:function(){return 0!=(this._flags&this.constructor.FLAGS.LEFT_DOWN)},set:function(e){this._doSet(this.constructor.FLAGS.LEFT_DOWN,e)}}]),a}();e.default=i,i.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4})},{}],159:[function(d,t,e){function r(e){return e&&e.__esModule?e:{default:e}}e.__esModule=!0;var n=d('./InteractionData');Object.defineProperty(e,'InteractionData',{enumerable:!0,get:function(){return r(n).default}});var i=d('./InteractionManager');Object.defineProperty(e,'InteractionManager',{enumerable:!0,get:function(){return r(i).default}});var o=d('./interactiveTarget');Object.defineProperty(e,'interactiveTarget',{enumerable:!0,get:function(){return r(o).default}});var s=d('./InteractionTrackingData');Object.defineProperty(e,'InteractionTrackingData',{enumerable:!0,get:function(){return r(s).default}});var a=d('./InteractionEvent');Object.defineProperty(e,'InteractionEvent',{enumerable:!0,get:function(){return r(a).default}})},{"./InteractionData":155,"./InteractionEvent":156,"./InteractionManager":157,"./InteractionTrackingData":158,"./interactiveTarget":160}],160:[function(n,t,e){e.__esModule=!0,e.default={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return'pointer'===this.cursor},set buttonMode(e){e?this.cursor='pointer':'pointer'===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0}},{}],161:[function(d,t,e){function l(r,t){r.bitmapFont=a.BitmapText.registerFont(r.data,t)}e.__esModule=!0,e.parse=l,e.default=function(){return function(a,d){if(!a.data||a.type!==s.Resource.TYPE.XML)return void d();if(0===a.data.getElementsByTagName('page').length||0===a.data.getElementsByTagName('info').length||null===a.data.getElementsByTagName('info')[0].getAttribute('face'))return void d();var e=a.isDataUrl?'':n.dirname(a.url);a.isDataUrl&&('.'===e&&(e=''),this.baseUrl&&e&&'/'===this.baseUrl.charAt(this.baseUrl.length-1)&&(e+='/')),(e=e.replace(this.baseUrl,''))&&'/'!==e.charAt(e.length-1)&&(e+='/');var r=e+a.data.getElementsByTagName('page')[0].getAttribute('file');if(o.utils.TextureCache[r])l(a,o.utils.TextureCache[r]),d();else{var i={crossOrigin:a.crossOrigin,loadType:s.Resource.LOAD_TYPE.IMAGE,metadata:a.metadata.imageMetadata,parentResource:a};this.add(a.name+'_image',r,i,function(e){l(a,e.texture),d()})}}};var r=d('path'),n=function(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t.default=n,t}(r),o=d('../core'),s=d('resource-loader'),a=d('../extras')},{"../core":65,"../extras":141,path:8,"resource-loader":36}],162:[function(p,t,e){function r(e){return e&&e.__esModule?e:{default:e}}e.__esModule=!0,e.shared=e.Resource=e.textureParser=e.getResourcePath=e.spritesheetParser=e.parseBitmapFontData=e.bitmapFontParser=e.Loader=void 0;var n=p('./bitmapFontParser');Object.defineProperty(e,'bitmapFontParser',{enumerable:!0,get:function(){return r(n).default}}),Object.defineProperty(e,'parseBitmapFontData',{enumerable:!0,get:function(){return n.parse}});var i=p('./spritesheetParser');Object.defineProperty(e,'spritesheetParser',{enumerable:!0,get:function(){return r(i).default}}),Object.defineProperty(e,'getResourcePath',{enumerable:!0,get:function(){return i.getResourcePath}});var o=p('./textureParser');Object.defineProperty(e,'textureParser',{enumerable:!0,get:function(){return r(o).default}});var s=p('resource-loader');Object.defineProperty(e,'Resource',{enumerable:!0,get:function(){return s.Resource}});var a=p('../core/Application'),u=r(a),h=p('./loader'),l=r(h);e.Loader=l.default;var c=new l.default;c.destroy=function(){},e.shared=c;var d=u.default.prototype;d._loader=null,Object.defineProperty(d,'loader',{get:function(){if(!this._loader){var e=this._options.sharedLoader;this._loader=e?c:new l.default}return this._loader}}),d._parentDestroy=d.destroy,d.destroy=function(e){this._loader&&(this._loader.destroy(),this._loader=null),this._parentDestroy(e)}},{"../core/Application":43,"./bitmapFontParser":161,"./loader":163,"./spritesheetParser":164,"./textureParser":165,"resource-loader":36}],163:[function(x,t,e){function r(e){return e&&e.__esModule?e:{default:e}}function T(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}function i(r,n){if(!r)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==('undefined'==typeof n?'undefined':z(n))||'function'==typeof n)?n:r}function n(r,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+('undefined'==typeof n?'undefined':z(n)));r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(r,n):r.__proto__=n)}e.__esModule=!0;var o=x('resource-loader'),a=r(o),s=x('resource-loader/lib/middlewares/parsing/blob'),u=x('eventemitter3'),l=r(u),c=x('./textureParser'),d=r(c),h=x('./spritesheetParser'),p=r(h),f=x('./bitmapFontParser'),y=r(f),g=function(o){function d(e,t){T(this,d);var n=i(this,o.call(this,e,t));l.default.call(n);for(var r=0;r<d._pixiMiddleware.length;++r)n.use(d._pixiMiddleware[r]());return n.onStart.add(function(e){return n.emit('start',e)}),n.onProgress.add(function(r,t){return n.emit('progress',r,t)}),n.onError.add(function(a,t,e){return n.emit('error',a,t,e)}),n.onLoad.add(function(r,t){return n.emit('load',r,t)}),n.onComplete.add(function(r,t){return n.emit('complete',r,t)}),n}return n(d,o),d.addPixiMiddleware=function(e){d._pixiMiddleware.push(e)},d.prototype.destroy=function(){this.removeAllListeners(),this.reset()},d}(a.default);for(var m in e.default=g,l.default.prototype)g.prototype[m]=l.default.prototype[m];g._pixiMiddleware=[s.blobMiddlewareFactory,d.default,p.default,y.default];var _=a.default.Resource;_.setExtensionXhrType('fnt',_.XHR_RESPONSE_TYPE.DOCUMENT)},{"./bitmapFontParser":161,"./spritesheetParser":164,"./textureParser":165,eventemitter3:3,"resource-loader":36,"resource-loader/lib/middlewares/parsing/blob":37}],164:[function(d,t,e){function l(r,t){return r.isDataUrl?r.data.meta.image:o.default.resolve(r.url.replace(t,''),r.data.meta.image)}e.__esModule=!0,e.default=function(){return function(a,d){var e=a.name+'_image';if(!a.data||a.type!==n.Resource.TYPE.JSON||!a.data.frames||this.resources[e])return void d();var r={crossOrigin:a.crossOrigin,loadType:n.Resource.LOAD_TYPE.IMAGE,metadata:a.metadata.imageMetadata,parentResource:a},o=l(a,this.baseUrl);this.add(e,o,r,function(e){var t=new i.Spritesheet(e.texture.baseTexture,a.data,a.url);t.parse(function(){a.spritesheet=t,a.textures=t.textures,d()})})}},e.getResourcePath=l;var n=d('resource-loader'),r=d('url'),o=function(e){return e&&e.__esModule?e:{default:e}}(r),i=d('../core')},{"../core":65,"resource-loader":36,url:38}],165:[function(a,t,e){e.__esModule=!0,e.default=function(){return function(n,t){n.data&&n.type===r.Resource.TYPE.IMAGE&&(n.texture=i.default.fromLoader(n.data,n.url,n.name)),t()}};var r=a('resource-loader'),n=a('../core/textures/Texture'),i=function(e){return e&&e.__esModule?e:{default:e}}(n)},{"../core/textures/Texture":115,"resource-loader":36}],166:[function(p,t,e){function g(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}function n(r,n){if(!r)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==('undefined'==typeof n?'undefined':z(n))||'function'==typeof n)?n:r}function r(r,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+('undefined'==typeof n?'undefined':z(n)));r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(r,n):r.__proto__=n)}e.__esModule=!0;var o=function(){function a(a,o){for(var e=0,r;e<o.length;e++)r=o[e],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}return function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}}(),i=p('../core'),m=function(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t.default=n,t}(i),a=p('../extras/TextureTransform'),u=function(e){return e&&e.__esModule?e:{default:e}}(a),_=new m.Point,c=new m.Polygon,s=function(i){function t(e,r,o,s,a){g(this,t);var d=n(this,i.call(this));return d._texture=e,d.uvs=o||new Float32Array([0,0,1,0,1,1,0,1]),d.vertices=r||new Float32Array([0,0,100,0,100,100,0,100]),d.indices=s||new Uint16Array([0,1,3,2]),d.dirty=0,d.indexDirty=0,d.blendMode=m.BLEND_MODES.NORMAL,d.canvasPadding=0,d.drawMode=a||t.DRAW_MODES.TRIANGLE_MESH,d.shader=null,d.tintRgb=new Float32Array([1,1,1]),d._glDatas={},d._uvTransform=new u.default(e),d.uploadUvTransform=!1,d.pluginName='mesh',d}return r(t,i),t.prototype._renderWebGL=function(e){this.refresh(),e.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)},t.prototype._renderCanvas=function(e){this.refresh(),e.plugins[this.pluginName].render(this)},t.prototype._onTextureUpdate=function(){this._uvTransform.texture=this._texture,this.refresh()},t.prototype.multiplyUvs=function(){this.uploadUvTransform||this._uvTransform.multiplyUvs(this.uvs)},t.prototype.refresh=function(e){this._uvTransform.update(e)&&this._refresh()},t.prototype._refresh=function(){},t.prototype._calculateBounds=function(){this._bounds.addVertices(this.transform,this.vertices,0,this.vertices.length)},t.prototype.containsPoint=function(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,_);for(var d=this.vertices,r=c.points,n=this.indices,i=this.indices.length,o=this.drawMode===t.DRAW_MODES.TRIANGLES?3:1,s=0;s+2<i;s+=o){var a=2*n[s],u=2*n[s+1],p=2*n[s+2];if(r[0]=d[a],r[1]=d[a+1],r[2]=d[u],r[3]=d[u+1],r[4]=d[p],r[5]=d[p+1],c.contains(_.x,_.y))return!0}return!1},o(t,[{key:'texture',get:function(){return this._texture},set:function(e){this._texture!==e&&(this._texture=e,e&&(e.baseTexture.hasLoaded?this._onTextureUpdate():e.once('update',this._onTextureUpdate,this)))}},{key:'tint',get:function(){return m.utils.rgb2hex(this.tintRgb)},set:function(e){this.tintRgb=m.utils.hex2rgb(e,this.tintRgb)}}]),t}(m.Container);e.default=s,s.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1}},{"../core":65,"../extras/TextureTransform":136}],167:[function(d,t,e){function p(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}function n(r,n){if(!r)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==('undefined'==typeof n?'undefined':z(n))||'function'==typeof n)?n:r}function r(r,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+('undefined'==typeof n?'undefined':z(n)));r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(r,n):r.__proto__=n)}e.__esModule=!0;var o=function(){function a(a,o){for(var e=0,r;e<o.length;e++)r=o[e],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}return function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}}(),i=d('./Plane'),a=function(e){return e&&e.__esModule?e:{default:e}}(i),c=10,s=function(d){function t(e,r,o,i,a){p(this,t);var s=n(this,d.call(this,e,4,4));return s._origWidth=e.orig.width,s._origHeight=e.orig.height,s._width=s._origWidth,s._height=s._origHeight,s.leftWidth=void 0===r?c:r,s.rightWidth=void 0===i?c:i,s.topHeight=void 0===o?c:o,s.bottomHeight=void 0===a?c:a,s.refresh(!0),s}return r(t,d),t.prototype.updateHorizontalVertices=function(){var e=this.vertices;e[9]=e[11]=e[13]=e[15]=this._topHeight,e[17]=e[19]=e[21]=e[23]=this._height-this._bottomHeight,e[25]=e[27]=e[29]=e[31]=this._height},t.prototype.updateVerticalVertices=function(){var e=this.vertices;e[2]=e[10]=e[18]=e[26]=this._leftWidth,e[4]=e[12]=e[20]=e[28]=this._width-this._rightWidth,e[6]=e[14]=e[22]=e[30]=this._width},t.prototype._renderCanvas=function(d){var t=d.context;t.globalAlpha=this.worldAlpha;var e=this.worldTransform,r=d.resolution;d.roundPixels?t.setTransform(e.a*r,e.b*r,e.c*r,e.d*r,0|e.tx*r,0|e.ty*r):t.setTransform(e.a*r,e.b*r,e.c*r,e.d*r,e.tx*r,e.ty*r);var n=this._texture.baseTexture,i=n.source,o=n.width,s=n.height;this.drawSegment(t,i,o,s,0,1,10,11),this.drawSegment(t,i,o,s,2,3,12,13),this.drawSegment(t,i,o,s,4,5,14,15),this.drawSegment(t,i,o,s,8,9,18,19),this.drawSegment(t,i,o,s,10,11,20,21),this.drawSegment(t,i,o,s,12,13,22,23),this.drawSegment(t,i,o,s,16,17,26,27),this.drawSegment(t,i,o,s,18,19,28,29),this.drawSegment(t,i,o,s,20,21,30,31)},t.prototype.drawSegment=function(p,t,e,r,n,i,o,s){var a=this.uvs,u=this.vertices,h=(a[o]-a[n])*e,l=(a[s]-a[i])*r,c=u[o]-u[n],d=u[s]-u[i];1>h&&(h=1),1>l&&(l=1),1>c&&(c=1),1>d&&(d=1),p.drawImage(t,a[n]*e,a[i]*r,h,l,u[n],u[i],c,d)},t.prototype._refresh=function(){d.prototype._refresh.call(this);var t=this.uvs,e=this._texture;this._origWidth=e.orig.width,this._origHeight=e.orig.height;var r=1/this._origWidth,n=1/this._origHeight;t[0]=t[8]=t[16]=t[24]=0,t[1]=t[3]=t[5]=t[7]=0,t[6]=t[14]=t[22]=t[30]=1,t[25]=t[27]=t[29]=t[31]=1,t[2]=t[10]=t[18]=t[26]=r*this._leftWidth,t[4]=t[12]=t[20]=t[28]=1-r*this._rightWidth,t[9]=t[11]=t[13]=t[15]=n*this._topHeight,t[17]=t[19]=t[21]=t[23]=1-n*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.dirty=!0,this.multiplyUvs()},o(t,[{key:'width',get:function(){return this._width},set:function(e){this._width=e,this._refresh()}},{key:'height',get:function(){return this._height},set:function(e){this._height=e,this._refresh()}},{key:'leftWidth',get:function(){return this._leftWidth},set:function(e){this._leftWidth=e,this._refresh()}},{key:'rightWidth',get:function(){return this._rightWidth},set:function(e){this._rightWidth=e,this._refresh()}},{key:'topHeight',get:function(){return this._topHeight},set:function(e){this._topHeight=e,this._refresh()}},{key:'bottomHeight',get:function(){return this._bottomHeight},set:function(e){this._bottomHeight=e,this._refresh()}}]),t}(a.default);e.default=s},{"./Plane":168}],168:[function(d,t,e){function l(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}function n(r,n){if(!r)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==('undefined'==typeof n?'undefined':z(n))||'function'==typeof n)?n:r}function r(r,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+('undefined'==typeof n?'undefined':z(n)));r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(r,n):r.__proto__=n)}e.__esModule=!0;var o=d('./Mesh'),i=function(e){return e&&e.__esModule?e:{default:e}}(o),a=function(a){function t(e,r,o){l(this,t);var s=n(this,a.call(this,e));return s._ready=!0,s.verticesX=r||10,s.verticesY=o||10,s.drawMode=i.default.DRAW_MODES.TRIANGLES,s.refresh(),s}return r(t,a),t.prototype._refresh=function(){for(var f=this._texture,t=this.verticesX*this.verticesY,e=[],r=[],n=[],i=[],o=this.verticesX-1,s=this.verticesY-1,a=f.width/o,u=f.height/s,h=0;h<t;h++){var l=h%this.verticesX,c=0|h/this.verticesX;e.push(l*a,c*u),n.push(l/o,c/s)}for(var d=0;d<o*s;d++){var p=d%o,x=0|d/o,y=x*this.verticesX+p,g=x*this.verticesX+p+1,m=(x+1)*this.verticesX+p,_=(x+1)*this.verticesX+p+1;i.push(y,g,m),i.push(g,_,m)}this.vertices=new Float32Array(e),this.uvs=new Float32Array(n),this.colors=new Float32Array(r),this.indices=new Uint16Array(i),this.indexDirty=!0,this.multiplyUvs()},t.prototype._onTextureUpdate=function(){i.default.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()},t}(i.default);e.default=a},{"./Mesh":166}],169:[function(d,t,e){function l(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}function n(r,n){if(!r)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==('undefined'==typeof n?'undefined':z(n))||'function'==typeof n)?n:r}function r(r,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+('undefined'==typeof n?'undefined':z(n)));r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(r,n):r.__proto__=n)}e.__esModule=!0;var o=d('./Mesh'),i=function(e){return e&&e.__esModule?e:{default:e}}(o),a=function(a){function t(e,r){l(this,t);var o=n(this,a.call(this,e));return o.points=r,o.vertices=new Float32Array(4*r.length),o.uvs=new Float32Array(4*r.length),o.colors=new Float32Array(2*r.length),o.indices=new Uint16Array(2*r.length),o.autoUpdate=!0,o.refresh(),o}return r(t,a),t.prototype._refresh=function(){var d=this.points;if(!(1>d.length)&&this._texture._uvs){this.vertices.length/4!==d.length&&(this.vertices=new Float32Array(4*d.length),this.uvs=new Float32Array(4*d.length),this.colors=new Float32Array(2*d.length),this.indices=new Uint16Array(2*d.length));var t=this.uvs,e=this.indices,r=this.colors;t[0]=0,t[1]=0,t[2]=0,t[3]=1,r[0]=1,r[1]=1,e[0]=0,e[1]=1;for(var n=d.length,i=1;i<n;i++){var o=4*i,s=i/(n-1);t[o]=s,t[o+1]=0,t[o+2]=s,t[o+3]=1,o=2*i,r[o]=1,r[o+1]=1,o=2*i,e[o]=o,e[o+1]=o+1}this.dirty++,this.indexDirty++,this.multiplyUvs(),this.refreshVertices()}},t.prototype.refreshVertices=function(){var p=this.points;if(!(1>p.length))for(var t=p[0],e=void 0,r=0,n=0,i=this.vertices,o=p.length,s=0;s<o;s++){var a=p[s],u=4*s;e=s<p.length-1?p[s+1]:a,n=-(e.x-t.x),r=e.y-t.y;var h=10*(1-s/(o-1));1<h&&(h=1);var l=H(r*r+n*n),c=this._texture.height/2;r/=l,n/=l,r*=c,n*=c,i[u]=a.x+r,i[u+1]=a.y+n,i[u+2]=a.x-r,i[u+3]=a.y-n,t=a}},t.prototype.updateTransform=function(){this.autoUpdate&&this.refreshVertices(),this.containerUpdateTransform()},t}(i.default);e.default=a},{"./Mesh":166}],170:[function(d,t,e){function r(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}e.__esModule=!0;var n=d('../../core'),i=function(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t.default=n,t}(n),o=d('../Mesh'),s=function(e){return e&&e.__esModule?e:{default:e}}(o),a=function(){function n(t){r(this,n),this.renderer=t}return n.prototype.render=function(a){var t=this.renderer,e=t.context,r=a.worldTransform,n=t.resolution;t.roundPixels?e.setTransform(r.a*n,r.b*n,r.c*n,r.d*n,0|r.tx*n,0|r.ty*n):e.setTransform(r.a*n,r.b*n,r.c*n,r.d*n,r.tx*n,r.ty*n),t.setBlendMode(a.blendMode),a.drawMode===s.default.DRAW_MODES.TRIANGLE_MESH?this._renderTriangleMesh(a):this._renderTriangles(a)},n.prototype._renderTriangleMesh=function(a){for(var t=a.vertices.length/2,e=0,r;e<t-2;e++)r=2*e,this._renderDrawTriangle(a,r,r+2,r+4)},n.prototype._renderTriangles=function(a){for(var t=a.indices,e=t.length,r=0;r<e;r+=3){var n=2*t[r],i=2*t[r+1],o=2*t[r+2];this._renderDrawTriangle(a,n,i,o)}},n.prototype._renderDrawTriangle=function(U,t,e,r){var n=this.renderer.context,i=U.uvs,o=U.vertices,s=U._texture;if(s.valid){var a=s.baseTexture,u=a.source,h=a.width,l=a.height,c,d,f,p,v,y;if(U.uploadUvTransform){var g=U._uvTransform.mapCoord;c=(i[t]*g.a+i[t+1]*g.c+g.tx)*a.width,d=(i[e]*g.a+i[e+1]*g.c+g.tx)*a.width,f=(i[r]*g.a+i[r+1]*g.c+g.tx)*a.width,p=(i[t]*g.b+i[t+1]*g.d+g.ty)*a.height,v=(i[e]*g.b+i[e+1]*g.d+g.ty)*a.height,y=(i[r]*g.b+i[r+1]*g.d+g.ty)*a.height}else c=i[t]*a.width,d=i[e]*a.width,f=i[r]*a.width,p=i[t+1]*a.height,v=i[e+1]*a.height,y=i[r+1]*a.height;var m=o[t],_=o[e],b=o[r],x=o[t+1],T=o[e+1],w=o[r+1];if(0<U.canvasPadding){var E=U.canvasPadding/U.worldTransform.a,S=U.canvasPadding/U.worldTransform.d,O=(m+_+b)/3,P=(x+T+w)/3,M=m-O,C=x-P,R=H(M*M+C*C);m=O+M/R*(R+E),x=P+C/R*(R+S),M=_-O,C=T-P,R=H(M*M+C*C),_=O+M/R*(R+E),T=P+C/R*(R+S),M=b-O,C=w-P,R=H(M*M+C*C),b=O+M/R*(R+E),w=P+C/R*(R+S)}n.save(),n.beginPath(),n.moveTo(m,x),n.lineTo(_,T),n.lineTo(b,w),n.closePath(),n.clip();var A=c*v+p*f+d*y-v*f-p*d-c*y,I=m*v+p*b+_*y-v*b-p*_-m*y,D=c*_+m*f+d*b-_*f-m*d-c*b,L=c*v*b+p*_*f+m*d*y-m*v*f-p*d*b-c*_*y,N=x*v+p*w+T*y-v*w-p*T-x*y,F=c*T+x*f+d*w-T*f-x*d-c*w,B=c*v*w+p*T*f+x*d*y-x*v*f-p*d*w-c*T*y;n.transform(I/A,N/A,D/A,F/A,L/A,B/A),n.drawImage(u,0,0,h*a.resolution,l*a.resolution,0,0,h,l),n.restore(),this.renderer.invalidateBlendMode()}},n.prototype.renderMeshFlat=function(d){var t=this.renderer.context,e=d.vertices,r=e.length/2;t.beginPath();for(var n=1;n<r-2;++n){var i=2*n,o=e[i],s=e[i+1],a=e[i+2],u=e[i+3],p=e[i+4],l=e[i+5];t.moveTo(o,s),t.lineTo(a,u),t.lineTo(p,l)}t.fillStyle='#FF0000',t.fill(),t.closePath()},n.prototype.destroy=function(){this.renderer=null},n}();e.default=a,i.CanvasRenderer.registerPlugin('mesh',a)},{"../../core":65,"../Mesh":166}],171:[function(d,t,e){function r(e){return e&&e.__esModule?e:{default:e}}e.__esModule=!0;var n=d('./Mesh');Object.defineProperty(e,'Mesh',{enumerable:!0,get:function(){return r(n).default}});var i=d('./webgl/MeshRenderer');Object.defineProperty(e,'MeshRenderer',{enumerable:!0,get:function(){return r(i).default}});var o=d('./canvas/CanvasMeshRenderer');Object.defineProperty(e,'CanvasMeshRenderer',{enumerable:!0,get:function(){return r(o).default}});var s=d('./Plane');Object.defineProperty(e,'Plane',{enumerable:!0,get:function(){return r(s).default}});var a=d('./NineSlicePlane');Object.defineProperty(e,'NineSlicePlane',{enumerable:!0,get:function(){return r(a).default}});var l=d('./Rope');Object.defineProperty(e,'Rope',{enumerable:!0,get:function(){return r(l).default}})},{"./Mesh":166,"./NineSlicePlane":167,"./Plane":168,"./Rope":169,"./canvas/CanvasMeshRenderer":170,"./webgl/MeshRenderer":172}],172:[function(g,t,e){function r(e){return e&&e.__esModule?e:{default:e}}function m(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}function i(r,n){if(!r)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==('undefined'==typeof n?'undefined':z(n))||'function'==typeof n)?n:r}function n(r,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+('undefined'==typeof n?'undefined':z(n)));r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(r,n):r.__proto__=n)}e.__esModule=!0;var o=g('../../core'),a=function(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t.default=n,t}(o),s=g('pixi-gl-core'),u=r(s),l=g('../Mesh'),c=r(l),d=(g('path'),a.Matrix.IDENTITY),h=function(o){function t(e){m(this,t);var r=i(this,o.call(this,e));return r.shader=null,r}return n(t,o),t.prototype.onContextChange=function(){var e=this.renderer.gl;this.shader=new a.Shader(e,'attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n','varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n')},t.prototype.render=function(s){var t=this.renderer,e=t.gl,r=s._texture;if(r.valid){var n=s._glDatas[t.CONTEXT_UID];n||(t.bindVao(null),n={shader:this.shader,vertexBuffer:u.default.GLBuffer.createVertexBuffer(e,s.vertices,e.STREAM_DRAW),uvBuffer:u.default.GLBuffer.createVertexBuffer(e,s.uvs,e.STREAM_DRAW),indexBuffer:u.default.GLBuffer.createIndexBuffer(e,s.indices,e.STATIC_DRAW),vao:null,dirty:s.dirty,indexDirty:s.indexDirty},n.vao=new u.default.VertexArrayObject(e).addIndex(n.indexBuffer).addAttribute(n.vertexBuffer,n.shader.attributes.aVertexPosition,e.FLOAT,!1,8,0).addAttribute(n.uvBuffer,n.shader.attributes.aTextureCoord,e.FLOAT,!1,8,0),s._glDatas[t.CONTEXT_UID]=n),t.bindVao(n.vao),s.dirty!==n.dirty&&(n.dirty=s.dirty,n.uvBuffer.upload(s.uvs)),s.indexDirty!==n.indexDirty&&(n.indexDirty=s.indexDirty,n.indexBuffer.upload(s.indices)),n.vertexBuffer.upload(s.vertices),t.bindShader(n.shader),n.shader.uniforms.uSampler=t.bindTexture(r),t.state.setBlendMode(a.utils.correctBlendMode(s.blendMode,r.baseTexture.premultipliedAlpha)),n.shader.uniforms.uTransform&&(s.uploadUvTransform?n.shader.uniforms.uTransform=s._uvTransform.mapCoord.toArray(!0):n.shader.uniforms.uTransform=d.toArray(!0)),n.shader.uniforms.translationMatrix=s.worldTransform.toArray(!0),n.shader.uniforms.uColor=a.utils.premultiplyRgba(s.tintRgb,s.worldAlpha,n.shader.uniforms.uColor,r.baseTexture.premultipliedAlpha);var i=s.drawMode===c.default.DRAW_MODES.TRIANGLE_MESH?e.TRIANGLE_STRIP:e.TRIANGLES;n.vao.draw(i,s.indices.length,0)}},t}(a.ObjectRenderer);e.default=h,a.WebGLRenderer.registerPlugin('mesh',h)},{"../../core":65,"../Mesh":166,path:8,"pixi-gl-core":15}],173:[function(d,t,e){function p(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}function n(r,n){if(!r)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==('undefined'==typeof n?'undefined':z(n))||'function'==typeof n)?n:r}function r(r,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+('undefined'==typeof n?'undefined':z(n)));r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(r,n):r.__proto__=n)}e.__esModule=!0;var o=function(){function a(a,o){for(var e=0,r;e<o.length;e++)r=o[e],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}return function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}}(),i=d('../core'),c=function(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t.default=n,t}(i),a=d('../core/utils'),s=function(i){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1500,r=arguments[1],o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:16384;p(this,t);var s=n(this,i.call(this));return 16384<o&&(o=16384),o>e&&(o=e),s._properties=[!1,!0,!1,!1,!1],s._maxSize=e,s._batchSize=o,s._glBuffers={},s._bufferToUpdate=0,s.interactiveChildren=!1,s.blendMode=c.BLEND_MODES.NORMAL,s.roundPixels=!0,s.baseTexture=null,s.setProperties(r),s._tint=0,s.tintRgb=new Float32Array(4),s.tint=16777215,s}return r(t,i),t.prototype.setProperties=function(e){e&&(this._properties[0]='scale'in e?!!e.scale:this._properties[0],this._properties[1]='position'in e?!!e.position:this._properties[1],this._properties[2]='rotation'in e?!!e.rotation:this._properties[2],this._properties[3]='uvs'in e?!!e.uvs:this._properties[3],this._properties[4]='alpha'in e?!!e.alpha:this._properties[4])},t.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},t.prototype.renderWebGL=function(r){var t=this;this.visible&&!(0>=this.worldAlpha)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.hasLoaded||this.baseTexture.once('update',function(){return t.onChildrenChange(0)})),r.setObjectRenderer(r.plugins.particle),r.plugins.particle.render(this))},t.prototype.onChildrenChange=function(r){var t=k(r/this._batchSize);t<this._bufferToUpdate&&(this._bufferToUpdate=t)},t.prototype.renderCanvas=function(p){if(this.visible&&!(0>=this.worldAlpha)&&this.children.length&&this.renderable){var t=p.context,e=this.worldTransform,r=!0,n=0,i=0,o=0,s=0;p.setBlendMode(this.blendMode),t.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var a=0,u;a<this.children.length;++a)if(u=this.children[a],u.visible){var h=u._texture.frame;if(t.globalAlpha=this.worldAlpha*u.alpha,0==u.rotation%(2*C))r&&(t.setTransform(e.a,e.b,e.c,e.d,e.tx*p.resolution,e.ty*p.resolution),r=!1),n=u.anchor.x*(-h.width*u.scale.x)+u.position.x+.5,i=u.anchor.y*(-h.height*u.scale.y)+u.position.y+.5,o=h.width*u.scale.x,s=h.height*u.scale.y;else{r||(r=!0),u.displayObjectUpdateTransform();var l=u.worldTransform;p.roundPixels?t.setTransform(l.a,l.b,l.c,l.d,0|l.tx*p.resolution,0|l.ty*p.resolution):t.setTransform(l.a,l.b,l.c,l.d,l.tx*p.resolution,l.ty*p.resolution),n=u.anchor.x*-h.width+.5,i=u.anchor.y*-h.height+.5,o=h.width,s=h.height}var c=u._texture.baseTexture.resolution;t.drawImage(u._texture.baseTexture.source,h.x*c,h.y*c,h.width*c,h.height*c,n*p.resolution,i*p.resolution,o*p.resolution,s*p.resolution)}}},t.prototype.destroy=function(t){if(i.prototype.destroy.call(this,t),this._buffers)for(var e=0;e<this._buffers.length;++e)this._buffers[e].destroy();this._properties=null,this._buffers=null},o(t,[{key:'tint',get:function(){return this._tint},set:function(e){this._tint=e,(0,a.hex2rgb)(e,this.tintRgb)}}]),t}(c.Container);e.default=s},{"../core":65,"../core/utils":124}],174:[function(a,t,e){function r(e){return e&&e.__esModule?e:{default:e}}e.__esModule=!0;var n=a('./ParticleContainer');Object.defineProperty(e,'ParticleContainer',{enumerable:!0,get:function(){return r(n).default}});var i=a('./webgl/ParticleRenderer');Object.defineProperty(e,'ParticleRenderer',{enumerable:!0,get:function(){return r(i).default}})},{"./ParticleContainer":173,"./webgl/ParticleRenderer":176}],175:[function(d,t,e){function r(e){return e&&e.__esModule?e:{default:e}}function l(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}e.__esModule=!0;var n=d('pixi-gl-core'),p=r(n),o=d('../../core/utils/createIndicesForQuads'),s=r(o),a=function(){function i(t,e,r,n){l(this,i),this.gl=t,this.vertSize=2,this.vertByteSize=4*this.vertSize,this.size=n,this.dynamicProperties=[],this.staticProperties=[];for(var o=0,s;o<e.length;++o)s=e[o],s={attribute:s.attribute,size:s.size,uploadFunction:s.uploadFunction,offset:s.offset},r[o]?this.dynamicProperties.push(s):this.staticProperties.push(s);this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.initBuffers()}return i.prototype.initBuffers=function(){var u=this.gl,t=0;this.indices=(0,s.default)(this.size),this.indexBuffer=p.default.GLBuffer.createIndexBuffer(u,this.indices,u.STATIC_DRAW),this.dynamicStride=0;for(var e=0,r;e<this.dynamicProperties.length;++e)r=this.dynamicProperties[e],r.offset=t,t+=r.size,this.dynamicStride+=r.size;this.dynamicData=new Float32Array(4*(this.size*this.dynamicStride)),this.dynamicBuffer=p.default.GLBuffer.createVertexBuffer(u,this.dynamicData,u.STREAM_DRAW);var n=0;this.staticStride=0;for(var i=0,o;i<this.staticProperties.length;++i)o=this.staticProperties[i],o.offset=n,n+=o.size,this.staticStride+=o.size;this.staticData=new Float32Array(4*(this.size*this.staticStride)),this.staticBuffer=p.default.GLBuffer.createVertexBuffer(u,this.staticData,u.STATIC_DRAW),this.vao=new p.default.VertexArrayObject(u).addIndex(this.indexBuffer);for(var a=0,h;a<this.dynamicProperties.length;++a)h=this.dynamicProperties[a],this.vao.addAttribute(this.dynamicBuffer,h.attribute,u.FLOAT,!1,4*this.dynamicStride,4*h.offset);for(var l=0,c;l<this.staticProperties.length;++l)c=this.staticProperties[l],this.vao.addAttribute(this.staticBuffer,c.attribute,u.FLOAT,!1,4*this.staticStride,4*c.offset)},i.prototype.uploadDynamic=function(a,t,e){for(var r=0,n;r<this.dynamicProperties.length;r++)n=this.dynamicProperties[r],n.uploadFunction(a,t,e,this.dynamicData,this.dynamicStride,n.offset);this.dynamicBuffer.upload()},i.prototype.uploadStatic=function(a,t,e){for(var r=0,n;r<this.staticProperties.length;r++)n=this.staticProperties[r],n.uploadFunction(a,t,e,this.staticData,this.staticStride,n.offset);this.staticBuffer.upload()},i.prototype.destroy=function(){this.dynamicProperties=null,this.dynamicData=null,this.dynamicBuffer.destroy(),this.staticProperties=null,this.staticData=null,this.staticBuffer.destroy()},i}();e.default=a},{"../../core/utils/createIndicesForQuads":122,"pixi-gl-core":15}],176:[function(p,t,e){function r(e){return e&&e.__esModule?e:{default:e}}function g(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}function i(r,n){if(!r)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==('undefined'==typeof n?'undefined':z(n))||'function'==typeof n)?n:r}function n(r,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+('undefined'==typeof n?'undefined':z(n)));r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(r,n):r.__proto__=n)}e.__esModule=!0;var o=p('../../core'),m=function(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t.default=n,t}(o),a=p('./ParticleShader'),s=r(a),l=p('./ParticleBuffer'),u=r(l),d=function(a){function t(e){g(this,t);var r=i(this,a.call(this,e));return r.shader=null,r.indexBuffer=null,r.properties=null,r.tempMatrix=new m.Matrix,r.CONTEXT_UID=0,r}return n(t,a),t.prototype.onContextChange=function(){var e=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.shader=new s.default(e),this.properties=[{attribute:this.shader.attributes.aVertexPosition,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,size:1,uploadFunction:this.uploadAlpha,offset:0}]},t.prototype.start=function(){this.renderer.bindShader(this.shader)},t.prototype.render=function(u){var t=u.children,e=u._maxSize,r=u._batchSize,n=this.renderer,i=t.length;if(0!==i){i>e&&(i=e);var o=u._glBuffers[n.CONTEXT_UID];o||(o=u._glBuffers[n.CONTEXT_UID]=this.generateBuffers(u));var s=t[0]._texture.baseTexture;this.renderer.setBlendMode(m.utils.correctBlendMode(u.blendMode,s.premultipliedAlpha));var a=n.gl,h=u.worldTransform.copy(this.tempMatrix);h.prepend(n._activeRenderTarget.projectionMatrix),this.shader.uniforms.projectionMatrix=h.toArray(!0),this.shader.uniforms.uColor=m.utils.premultiplyRgba(u.tintRgb,u.worldAlpha,this.shader.uniforms.uColor,s.premultipliedAlpha),this.shader.uniforms.uSampler=n.bindTexture(s);for(var l=0,c=0,d;l<i;l+=r,c+=1){d=i-l,d>r&&(d=r);var f=o[c];f.uploadDynamic(t,l,d),u._bufferToUpdate===c&&(f.uploadStatic(t,l,d),u._bufferToUpdate=c+1),n.bindVao(f.vao),f.vao.draw(a.TRIANGLES,6*d)}}},t.prototype.generateBuffers=function(a){for(var t=this.renderer.gl,e=[],r=a._maxSize,n=a._batchSize,i=a._properties,o=0;o<r;o+=n)e.push(new u.default(t,this.properties,i,n));return e},t.prototype.uploadVertices=function(g,t,e,r,n,i){for(var o=0,s=0,a=0,u=0,h=0;h<e;++h){var l=g[t+h],c=l._texture,d=l.scale.x,f=l.scale.y,p=c.trim,m=c.orig;p?(s=p.x-l.anchor.x*m.width,o=s+p.width,u=p.y-l.anchor.y*m.height,a=u+p.height):(o=m.width*(1-l.anchor.x),s=m.width*-l.anchor.x,a=m.height*(1-l.anchor.y),u=m.height*-l.anchor.y),r[i]=s*d,r[i+1]=u*f,r[i+n]=o*d,r[i+n+1]=u*f,r[i+2*n]=o*d,r[i+2*n+1]=a*f,r[i+3*n]=s*d,r[i+3*n+1]=a*f,i+=4*n}},t.prototype.uploadPosition=function(d,t,e,r,n,i){for(var o=0,s;o<e;o++)s=d[t+o].position,r[i]=s.x,r[i+1]=s.y,r[i+n]=s.x,r[i+n+1]=s.y,r[i+2*n]=s.x,r[i+2*n+1]=s.y,r[i+3*n]=s.x,r[i+3*n+1]=s.y,i+=4*n},t.prototype.uploadRotation=function(d,t,e,r,n,i){for(var o=0,s;o<e;o++)s=d[t+o].rotation,r[i]=s,r[i+n]=s,r[i+2*n]=s,r[i+3*n]=s,i+=4*n},t.prototype.uploadUvs=function(d,t,e,r,n,i){for(var o=0,s;o<e;++o)s=d[t+o]._texture._uvs,s?(r[i]=s.x0,r[i+1]=s.y0,r[i+n]=s.x1,r[i+n+1]=s.y1,r[i+2*n]=s.x2,r[i+2*n+1]=s.y2,r[i+3*n]=s.x3,r[i+3*n+1]=s.y3,i+=4*n):(r[i]=0,r[i+1]=0,r[i+n]=0,r[i+n+1]=0,r[i+2*n]=0,r[i+2*n+1]=0,r[i+3*n]=0,r[i+3*n+1]=0,i+=4*n)},t.prototype.uploadAlpha=function(d,t,e,r,n,i){for(var o=0,s;o<e;o++)s=d[t+o].alpha,r[i]=s,r[i+n]=s,r[i+2*n]=s,r[i+3*n]=s,i+=4*n},t.prototype.destroy=function(){this.renderer.gl&&this.renderer.gl.deleteBuffer(this.indexBuffer),a.prototype.destroy.call(this),this.shader.destroy(),this.indices=null,this.tempMatrix=null},t}(m.ObjectRenderer);e.default=d,m.WebGLRenderer.registerPlugin('particle',d)},{"../../core":65,"./ParticleBuffer":175,"./ParticleShader":177}],177:[function(d,t,e){function l(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}function n(r,n){if(!r)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==('undefined'==typeof n?'undefined':z(n))||'function'==typeof n)?n:r}function r(r,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+('undefined'==typeof n?'undefined':z(n)));r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(r,n):r.__proto__=n)}e.__esModule=!0;var o=d('../../core/Shader'),i=function(e){return e&&e.__esModule?e:{default:e}}(o),a=function(a){function t(e){return l(this,t),n(this,a.call(this,e,'attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute float aColor;\nattribute vec2 aPositionCoord;\nattribute vec2 aScale;\nattribute float aRotation;\nuniform mat3 projectionMatrix;\nvarying vec2 vTextureCoord;\nvarying float vColor;\nvoid main(void){\n   vec2 v = aVertexPosition;\n   v.x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n   v.y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n   v = v + aPositionCoord;\n   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vColor = aColor;\n}','varying vec2 vTextureCoord;\nvarying float vColor;\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nvoid main(void){\n  vec4 color = texture2D(uSampler, vTextureCoord) * vColor * uColor;\n  if (color.a == 0.0) discard;\n  gl_FragColor = color;\n}'))}return r(t,a),t}(i.default);e.default=a},{"../../core/Shader":44}],178:[function(){r||(r=function(e){return e=+e,0===e||isNaN(e)?e:0<e?1:-1})},{}],179:[function(e){var t=e('object-assign'),r=function(e){return e&&e.__esModule?e:{default:e}}(t);Object.assign||(Object.assign=r.default)},{"object-assign":6}],180:[function(e){e('./Object.assign'),e('./requestAnimationFrame'),e('./Math.sign'),window.ArrayBuffer||(window.ArrayBuffer=Array),window.Float32Array||(window.Float32Array=Array),window.Uint32Array||(window.Uint32Array=Array),window.Uint16Array||(window.Uint16Array=Array)},{"./Math.sign":178,"./Object.assign":179,"./requestAnimationFrame":181}],181:[function(){(function(a){if(Date.now&&Date.prototype.getTime||(Date.now=function(){return new Date().getTime()}),!a.performance||!a.performance.now){var t=Date.now();a.performance||(a.performance={}),a.performance.now=function(){return Date.now()-t}}for(var s=Date.now(),e=['ms','moz','webkit','o'],r=0,n;r<e.length&&!a.requestAnimationFrame;++r)n=e[r],a.requestAnimationFrame=a[n+'RequestAnimationFrame'],a.cancelAnimationFrame=a[n+'CancelAnimationFrame']||a[n+'CancelRequestAnimationFrame'];a.requestAnimationFrame||(a.requestAnimationFrame=function(r){if('function'!=typeof r)throw new TypeError(r+'is not a function');var a=Date.now(),e=16+s-a;return 0>e&&(e=0),s=a,setTimeout(function(){s=Date.now(),r(performance.now())},e)}),a.cancelAnimationFrame||(a.cancelAnimationFrame=function(e){return clearTimeout(e)})}).call(this,'undefined'==typeof a?'undefined'==typeof self?'undefined'==typeof window?{}:window:self:a)},{}],182:[function(g,t,e){function m(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}function n(a,t){var e=!1;if(a&&a._textures&&a._textures.length)for(var r=0;r<a._textures.length;r++)if(a._textures[r]instanceof l.Texture){var n=a._textures[r].baseTexture;-1===t.indexOf(n)&&(t.push(n),e=!0)}return e}function i(r,t){return r instanceof l.BaseTexture&&(-1===t.indexOf(r)&&t.push(r),!0)}function o(n,t){if(n._texture&&n._texture instanceof l.Texture){var e=n._texture.baseTexture;return-1===t.indexOf(e)&&t.push(e),!0}return!1}function s(r,t){return t instanceof l.Text&&(t.updateText(!0),!0)}function a(n,t){if(t instanceof l.TextStyle){var e=t.toFontString();return l.TextMetrics.measureFont(e),!0}return!1}function u(n,t){if(n instanceof l.Text){-1===t.indexOf(n.style)&&t.push(n.style),-1===t.indexOf(n)&&t.push(n);var e=n._texture.baseTexture;return-1===t.indexOf(e)&&t.push(e),!0}return!1}function h(r,t){return r instanceof l.TextStyle&&(-1===t.indexOf(r)&&t.push(r),!0)}e.__esModule=!0;var r=g('../core'),l=function(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t.default=n,t}(r),d=g('./limiters/CountLimiter'),c=function(e){return e&&e.__esModule?e:{default:e}}(d),p=l.ticker.shared;l.settings.UPLOADS_PER_FRAME=4;var f=function(){function d(t){var e=this;m(this,d),this.limiter=new c.default(l.settings.UPLOADS_PER_FRAME),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){e.queue&&e.prepareItems()},this.registerFindHook(u),this.registerFindHook(h),this.registerFindHook(n),this.registerFindHook(i),this.registerFindHook(o),this.registerUploadHook(s),this.registerUploadHook(a)}return d.prototype.upload=function(r,n){'function'==typeof r&&(n=r,r=null),r&&this.add(r),this.queue.length?(n&&this.completes.push(n),this.ticking||(this.ticking=!0,p.addOnce(this.tick,this,l.UPDATE_PRIORITY.UTILITY))):n&&n()},d.prototype.tick=function(){setTimeout(this.delayedTick,0)},d.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var a=this.queue[0],t=!1;if(a&&!a._destroyed)for(var e=0,r=this.uploadHooks.length;e<r;e++)if(this.uploadHooks[e](this.uploadHookHelper,a)){this.queue.shift(),t=!0;break}t||this.queue.shift()}if(this.queue.length)p.addOnce(this.tick,this,l.UPDATE_PRIORITY.UTILITY);else{this.ticking=!1;var n=this.completes.slice(0);this.completes.length=0;for(var i=0,o=n.length;i<o;i++)n[i]()}},d.prototype.registerFindHook=function(e){return e&&this.addHooks.push(e),this},d.prototype.registerUploadHook=function(e){return e&&this.uploadHooks.push(e),this},d.prototype.add=function(a){for(var t=0,e=this.addHooks.length;t<e&&!this.addHooks[t](a,this.queue);t++);if(a instanceof l.Container)for(var r=a.children.length-1;0<=r;r--)this.add(a.children[r]);return this},d.prototype.destroy=function(){this.ticking&&p.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},d}();e.default=f},{"../core":65,"./limiters/CountLimiter":185}],183:[function(p,t,e){function f(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}function n(r,n){if(!r)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==('undefined'==typeof n?'undefined':z(n))||'function'==typeof n)?n:r}function r(r,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+('undefined'==typeof n?'undefined':z(n)));r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(r,n):r.__proto__=n)}function i(o,t){if(t instanceof a.BaseTexture){var e=t.source,r=0===e.width?o.canvas.width:B(o.canvas.width,e.width),n=0===e.height?o.canvas.height:B(o.canvas.height,e.height);return o.ctx.drawImage(e,0,0,r,n,0,0,o.canvas.width,o.canvas.height),!0}return!1}e.__esModule=!0;var o=p('../../core'),a=function(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t.default=n,t}(o),s=p('../BasePrepare'),u=function(e){return e&&e.__esModule?e:{default:e}}(s),l=16,c=function(a){function t(e){f(this,t);var r=n(this,a.call(this,e));return r.uploadHookHelper=r,r.canvas=document.createElement('canvas'),r.canvas.width=l,r.canvas.height=l,r.ctx=r.canvas.getContext('2d'),r.registerUploadHook(i),r}return r(t,a),t.prototype.destroy=function(){a.prototype.destroy.call(this),this.ctx=null,this.canvas=null},t}(u.default);e.default=c,a.CanvasRenderer.registerPlugin('prepare',c)},{"../../core":65,"../BasePrepare":182}],184:[function(d,t,e){function r(e){return e&&e.__esModule?e:{default:e}}e.__esModule=!0;var n=d('./webgl/WebGLPrepare');Object.defineProperty(e,'webgl',{enumerable:!0,get:function(){return r(n).default}});var i=d('./canvas/CanvasPrepare');Object.defineProperty(e,'canvas',{enumerable:!0,get:function(){return r(i).default}});var o=d('./BasePrepare');Object.defineProperty(e,'BasePrepare',{enumerable:!0,get:function(){return r(o).default}});var s=d('./limiters/CountLimiter');Object.defineProperty(e,'CountLimiter',{enumerable:!0,get:function(){return r(s).default}});var a=d('./limiters/TimeLimiter');Object.defineProperty(e,'TimeLimiter',{enumerable:!0,get:function(){return r(a).default}})},{"./BasePrepare":182,"./canvas/CanvasPrepare":183,"./limiters/CountLimiter":185,"./limiters/TimeLimiter":186,"./webgl/WebGLPrepare":187}],185:[function(a,t,e){function r(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}e.__esModule=!0;var n=function(){function n(t){r(this,n),this.maxItemsPerFrame=t,this.itemsLeft=0}return n.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},n.prototype.allowedToUpload=function(){return 0<this.itemsLeft--},n}();e.default=n},{}],186:[function(a,t,e){function r(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}e.__esModule=!0;var n=function(){function n(t){r(this,n),this.maxMilliseconds=t,this.frameStart=0}return n.prototype.beginFrame=function(){this.frameStart=Date.now()},n.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},n}();e.default=n},{}],187:[function(p,t,e){function g(r,t){if(!(r instanceof t))throw new TypeError('Cannot call a class as a function')}function n(r,n){if(!r)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==('undefined'==typeof n?'undefined':z(n))||'function'==typeof n)?n:r}function r(r,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+('undefined'==typeof n?'undefined':z(n)));r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(r,n):r.__proto__=n)}function i(r,t){return t instanceof u.BaseTexture&&(t._glTextures[r.CONTEXT_UID]||r.textureManager.updateTexture(t),!0)}function s(r,t){return t instanceof u.Graphics&&((t.dirty||t.clearDirty||!t._webGL[r.plugins.graphics.CONTEXT_UID])&&r.plugins.graphics.updateGraphics(t),!0)}function a(r,t){return r instanceof u.Graphics&&(t.push(r),!0)}e.__esModule=!0;var o=p('../../core'),u=function(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t.default=n,t}(o),l=p('../BasePrepare'),c=function(e){return e&&e.__esModule?e:{default:e}}(l),d=function(d){function t(e){g(this,t);var r=n(this,d.call(this,e));return r.uploadHookHelper=r.renderer,r.registerFindHook(a),r.registerUploadHook(i),r.registerUploadHook(s),r}return r(t,d),t}(c.default);e.default=d,u.WebGLRenderer.registerPlugin('prepare',d)},{"../../core":65,"../BasePrepare":182}],188:[function(P,t,C){(function(t){function e(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t.default=n,t}C.__esModule=!0,C.loader=C.prepare=C.particles=C.mesh=C.loaders=C.interaction=C.filters=C.extras=C.extract=C.accessibility=void 0;var r=P('./polyfill');Object.keys(r).forEach(function(e){'default'!==e&&'__esModule'!==e&&Object.defineProperty(C,e,{enumerable:!0,get:function(){return r[e]}})});var n=P('./core');Object.keys(n).forEach(function(e){'default'!==e&&'__esModule'!==e&&Object.defineProperty(C,e,{enumerable:!0,get:function(){return n[e]}})});var o=P('./deprecation'),i=function(e){return e&&e.__esModule?e:{default:e}}(o),a=P('./accessibility'),s=e(a),u=P('./extract'),l=e(u),c=P('./extras'),d=e(c),h=P('./filters'),p=e(h),f=P('./interaction'),y=e(f),g=P('./loaders'),m=e(g),_=P('./mesh'),b=e(_),x=P('./particles'),T=e(x),v=P('./prepare'),E=e(v);n.utils.mixins.performMixins();var S=m.shared||null;C.accessibility=s,C.extract=l,C.extras=d,C.filters=p,C.interaction=y,C.loaders=m,C.mesh=b,C.particles=T,C.prepare=E,C.loader=S,'function'==typeof i.default&&(0,i.default)(C),t.PIXI=C}).call(this,'undefined'==typeof a?'undefined'==typeof self?'undefined'==typeof window?{}:window:self:a)},{"./accessibility":42,"./core":65,"./deprecation":130,"./extract":132,"./extras":141,"./filters":152,"./interaction":159,"./loaders":162,"./mesh":171,"./particles":174,"./polyfill":180,"./prepare":184}]},{},[188])(188)})}).call(r,t(9))},function(e,t,r){'use strict';var a=Math.round,o=r(2),n=r(1),i=r(0),s={load:function(e){function t(){for(var e=d.gifjson,t=0,n=function(n,i){(function(d,n){n.add('spritesheet',l+e[d][0]).load(function(){t++,n.destroy();for(var l=0,u=e[d][2],c;l<u;l++)c=o.Texture.fromFrame(e[d][1]+(l+1)+'.png'),s.source.gifjson.boom.push(c);p.text='Effect '+a(100*(t/i))+'%',t>=i&&(e.splice(0,i),e=null,r())})})(n,new o.loaders.Loader)},u=0,i=e.length;u<i;u++)n(u,i)}function r(){for(var t=d.audio,r=0,o=0,i=t.length,l;o<i;o++)l=document.createElement('audio'),l.setAttribute('src',u+t[o]+'.mp3'),l.setAttribute('preload','true'),l.id=t[o],document.body.appendChild(l),r++,p.text='Audio '+a(100*(r/i))+'%',s.source.audio[t[o]]=u+t[o]+'.mp3',r>=i&&(t.splice(0,i),t=null,n.animate(p,{alpha:0,duration:1e3},function(){p.destroy()}),e&&e())}var d={img:['background.jpg','game-over.png','score.png','shadow.png','start-btn.png','title.png','apple.png','apple-1.png','apple-2.png','banana.png','banana-1.png','banana-2.png','basaha.png','basaha-1.png','basaha-2.png','boom.png','peach.png','peach-1.png','peach-2.png','sandia.png','sandia-1.png','sandia-2.png','icebanana.png','icebanana-1.png','icebanana-2.png'],audio:['boom','cut','freeze','throw'],gifjson:[['boomgif.json','boom',26]]},l='static/gifjson/',u='static/audio/',p=new o.Text('    0%    ',{fontFamily:'microsoft yahei',fontSize:20,fontStyle:'italic',fontWeight:'bold',fill:['#ff7a00'],stroke:'#f7ffee',strokeThickness:5,align:'center'});s.source={texture:{},audio:{},gifjson:{boom:[]}},p.x=i.winw/2,p.y=i.winh/2,p.anchor.x=p.anchor.y=.5,n.stage.addChild(p),function(){for(var e=d.img,r=0,n=function(n,i){(function(o,n){var d=e[o].slice(0,e[o].lastIndexOf('.'));n.add(d,'static/img/'+e[o]).load(function(o,l){r++,n.destroy(),s.source.texture[d]=l[d].texture,p.text='Image '+a(100*(r/i))+'%',r>=i&&(e.splice(0,i),e=null,t())})})(n,new o.loaders.Loader)},l=0,i=e.length;l<i;l++)n(l,i)}()},source:null};e.exports=s},function(e,t,r){'use strict';function n(){l.off('pointerdown',n),l.interactive=!1,d.animate(l,{width:0,height:0},function(){l.visible=!1,a(),u.onclickend&&u.onclickend()})}function a(){l.destroy()}var o=r(2),i=r(3),s=r(0),d=r(1),l,u;u={create:function(){s.status='over',l=new o.Sprite(i.source.texture['game-over']);var e=768<s.winw?420:s.winw/2;l.anchor.x=l.anchor.y=0.5,l.x=s.winw/2,l.y=s.winh/2,l.width=l.height=0,s.score>s.best&&(window.localStorage.setItem(s.gameID,s.score),s.best=s.score,s.update('best'));try{d.stage.removeChild(l)}catch(e){}d.stage.addChild(l),l.visible=!0,d.animate(l,{width:e,height:.55*e},function(){l.on('pointerdown',n),l.interactive=!0})},destroy:a,onclickend:null},e.exports=u},function(e,t,r){'use strict';var n=Math.PI,o=r(2),s=r(1);e.exports={create:function(e,t,r,d){function l(){h+=a.elapsedMS;for(var e=0;e<r;e++)u[e].x+=u[e].Vx,u[e].y+=u[e].Vy,u[e].Vy+=.4;h>=c&&(p.destroy(),s.clearTimer(a,l))}var u=[],p=new o.Container,c=1e3,h=0;r=r||12,d=d||12255232,p.name='particle';for(var f=0;f<r;f++){u[f]=new o.Graphics,u[f].lineStyle(0),u[f].beginFill(d,.6*Math.random()+.4),u[f].drawCircle(e,t,3*Math.random()+2),u[f].endFill();var i=360*Math.random();u[f].Vx=12*(Math.sin(180*i/n)*Math.random()),u[f].Vy=12*(Math.cos(180*i/n)*Math.random()),p.addChild(u[f])}s.stage.addChild(p);var a=s.timer(l);a.start()},destroy:function(){for(var e=s.stage.children,t=0,r=e.length;t<r;t++)'particle'===e[t].name&&e[t].destroy()}}},function(e,t,r){'use strict';function n(e){var t={name:'',texture:null,cutRadius:0,cutted:!1,particleColor:16711680,x:0,y:0};if('object'===('undefined'==typeof e?'undefined':u(e)))for(var r in e)t[r]=e[r];e=null;var n=new p.Sprite;for(var a in n.anchor.x=n.anchor.y=.5,t)n[a]=t[a];return n.name=t.name?t.name:t.texture.textureCacheIds[0],n}function a(e,t){for(var r=new p.Container,a=void 0,o=0,i=e.length;o<i;o++){a=b[e[o]];var s=void 0,d=void 0,l=[];(s=b[e[o]+'-1'])&&(l[0]=s),(d=b[e[o]+'-2'])&&(l[1]=d),r.addChild(n({texture:a,cutRadius:a.width/2,x:f.winw/2,y:f.winh+a.height,pieces:l,particleColor:t[o]?parseInt((t[o]+'').replace('#',''),16):null}))}return r}function o(e){var t=f.winh+e.height,n=Math.random()*(f.winw-2*e.width)+e.width,a=Math.random()*(f.winw-2*e.width)+e.width,o=0.5<Math.random()?1:-1,s=o*(0.08*Math.random()+0.02),r=-(.1*Math.random()+f.winh/1200);e.rotation=0,e.visible=!0,e.cutted=!1,m('throw');var d=h.motion(e,n,a,t,t,r,f.time,s,function(){i(e)});_.push(d)}function i(e){e.cutted||'boom'===e.name||'start'!==f.status||(0<f.life?(f.life--,f.update('life'),s(e.x,f.winh/2)):(h.clearTimer(),l(),g.create()))}function s(e,t){var r=new p.Text('x',{fontSize:36,fontWeight:'bold',fill:['#bb0000'],align:'center'}),n;r.x=e,r.y=t,h.stage.addChild(r),n=setTimeout(function(){clearTimeout(n),h.stage.removeChild(r),r.destroy()},2e3)}function d(e){for(var t=[],r=void 0,n=0;n<e-1;n++)t[n]=n;return t.sort(function(){return .5<Math.random()?1:-1}),r=t.slice(0,Math.floor(Math.random()*(f.max-f.min))+f.min),r.length>=f.max-2&&.3>Math.random()&&r.push(e-1),r}function l(){y=!1,v.splice(0,E);try{T.destroy()}catch(e){}}var u='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&'function'==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?'symbol':typeof e},p=r(2),c=r(3),h=r(1),f=r(0),g=r(4),m=r(7),_=[],y=!1,x,b,T,v,E,S;x={onthrowup:null,activeRoles:function(){for(var e=[],t=0;t<E;t++)e[t]=T.children[v[t]];return e},allRoles:function(){return T.children},freeze:function(){_.push(S);for(var e=0,t=_.length;e<t;e++)_[e].stop(),function(e){var t=setTimeout(function(){clearTimeout(t),e.start(),T.alpha=1},f.freezetime)}(_[e]);T.alpha=.5},create:function(){function e(){if('start'===f.status||'wait'===f.status){if(r+=S.elapsedMS,r>f.time+1e3*Math.random()+500&&y){v=d(t.length),E=v.length,_.splice(0,_.length);for(var n=0;n<E;n++)o(T.children[v[n]]);x.onthrowup&&x.onthrowup(),r=0}y||h.clearTimer(S,e)}}var t=['apple','banana','basaha','peach','sandia','boom','apple','banana','basaha','peach','sandia','boom','icebanana'],r=f.time;return b=c.source.texture,v=d(t.length),E=v.length,T=a(t,['#d4ff00','#ffe337','#ff1e00','#ffd021','#ff0000','#ff0000','#d4ff00','#ffe337','#ff1e00','#ffd021','#ff0000','#ff0000','#a5fcff']),y=!0,S=h.timer(e),S.start(),T},destroy:l},e.exports=x},function(e,t,r){'use strict';function n(){for(var e in a.source.audio)o[e]=document.getElementById(e),o[e].setAttribute('src',a.source.audio[e])}var a=r(3),o={};e.exports=function(e){o[e]||n(),o[e].currentTime=0,o[e].play()}},function(e,t,r){'use strict';var n=r(0),a=r(1),o=r(3),i=r(10),s=r(6),d=r(11),l=r(4);document.body.appendChild(a.view),o.load(function(){function e(){try{i.destroy(0),u()}catch(e){}p=i.create(0),p.alpha=0,a.stage.addChild(p),a.animate(p,{alpha:1},function(){i.button.on('pointerdown',t),n.status='wait',n.reset(),i.showParticle();try{i.destroy(1),a.clearTimer()}catch(e){}})}function t(){try{i.destroy(1)}catch(e){}i.button.off('pointerdown',t),c=i.create(1),c.alpha=0,a.stage.addChild(c),a.animate(c,{alpha:1},function(){i.hideParticle();try{i.destroy(0),u()}catch(e){}n.status='start',r()})}function r(){var e=s.create();a.stage.addChild(e),d.create()}function u(){s.destroy(),d.destroy()}var p,c;e(),l.onclickend=function(){e()},document.addEventListener('touchstart',function e(){for(var t in document.removeEventListener('touchstart',e,!1),o.source.audio)(function(e){e.setAttribute('src','audio/test.mp3'),e.play()})(document.getElementById(t))},!1)})},function(e){var t=function(){return this}();try{t=t||Function('return this')()||(1,eval)('this')}catch(r){'object'==typeof window&&(t=window)}e.exports=t},function(e,t,r){'use strict';function n(e){u[0]=new o.Container;var t=new o.Sprite(e.background);t.width=s.winw,t.height=s.winh,t.x=0,t.y=0;var r=new o.Sprite(e.title);r.anchor.x=r.anchor.y=.5,r.x=s.winw/2,r.y=.3*s.winh;var n=new o.Sprite(e['start-btn']);return n.anchor.x=n.anchor.y=.5,n.x=s.winw/2,n.y=s.winh/1.8,n.interactive=!0,p.button=n,768>s.winw&&(r.width=200,r.height=.65*r.width,n.width=150,n.height=.22*n.width),u[0].addChild(t,r,n),u[0]}function a(e){u[1]=new o.Container;var t=new o.Sprite(e.background),r=new o.Sprite(e.score),n=new o.Text(s.score,{fontFamily:'microsoft yahei',fontSize:20,fill:['#ffffff','#ffcd24'],stroke:'#ff7e09',strokeThickness:1,dropShadow:!0,dropShadowColor:'#782510',dropShadowDistance:1,dropShadowBlur:2}),a=new o.Text(s.scoreTxt+s.best,{fontFamily:'microsoft yahei',fontSize:10,fill:['#ffe108'],stroke:'#8a4805',strokeThickness:1}),d=new o.Text(s.lifeTxt+s.life,{fontFamily:'microsoft yahei',fontSize:20,fontWeight:'bold',fill:['#fafff3'],stroke:'#2c2d2b',strokeThickness:1,dropShadow:!0,dropShadowColor:'#232323',dropShadowDistance:1,dropShadowBlur:2});return t.width=s.winw,t.height=s.winh,r.x=r.y=10,n.y=r.y,n.x=r.x+r.width+5,a.y=r.y+r.height+5,a.x=5,d.x=s.winw-d.width-5,d.y=10,s.update=function(e){var t=e.split(/\s+/),r=t.length,o=0;for(e||(t=['score','best','life']);o<r;o++)switch(t[o]){case'score':n.text=s.score;break;case'best':a.text=s.scoreTxt+s.best;break;case'life':d.text=s.lifeTxt+s.life;}t=null},u[1].addChild(t,r,n,a,d),u[1]}var o=r(2),i=r(3),s=r(0),d=r(1),l=r(5),u=[],p={},c,h;p.create=function(e){if(0===e)return n(i.source.texture);return 1===e?a(i.source.texture):void 0},p.destroy=function(e){'number'==typeof e?u[e].destroy():(u[0].destroy(),u[1].destroy())},p.showParticle=function(){function e(){t+=c.elapsedMS,t>500*Math.random()+500&&(l.create(Math.random()*s.winw,Math.random()*s.winh,12,16711920),l.create(Math.random()*s.winw,Math.random()*s.winh,12,16776960),l.create(Math.random()*s.winw,Math.random()*s.winh,12,16711680),t=0)}c=d.timer(e);var t=0;h=e,c.start()},p.hideParticle=function(){d.clearTimer(c,h)},e.exports=p},function(e,t,r){'use strict';function n(e){var t=new l.Graphics;t.clear(),t.lineStyle(1,16777215),t.moveTo(e[0].x,e[0].y);for(var r=1,n=e.length;r<n;r++)t.lineTo(e[r].x,e[r].y);if(p.stage.addChild(t),T.push(t),1<T.length){var o=T.shift();p.stage.removeChild(o),o.destroy()}}function a(e){function t(){b?(n(x),o(x[x.length-1])):p.clearTimer(i,t)}function r(e){x.push({x:e.data.global.x,y:e.data.global.y}),5<x.length&&x.splice(0,1)}function a(){b=!1,x.splice(0,x.length);for(var e=0,t=T.length;e<t;e++)p.stage.removeChild(T[e]);p.stage.off('pointermove',r),p.stage.off('pointerup',a),p.stage.off('pointerupoutside',a)}x.push({x:e.data.global.x,y:e.data.global.y}),b=!0;var i=p.timer(t);i.start(),p.stage.on('pointermove',r),p.stage.on('pointerup',a),p.stage.on('pointerupoutside',a)}function o(e){for(var t=Math.pow,r=0,n=y.length;r<n;r++)if(Math.sqrt(t(y[r].x-e.x,2)+t(y[r].y-e.y,2))<y[r].cutRadius){if('boom'===y[r].name&&'start'===c.status)return void i(y[r]);s(y[r])}}function i(e){m('boom'),c.status='over',g.destroy();var t=new l.extras.AnimatedSprite(u.source.gifjson.boom);t.loop=!1,t.anchor.x=t.anchor.y=.5,t.x=e.x,t.y=e.y,e.visible=!1,t.play(),p.stage.addChild(t),t.onComplete=function(){t.destroy(),t=null,f.create(u.source.texture['game-over'])}}function s(e){if('boom'!==e.name&&!e.cutted){switch(e.cutted=!0,e.visible=!1,d(e),h.create(e.x,e.y,20,e.particleColor),e.name){case c.freezename:m('freeze'),g.freeze();break;default:m('cut');}'start'===c.status&&(c.score++,c.update('score'))}}function d(e){function t(){if(u+=h.elapsedMS,u>c.time/2){for(a=0;a<n;a++)r[a].destroy();p.clearTimer(h,t)}}if(2===e.pieces.length){var r=[new l.Sprite(e.pieces[0]),new l.Sprite(e.pieces[1])],n=r.length,a=0,o=Math.cos(e.rotation+Math.PI/4),i;if(0>o)i=[0,1];else if(0<o)i=[1,0];else{var s=0.5<Math.random()?0:1;i=[s,s]}for(;a<n;a++)r[a].anchor.x=r[a].anchor.y=.5,r[a].width=e.width,r[a].height=e.height,r[a].x=e.x,r[a].y=e.y,r[a].rotation=e.rotation,r[a].visible=!0,p.stage.addChild(r[a]);var d=0.5<Math.random()?1:-1;p.motion(r[i[0]],e.x,0.6*(Math.random()*e.x),e.y,c.winh+r[i[0]].height,0,c.time/2,d*(0.03*Math.random()+0.02)),p.motion(r[i[1]],e.x,0.6*(Math.random()*(c.winw-e.x))+e.x,e.y,c.winh+r[i[1]].height,0,c.time/2,-d*(0.03*Math.random()+0.02));var u=0,h=p.timer(t);h.start()}}var l=r(2),u=r(3),p=r(1),c=r(0),h=r(5),f=r(4),g=r(6),m=r(7),_,y,x,b,T;_={create:function(){y=g.activeRoles(),g.onthrowup=function(){y=g.activeRoles()},p.stage.interactive=!0,p.stage.on('pointerdown',a),x=[],b=!1,T=[]},destroy:function(){p.stage.interactive=!1,p.stage.off('pointerdown',a),x.splice(0,x.length);for(var e=0,t=T.length;e<t;e++)T[e].destroy();T.splice(0,t)}},e.exports=_}]);