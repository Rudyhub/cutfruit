(function(e){function t(a){if(r[a])return r[a].exports;var o=r[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,a){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var r=e&&e.__esModule?function(){return e['default']}:function(){return e};return t.d(r,'a',r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p='',t(t.s=38)})([function(e){'use strict';e.exports={gl:null,primitiveShader:null,stripShader:null,defaultShader:null,offset:null,projection:null,texturesToUpdate:[],texturesToDestroy:[],visibleCount:0}},function(e){'use strict';e.exports=function(e,t){this.passes=[this],this.dirty=!0,this.padding=0,this.uniforms=t||{},this.fragmentSrc=e||[]}},function(e,t,r){(function(t){!function(t){'use strict';e.exports={global:t,console:t.console,document:t.document,location:t.location,navigator:t.navigator,window:t.window,createCanvas:function(){return t.document.createElement('canvas')},createImage:function(){return new t.Image},createRequest:function(){return new t.XMLHttpRequest}}}('undefined'==typeof t?'undefined'==typeof self?'undefined'==typeof window?{}:window:self:t)}).call(t,r(41))},function(e){'use strict';function t(e,t){this.x=e||0,this.y=t||0}t.prototype.clone=function(){return new t(this.x,this.y)},e.exports=t},function(e,t,r){'use strict';function o(e,t){if(s.call(this),t||(this.noFrame=!0,t=new l(0,0,1,1)),e instanceof o&&(e=e.baseTexture),this.baseTexture=e,this.frame=t,this.trim=new n,this.scope=this,e.hasLoaded)this.noFrame&&(t=new l(0,0,e.width,e.height)),this.setFrame(t);else{var r=this;e.addEventListener('loaded',function(){r.onBaseTextureLoaded()})}}var i=r(12),n=r(3),l=r(8),s=r(5),a=o.prototype;a.onBaseTextureLoaded=function(){var e=this.baseTexture;e.removeEventListener('loaded',this.onLoaded),this.noFrame&&(this.frame=new l(0,0,e.width,e.height)),this.noFrame=!1,this.width=this.frame.width,this.height=this.frame.height,this.scope.dispatchEvent({type:'update',content:this})},a.destroy=function(e){e&&this.baseTexture.destroy()},a.setFrame=function(e){if(this.frame=e,this.width=e.width,this.height=e.height,e.x+e.width>this.baseTexture.width||e.y+e.height>this.baseTexture.height)throw new Error('Texture Error: frame does not fit inside the base Texture dimensions '+this);this.updateFrame=!0,o.frameUpdates.push(this)},o.fromImage=function(e,t,r){var a=o.cache[e];return a||(a=new o(i.fromImage(e,t,r)),o.cache[e]=a),a},o.fromFrame=function(e){var t=o.cache[e];if(!t)throw new Error('The frameId "'+e+'" does not exist in the texture cache '+this);return t},o.fromCanvas=function(e,t){var r=new i(e,t);return new o(r)},o.addTextureToCache=function(e,t){o.cache[t]=e},o.removeTextureFromCache=function(e){var t=o.cache[e];return o.cache[e]=null,t},o.cache={},o.frameUpdates=[],o.SCALE_MODE=i.SCALE_MODE,e.exports=o},function(e){'use strict';e.exports=function(){var e={};this.addEventListener=this.on=function(t,r){void 0===e[t]&&(e[t]=[]),-1===e[t].indexOf(r)&&e[t].push(r)},this.dispatchEvent=this.emit=function(t){if(e[t.type]&&e[t.type].length)for(var r=0,a=e[t.type].length;a>r;r++)e[t.type][r](t)},this.removeEventListener=this.off=function(t,r){var a=e[t].indexOf(r);-1!==a&&e[t].splice(a,1)},this.removeAllEventListeners=function(t){var r=e[t];r&&(r.length=0)}}},function(e,t,r){'use strict';function a(){o.call(this),this.children=[]}var o=r(19),i=a.prototype=Object.create(o.prototype,{constructor:{value:a}});i.addChild=function(t){if(t.parent&&t.parent!==this&&t.parent.removeChild(t),t.parent=this,this.children.push(t),this.stage){var r=t;do r.interactive&&(this.stage.dirty=!0),r.stage=this.stage,r=r._iNext;while(r)}var a,o,i=t.first,e=t.last;o=this._filters||this._mask?this.last._iPrev:this.last,a=o._iNext;for(var n=this,l=o;n;)n.last===l&&(n.last=t.last),n=n.parent;a&&(a._iPrev=e,e._iNext=a),i._iPrev=o,o._iNext=i,this.__renderGroup&&(t.__renderGroup&&t.__renderGroup.removeDisplayObjectAndChildren(t),this.__renderGroup.addDisplayObjectAndChildren(t))},i.addChildAt=function(t,r){if(!(0<=r&&r<=this.children.length))throw new Error(t+' The index '+r+' supplied is out of bounds '+this.children.length);if(void 0!==t.parent&&t.parent.removeChild(t),t.parent=this,this.stage){var a=t;do a.interactive&&(this.stage.dirty=!0),a.stage=this.stage,a=a._iNext;while(a)}var o,n,e=t.first,l=t.last;if(r===this.children.length){n=this.last;for(var s=this,d=this.last;s;)s.last===d&&(s.last=t.last),s=s.parent}else n=0===r?this:this.children[r-1].last;o=n._iNext,o&&(o._iPrev=l,l._iNext=o),e._iPrev=n,n._iNext=e,this.children.splice(r,0,t),this.__renderGroup&&(t.__renderGroup&&t.__renderGroup.removeDisplayObjectAndChildren(t),this.__renderGroup.addDisplayObjectAndChildren(t))},i.swapChildren=function(e,t){if(e!==t){var r=this.children.indexOf(e),a=this.children.indexOf(t);if(0>r||0>a)throw new Error('swapChildren: Both the supplied DisplayObjects must be a child of the caller.');this.removeChild(e),this.removeChild(t),a>r?(this.addChildAt(t,r),this.addChildAt(e,a)):(this.addChildAt(e,a),this.addChildAt(t,r))}},i.getChildAt=function(e){if(0<=e&&e<this.children.length)return this.children[e];throw new Error('Both the supplied DisplayObjects must be a child of the caller '+this)},i.removeChild=function(t){var r=this.children.indexOf(t);if(-1===r)throw new Error(t+' The supplied DisplayObject must be a child of the caller '+this);var a=t.first,o=t.last,n=o._iNext,e=a._iPrev;if(n&&(n._iPrev=e),e._iNext=n,this.last===o)for(var l=a._iPrev,s=this;s.last===o&&(s.last=l,s=s.parent););if(o._iNext=null,a._iPrev=null,this.stage){var d=t;do d.interactive&&(this.stage.dirty=!0),d.stage=null,d=d._iNext;while(d)}t.__renderGroup&&t.__renderGroup.removeDisplayObjectAndChildren(t),t.parent=void 0,this.children.splice(r,1)},i.updateTransform=function(){if(this.visible){o.prototype.updateTransform.call(this);for(var e=0,t=this.children.length;t>e;e++)this.children[e].updateTransform()}},e.exports=a},function(e,t,r){'use strict';function o(e){if(n.call(this),this.anchor=new l,this.texture=e,this.blendMode=i.NORMAL,this._width=0,this._height=0,e.baseTexture.hasLoaded)this.updateFrame=!0;else{var t=this;this.texture.addEventListener('update',function(){t.onTextureUpdate()})}this.renderable=!0}var i=r(11),n=r(6),l=r(3),s=r(4),a=o.prototype=Object.create(n.prototype,{constructor:{value:o}});Object.defineProperty(a,'width',{get:function(){return this.scale.x*this.texture.frame.width},set:function(e){this.scale.x=e/this.texture.frame.width,this._width=e}}),Object.defineProperty(a,'height',{get:function(){return this.scale.y*this.texture.frame.height},set:function(e){this.scale.y=e/this.texture.frame.height,this._height=e}}),a.setTexture=function(e){this.texture.baseTexture===e.baseTexture?this.texture=e:(this.textureChange=!0,this.texture=e,this.__renderGroup&&this.__renderGroup.updateTexture(this)),this.updateFrame=!0},a.onTextureUpdate=function(){this._width&&(this.scale.x=this._width/this.texture.frame.width),this._height&&(this.scale.y=this._height/this.texture.frame.height),this.updateFrame=!0},o.fromFrame=function(e){var t=s.cache[e];if(!t)throw new Error('The frameId "'+e+'" does not exist in the texture cache'+this);return new o(t)},o.fromImage=function(e){var t=s.fromImage(e);return new o(t)},e.exports=o},function(e){'use strict';function t(e,t,r,a){this.x=e||0,this.y=t||0,this.width=r||0,this.height=a||0}var r=t.prototype;r.clone=function(){return new t(this.x,this.y,this.width,this.height)},r.contains=function(e,t){if(0>=this.width||0>=this.height)return!1;var r=this.x;if(e>=r&&e<=r+this.width){var a=this.y;if(t>=a&&t<=a+this.height)return!0}return!1},e.exports=t},function(e,t){'use strict';var r=t.Matrix='undefined'==typeof Float32Array?Array:Float32Array,a=t.mat3={},o=t.mat4={};a.create=function(){var e=new r(9);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},a.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},o.create=function(){var e=new r(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},a.multiply=function(x,a,v){v||(v=x);var c=x[0],d=x[1],e=x[2],f=x[3],g=x[4],h=x[5],i=x[6],T=x[7],b=x[8],l=a[0],m=a[1],n=a[2],o=a[3],p=a[4],y=a[5],r=a[6],s=a[7],t=a[8];return v[0]=l*c+m*f+n*i,v[1]=l*d+m*g+n*T,v[2]=l*e+m*h+n*b,v[3]=o*c+p*f+y*i,v[4]=o*d+p*g+y*T,v[5]=o*e+p*h+y*b,v[6]=r*c+s*f+t*i,v[7]=r*d+s*g+t*T,v[8]=r*e+s*h+t*b,v},a.clone=function(e){var t=new r(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},a.transpose=function(t,r){if(!r||t===r){var a=t[1],o=t[2],i=t[5];return t[1]=t[3],t[2]=t[6],t[3]=a,t[5]=t[7],t[6]=o,t[7]=i,t}return r[0]=t[0],r[1]=t[3],r[2]=t[6],r[3]=t[1],r[4]=t[4],r[5]=t[7],r[6]=t[2],r[7]=t[5],r[8]=t[8],r},a.toMat4=function(e,t){return t||(t=o.create()),t[15]=1,t[14]=0,t[13]=0,t[12]=0,t[11]=0,t[10]=e[8],t[9]=e[7],t[8]=e[6],t[7]=0,t[6]=e[5],t[5]=e[4],t[4]=e[3],t[3]=0,t[2]=e[2],t[1]=e[1],t[0]=e[0],t},o.create=function(){var e=new r(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},o.transpose=function(t,r){if(!r||t===r){var a=t[1],o=t[2],i=t[3],e=t[6],n=t[7],l=t[11];return t[1]=t[4],t[2]=t[8],t[3]=t[12],t[4]=a,t[6]=t[9],t[7]=t[13],t[8]=o,t[9]=e,t[11]=t[14],t[12]=i,t[13]=n,t[14]=l,t}return r[0]=t[0],r[1]=t[4],r[2]=t[8],r[3]=t[12],r[4]=t[1],r[5]=t[5],r[6]=t[9],r[7]=t[13],r[8]=t[2],r[9]=t[6],r[10]=t[10],r[11]=t[14],r[12]=t[3],r[13]=t[7],r[14]=t[11],r[15]=t[15],r},o.multiply=function(x,a,T){T||(T=x);var c=x[0],d=x[1],e=x[2],f=x[3],g=x[4],h=x[5],i=x[6],b=x[7],y=x[8],l=x[9],m=x[10],n=x[11],o=x[12],p=x[13],_=x[14],r=x[15],s=a[0],t=a[1],u=a[2],v=a[3];return T[0]=s*c+t*g+u*y+v*o,T[1]=s*d+t*h+u*l+v*p,T[2]=s*e+t*i+u*m+v*_,T[3]=s*f+t*b+u*n+v*r,s=a[4],t=a[5],u=a[6],v=a[7],T[4]=s*c+t*g+u*y+v*o,T[5]=s*d+t*h+u*l+v*p,T[6]=s*e+t*i+u*m+v*_,T[7]=s*f+t*b+u*n+v*r,s=a[8],t=a[9],u=a[10],v=a[11],T[8]=s*c+t*g+u*y+v*o,T[9]=s*d+t*h+u*l+v*p,T[10]=s*e+t*i+u*m+v*_,T[11]=s*f+t*b+u*n+v*r,s=a[12],t=a[13],u=a[14],v=a[15],T[12]=s*c+t*g+u*y+v*o,T[13]=s*d+t*h+u*l+v*p,T[14]=s*e+t*i+u*m+v*_,T[15]=s*f+t*b+u*n+v*r,T}},function(e,t,r){'use strict';function s(){a.call(this),this.renderable=!0,this.fillAlpha=1,this.lineWidth=0,this.lineColor='black',this.graphicsData=[],this.currentPath={points:[]}}var a=r(6),u=r(8),o=s.prototype=Object.create(a.prototype,{constructor:{value:s}});o.lineStyle=function(e,t,r){this.currentPath.points.length||this.graphicsData.pop(),this.lineWidth=e||0,this.lineColor=t||0,this.lineAlpha=3>arguments.length?1:r,this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,fillAlpha:this.fillAlpha,fill:this.filling,points:[],type:s.POLY},this.graphicsData.push(this.currentPath)},o.moveTo=function(e,t){this.currentPath.points.length||this.graphicsData.pop(),this.currentPath=this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,fillAlpha:this.fillAlpha,fill:this.filling,points:[],type:s.POLY},this.currentPath.points.push(e,t),this.graphicsData.push(this.currentPath)},o.lineTo=function(e,t){this.currentPath.points.push(e,t),this.dirty=!0},o.beginFill=function(e,t){this.filling=!0,this.fillColor=e||0,this.fillAlpha=2>arguments.length?1:t},o.endFill=function(){this.filling=!1,this.fillColor=null,this.fillAlpha=1},o.drawRect=function(e,t,r,a){this.currentPath.points.length||this.graphicsData.pop(),this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,fillAlpha:this.fillAlpha,fill:this.filling,points:[e,t,r,a],type:s.RECT},this.graphicsData.push(this.currentPath),this.dirty=!0},o.drawCircle=function(e,t,r){this.currentPath.points.length||this.graphicsData.pop(),this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,fillAlpha:this.fillAlpha,fill:this.filling,points:[e,t,r,r],type:s.CIRC},this.graphicsData.push(this.currentPath),this.dirty=!0},o.drawElipse=function(e,t,r,a){this.currentPath.points.length||this.graphicsData.pop(),this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,fillAlpha:this.fillAlpha,fill:this.filling,points:[e,t,r,a],type:s.ELIP},this.graphicsData.push(this.currentPath),this.dirty=!0},o.clear=function(){this.lineWidth=0,this.filling=!1,this.dirty=!0,this.clearDirty=!0,this.graphicsData=[],this.bounds=null},o.updateFilterBounds=function(){if(!this.bounds){for(var t,r,a,c=1/0,d=-(1/0),e=1/0,p=-(1/0),f=0;f<this.graphicsData.length;f++){var h=this.graphicsData[f],i=h.type,g=h.lineWidth;if(t=h.points,i===s.RECT){r=t.x-g/2,a=t.y-g/2;var x=t.width+g,l=t.height+g;c=c>r?r:c,d=r+x>d?r+x:d,e=e>a?r:e,p=a+l>p?a+l:p}else if(i===s.CIRC||i===s.ELIP){r=t.x,a=t.y;var m=t.radius+g/2;c=c>r-m?r-m:c,d=r+m>d?r+m:d,e=e>a-m?a-m:e,p=a+m>p?a+m:p}else for(var n=0;n<t.length;n+=2)r=t[n],a=t[n+1],c=c>r-g?r-g:c,d=r+g>d?r+g:d,e=e>a-g?a-g:e,p=a+g>p?a+g:p}this.bounds=new u(c,e,d-c,p-e)}},s.POLY=0,s.RECT=1,s.CIRC=2,s.ELIP=3,e.exports=s},function(e){'use strict';e.exports={NORMAL:0,SCREEN:1}},function(e,t,r){'use strict';function o(e,t){if(n.call(this),this.width=100,this.height=100,this.scaleMode=t||o.SCALE_MODE.DEFAULT,this.hasLoaded=!1,this.source=e,e){if(!('complete'in this.source))this.hasLoaded=!0,this.width=this.source.width,this.height=this.source.height,a.texturesToUpdate.push(this);else if(this.source.complete)this.hasLoaded=!0,this.width=this.source.width,this.height=this.source.height,a.texturesToUpdate.push(this);else{var r=this;this.source.onload=function(){r.hasLoaded=!0,r.width=r.source.width,r.height=r.source.height,a.texturesToUpdate.push(r),r.dispatchEvent({type:'loaded',content:r})}}this.imageUrl=null,this._powerOf2=!1}}var i=r(2),a=r(0),n=r(5),l={},s=o.prototype;s.destroy=function(){this.source.src&&(this.imageUrl in l&&delete l[this.imageUrl],this.imageUrl=null,this.source.src=null),this.source=null,a.texturesToDestroy.push(this)},s.updateSourceImage=function(e){this.hasLoaded=!1,this.source.src=null,this.source.src=e},o.fromImage=function(t,r,a){var n=l[t];if(!n){var s=new i.createImage;r&&(s.crossOrigin=''),s.src=t,n=new o(s,a),n.imageUrl=t,l[t]=n}return n},o.SCALE_MODE={DEFAULT:0,LINEAR:0,NEAREST:1},e.exports=o},function(e,t,r){'use strict';function o(t){var r='data:',a=t.slice(0,r.length).toLowerCase();if(a===r){var o=t.slice(r.length),i=o.indexOf(',');if(-1===i)return null;var e=o.slice(0,i).split(';')[0];return e&&'text/plain'!==e.toLowerCase()?e.split('/').pop().toLowerCase():'txt'}return null}function a(e,t){i.call(this),this.assetURLs=e,this.crossorigin=t}var i=r(5),n={},l=a.prototype;l.load=function(){function t(){r.onAssetLoaded()}var r=this;this.loadCount=this.assetURLs.length;for(var a=0,i=this.assetURLs.length;i>a;a++){var l=this.assetURLs[a],e=o(l);e||(e=l.split('?').shift().split('.').pop().toLowerCase());var s=n[e];if(!s)throw new Error(e+' is an unsupported file type');var d=new s(l,this.crossorigin);d.addEventListener('loaded',t),d.load()}},l.onAssetLoaded=function(){this.loadCount--,this.dispatchEvent({type:'onProgress',content:this}),this.onProgress&&this.onProgress(),this.loadCount||(this.dispatchEvent({type:'onComplete',content:this}),this.onComplete&&this.onComplete())},a.registerLoaderType=function(e,t){n[e]=t},e.exports=a},function(e,t,r){'use strict';var o=r(0),i=r(40),n=r(42),l=r(28);t.initDefaultShaders=function(){o.primitiveShader=new i,o.primitiveShader.init(),o.stripShader=new n,o.stripShader.init(),o.defaultShader=new l,o.defaultShader.init();var e=o.gl,t=o.defaultShader.program;e.useProgram(t),e.enableVertexAttribArray(o.defaultShader.aVertexPosition),e.enableVertexAttribArray(o.defaultShader.colorAttribute),e.enableVertexAttribArray(o.defaultShader.aTextureCoord)},t.activatePrimitiveShader=function(){var e=o.gl;e.useProgram(o.primitiveShader.program),e.disableVertexAttribArray(o.defaultShader.aVertexPosition),e.disableVertexAttribArray(o.defaultShader.colorAttribute),e.disableVertexAttribArray(o.defaultShader.aTextureCoord),e.enableVertexAttribArray(o.primitiveShader.aVertexPosition),e.enableVertexAttribArray(o.primitiveShader.colorAttribute)},t.deactivatePrimitiveShader=function(){var e=o.gl;e.useProgram(o.defaultShader.program),e.disableVertexAttribArray(o.primitiveShader.aVertexPosition),e.disableVertexAttribArray(o.primitiveShader.colorAttribute),e.enableVertexAttribArray(o.defaultShader.aVertexPosition),e.enableVertexAttribArray(o.defaultShader.colorAttribute),e.enableVertexAttribArray(o.defaultShader.aTextureCoord)},t.activateStripShader=function(){var e=o.gl;e.useProgram(o.stripShader.program)},t.deactivateStripShader=function(){var e=o.gl;e.useProgram(o.defaultShader.program)}},function(e){'use strict';e.exports=function(){this.visible=!0,this.renderable=!0}},function(e,t,r){'use strict';function a(t,r,a){i.call(this),this.texture=t,this.blendMode=o.NORMAL;try{this.uvs=new Float32Array([0,1,1,1,1,0,0,1]),this.verticies=new Float32Array([0,0,0,0,0,0,0,0,0]),this.colors=new Float32Array([1,1,1,1]),this.indices=new Uint16Array([0,1,2,3])}catch(e){this.uvs=[0,1,1,1,1,0,0,1],this.verticies=[0,0,0,0,0,0,0,0,0],this.colors=[1,1,1,1],this.indices=[0,1,2,3]}if(this.width=r,this.height=a,t.baseTexture.hasLoaded)this.width=this.texture.frame.width,this.height=this.texture.frame.height,this.updateFrame=!0;else{var n=this;this.texture.addEventListener('update',function(){n.onTextureUpdate()})}this.renderable=!0}var o=r(11),i=r(6),n=a.prototype=Object.create(i.prototype,{constructor:{value:a}});n.setTexture=function(e){this.texture=e,this.width=e.frame.width,this.height=e.frame.height,this.updateFrame=!0},n.onTextureUpdate=function(){this.updateFrame=!0},e.exports=a},function(e,t,r){'use strict';function a(e,t){n.call(this),this.texture=l.fromImage(e,t),this.frames=[]}var o=Math.floor,i=r(13),n=r(5),l=r(4),s=a.prototype;s.load=function(){if(this.texture.baseTexture.hasLoaded)this.onLoaded();else{var e=this;this.texture.baseTexture.addEventListener('loaded',function(){e.onLoaded()})}},s.onLoaded=function(){this.dispatchEvent({type:'loaded',content:this})},s.loadFramedSpriteSheet=function(t,r,n){this.frames=[];for(var s=o(this.texture.width/t),d=o(this.texture.height/r),e=0,u=0;d>u;u++)for(var c,i=0;s>i;i++,e++)c=new l(this.texture,{x:i*t,y:u*r,width:t,height:r}),this.frames.push(c),n&&(l.cache[n+'-'+e]=c);if(this.texture.baseTexture.hasLoaded)this.onLoaded();else{var p=this;this.texture.baseTexture.addEventListener('loaded',function(){p.onLoaded()})}},i.registerLoaderType('jpg',a),i.registerLoaderType('jpeg',a),i.registerLoaderType('png',a),i.registerLoaderType('gif',a),e.exports=a},function(e,t,r){'use strict';var o=r(2);t.shader=function(t,r,a){var i=r.join('\n'),n=t.createShader(a);return t.shaderSource(n,i),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS)?n:(o.console&&o.console.error(t.getShaderInfoLog(n)),null)},t.program=function(r,a,i){var n=t.shader(r,i,r.FRAGMENT_SHADER),l=t.shader(r,a,r.VERTEX_SHADER),e=r.createProgram();return r.attachShader(e,l),r.attachShader(e,n),r.linkProgram(e),r.getProgramParameter(e,r.LINK_STATUS)?e:(o.console&&o.console.error('Could not initialise shaders'),null)}},function(e,t,r){function a(){this.last=this,this.first=this,this.position=new i,this.scale=new i(1,1),this.pivot=new i(0,0),this.rotation=0,this.alpha=1,this.visible=!0,this.hitArea=null,this.buttonMode=!1,this.renderable=!1,this.parent=null,this.stage=null,this.worldAlpha=1,this._interactive=!1,this.defaultCursor='pointer',this.worldTransform=o.create(),this.localTransform=o.create(),this.color=[],this.dynamic=!0,this._sr=0,this._cr=1,this.filterArea=new l(0,0,1,1)}var s=r(0),o=r(9).mat3,n=r(15),i=r(3),l=r(8),d=a.prototype;d.setInteractive=function(e){this.interactive=e},Object.defineProperty(d,'interactive',{get:function(){return this._interactive},set:function(e){this._interactive=e,this.stage&&(this.stage.dirty=!0)}}),Object.defineProperty(d,'mask',{get:function(){return this._mask},set:function(e){e?this._mask?(e.start=this._mask.start,e.end=this._mask.end):(this.addFilter(e),e.renderable=!1):(this.removeFilter(this._mask),this._mask.renderable=!0),this._mask=e}}),Object.defineProperty(d,'filters',{get:function(){return this._filters},set:function(t){if(t){this._filters&&this.removeFilter(this._filters),this.addFilter(t);for(var r=[],a=0;a<t.length;a++)for(var o=t[a].passes,i=0;i<o.length;i++)r.push(o[i]);t.start.filterPasses=r}else this._filters&&this.removeFilter(this._filters);this._filters=t}}),d.addFilter=function(t){var r=new n,a=new n;t.start=r,t.end=a,r.data=t,a.data=t,r.first=r.last=this,a.first=a.last=this,r.open=!0,r.target=this;var o,l,e=r,s=r;l=this.first._iPrev,l?(o=l._iNext,e._iPrev=l,l._iNext=e):o=this,o&&(o._iPrev=s,s._iNext=o),e=a,s=a,o=null,l=null,l=this.last,o=l._iNext,o&&(o._iPrev=s,s._iNext=o),e._iPrev=l,l._iNext=e;for(var d=this,u=this.last;d;)d.last===u&&(d.last=a),d=d.parent;this.first=r,this.__renderGroup&&this.__renderGroup.addFilterBlocks(r,a)},d.removeFilter=function(t){var r=t.start,a=r._iNext,o=r._iPrev;a&&(a._iPrev=o),o&&(o._iNext=a),this.first=r._iNext;var i=t.end;a=i._iNext,o=i._iPrev,a&&(a._iPrev=o),o._iNext=a;for(var e=i._iPrev,n=this;n.last===i&&(n.last=e,n=n.parent););this.__renderGroup&&this.__renderGroup.removeFilterBlocks(r,i)},d.updateTransform=function(){this.rotation!==this.rotationCache&&(this.rotationCache=this.rotation,this._sr=Math.sin(this.rotation),this._cr=Math.cos(this.rotation));var t=this.localTransform,r=this.parent.worldTransform,a=this.worldTransform;t[0]=this._cr*this.scale.x,t[1]=-this._sr*this.scale.y,t[3]=this._sr*this.scale.x,t[4]=this._cr*this.scale.y;var u=this.pivot.x,d=this.pivot.y,e=t[0],c=t[1],f=this.position.x-t[0]*u-d*t[1],h=t[3],i=t[4],g=this.position.y-t[4]*d-u*t[3],x=r[0],l=r[1],m=r[2],n=r[3],o=r[4],p=r[5];t[2]=f,t[5]=g,a[0]=x*e+l*h,a[1]=x*c+l*i,a[2]=x*f+l*g+m,a[3]=n*e+o*h,a[4]=n*c+o*i,a[5]=n*f+o*g+p,this.worldAlpha=this.alpha*this.parent.worldAlpha,this.vcount=s.visibleCount},e.exports=a},function(e,t,r){'use strict';function a(e,t,r,a){this.transparent=a,this.width=e||800,this.height=t||600,this.view=r||o.createCanvas(),this.context=this.view.getContext('2d'),this.smoothProperty=null,'imageSmoothingEnabled'in this.context?this.smoothProperty='imageSmoothingEnabled':'webkitImageSmoothingEnabled'in this.context?this.smoothProperty='webkitImageSmoothingEnabled':'mozImageSmoothingEnabled'in this.context?this.smoothProperty='mozImageSmoothingEnabled':'oImageSmoothingEnabled'in this.context&&(this.smoothProperty='oImageSmoothingEnabled'),this.scaleMode=null,this.refresh=!0,this.view.width=this.width,this.view.height=this.height,this.count=0}var o=r(2),i=r(0),n=r(34),l=r(12),s=r(4),d=r(7),u=r(21),p=r(16),m=r(22),x=r(10),v=r(15),c=a.prototype;c.render=function(e){i.texturesToUpdate=[],i.texturesToDestroy=[],i.visibleCount++,e.updateTransform(),this.view.style.backgroundColor===e.backgroundColorString||this.transparent||(this.view.style.backgroundColor=e.backgroundColorString),this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.width,this.height),this.renderDisplayObject(e),e.interactive&&(e._interactiveEventsAdded||(e._interactiveEventsAdded=!0,e.interactionManager.setTarget(this))),0<s.frameUpdates.length&&(s.frameUpdates=[])},c.resize=function(e,t){this.width=e,this.height=t,this.view.width=e,this.view.height=t},c.renderDisplayObject=function(t){var r,a=this.context;a.globalCompositeOperation='source-over';var o=t.last._iNext;t=t.first;do if(!(r=t.worldTransform,t.visible))t=t.last._iNext;else if(t.renderable){if(t instanceof d){var i=t.texture.frame;i&&i.width&&i.height&&t.texture.baseTexture.source&&(a.globalAlpha=t.worldAlpha,a.setTransform(r[0],r[3],r[1],r[4],r[2],r[5]),this.smoothProperty&&this.scaleMode!==t.texture.baseTexture.scaleMode&&(this.scaleMode=t.texture.baseTexture.scaleMode,a[this.smoothProperty]=this.scaleMode===l.SCALE_MODE.LINEAR),a.drawImage(t.texture.baseTexture.source,i.x,i.y,i.width,i.height,t.anchor.x*-i.width,t.anchor.y*-i.height,i.width,i.height))}else if(t instanceof p)a.setTransform(r[0],r[3],r[1],r[4],r[2],r[5]),this.renderStrip(t);else if(t instanceof u)a.setTransform(r[0],r[3],r[1],r[4],r[2],r[5]),this.renderTilingSprite(t);else if(t instanceof m)a.setTransform(r[0],r[3],r[1],r[4],r[2],r[5]),t.renderCanvas(this);else if(t instanceof x)a.setTransform(r[0],r[3],r[1],r[4],r[2],r[5]),n.renderGraphics(t,a);else if(t instanceof v&&t.data instanceof x){var e=t.data;if(t.open){a.save();var s=e.alpha,c=e.worldTransform;a.setTransform(c[0],c[3],c[1],c[4],c[2],c[5]),e.worldAlpha=.5,a.worldAlpha=0,n.renderGraphicsMask(e,a),a.clip(),e.worldAlpha=s}else a.restore()}t=t._iNext}else t=t._iNext;while(t!==o)},c.renderStripFlat=function(t){var r=this.context,a=t.verticies,o=a.length/2;this.count++,r.beginPath();for(var n=1;o-2>n;n++){var e=2*n,s=a[e],d=a[e+2],u=a[e+4],i=a[e+1],c=a[e+3],p=a[e+5];r.moveTo(s,i),r.lineTo(d,c),r.lineTo(u,p)}r.fillStyle='#FF0000',r.fill(),r.closePath()},c.renderTilingSprite=function(e){var t=this.context;t.globalAlpha=e.worldAlpha,e.__tilePattern||(e.__tilePattern=t.createPattern(e.texture.baseTexture.source,'repeat')),t.beginPath();var r=e.tilePosition,a=e.tileScale;t.scale(a.x,a.y),t.translate(r.x,r.y),t.fillStyle=e.__tilePattern,t.fillRect(-r.x,-r.y,e.width/a.x,e.height/a.y),t.scale(1/a.x,1/a.y),t.translate(-r.x,-r.y),t.closePath()},c.renderStrip=function(u){var a=this.context,x=u.verticies,c=u.uvs,d=x.length/2;this.count++;for(var e=1;d-2>e;e++){var f=2*e,g=x[f],h=x[f+2],i=x[f+4],v=x[f+1],T=x[f+3],l=x[f+5],m=c[f]*u.texture.width,n=c[f+2]*u.texture.width,o=c[f+4]*u.texture.width,p=c[f+1]*u.texture.height,b=c[f+3]*u.texture.height,r=c[f+5]*u.texture.height;a.save(),a.beginPath(),a.moveTo(g,v),a.lineTo(h,T),a.lineTo(i,l),a.closePath(),a.clip();var s=m*b+p*o+n*r-b*o-p*n-m*r;a.transform((g*b+p*i+h*r-b*i-p*h-g*r)/s,(v*b+p*l+T*r-b*l-p*T-v*r)/s,(m*h+g*o+n*i-h*o-g*n-m*i)/s,(m*T+v*o+n*l-T*o-v*n-m*l)/s,(m*b*i+p*h*o+g*n*r-g*b*o-p*n*i-m*h*r)/s,(m*b*l+p*T*o+v*n*r-v*b*o-p*n*l-m*T*r)/s),a.drawImage(u.texture.baseTexture.source,0,0),a.restore()}},e.exports=a},function(e,t,r){'use strict';function a(e,t,r){i.call(this),this.texture=e,this.width=t,this.height=r,this.tileScale=new n(1,1),this.tilePosition=new n(0,0),this.renderable=!0,this.blendMode=o.NORMAL}var o=r(11),i=r(6),n=r(3),l=a.prototype=Object.create(i.prototype,{constructor:{value:a}});l.setTexture=function(e){this.texture=e,this.updateFrame=!0},l.onTextureUpdate=function(){this.updateFrame=!0},e.exports=a},function(e,t,r){'use strict';function a(){o.call(this),this.renderable=!0}var o=r(19),i=a.prototype=Object.create(o.prototype,{constructor:{value:a}});i.renderCanvas=function(){},i.initWebGL=function(){},i.renderWebGL=function(){},e.exports=a},function(e,t,r){'use strict';function o(e){this.gl=e,this.size=0,this.vertexBuffer=e.createBuffer(),this.indexBuffer=e.createBuffer(),this.uvBuffer=e.createBuffer(),this.colorBuffer=e.createBuffer(),this.blendMode=i.NORMAL,this.dynamicSize=1}var T=r(0),i=r(11),a=o.prototype;a.clean=function(){this.verticies=[],this.uvs=[],this.indices=[],this.colors=[],this.dynamicSize=1,this.texture=null,this.last=null,this.size=0,this.head=null,this.tail=null},a.restoreLostContext=function(e){this.gl=e,this.vertexBuffer=e.createBuffer(),this.indexBuffer=e.createBuffer(),this.uvBuffer=e.createBuffer(),this.colorBuffer=e.createBuffer()},a.init=function(e){e.batch=this,this.dirty=!0,this.blendMode=e.blendMode,this.texture=e.texture.baseTexture,this.head=e,this.tail=e,this.size=1,this.growBatch()},a.insertBefore=function(e,t){this.size++,e.batch=this,this.dirty=!0;var r=t.__prev;t.__prev=e,e.__next=t,r?(e.__prev=r,r.__next=e):this.head=e},a.insertAfter=function(e,t){this.size++,e.batch=this,this.dirty=!0;var r=t.__next;t.__next=e,e.__prev=t,r?(e.__next=r,r.__prev=e):this.tail=e},a.remove=function(e){return this.size--,this.size?(e.__prev?e.__prev.__next=e.__next:(this.head=e.__next,this.head.__prev=null),e.__next?e.__next.__prev=e.__prev:(this.tail=e.__prev,this.tail.__next=null),e.batch=null,e.__next=null,e.__prev=null,void(this.dirty=!0)):(e.batch=null,e.__prev=null,void(e.__next=null))},a.split=function(e){this.dirty=!0;var t=new o(this.gl);t.init(e),t.texture=this.texture,t.tail=this.tail,this.tail=e.__prev,this.tail.__next=null,e.__prev=null;for(var r=0;e;)r++,e.batch=t,e=e.__next;return t.size=r,this.size-=r,t},a.merge=function(e){this.dirty=!0,this.tail.__next=e.head,e.head.__prev=this.tail,this.size+=e.size,this.tail=e.tail;for(var t=e.head;t;)t.batch=this,t=t.__next},a.growBatch=function(){var t=this.gl;this.dynamicSize=1===this.size?1:1.5*this.size,this.verticies=new Float32Array(8*this.dynamicSize),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this.verticies,t.DYNAMIC_DRAW),this.uvs=new Float32Array(8*this.dynamicSize),t.bindBuffer(t.ARRAY_BUFFER,this.uvBuffer),t.bufferData(t.ARRAY_BUFFER,this.uvs,t.DYNAMIC_DRAW),this.dirtyUVS=!0,this.colors=new Float32Array(4*this.dynamicSize),t.bindBuffer(t.ARRAY_BUFFER,this.colorBuffer),t.bufferData(t.ARRAY_BUFFER,this.colors,t.DYNAMIC_DRAW),this.dirtyColors=!0,this.indices=new Uint16Array(6*this.dynamicSize);for(var r=0,a=this.indices.length/6;a>r;r++){var o=6*r,i=4*r;this.indices[o+0]=i+0,this.indices[o+1]=i+1,this.indices[o+2]=i+2,this.indices[o+3]=i+0,this.indices[o+4]=i+2,this.indices[o+5]=i+3}t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW)},a.refresh=function(){this.dynamicSize<this.size&&this.growBatch();for(var t,r,a=0,o=this.head;o;){t=8*a;var i=o.texture,e=i.frame,n=i.baseTexture.width,l=i.baseTexture.height;this.uvs[t+0]=e.x/n,this.uvs[t+1]=e.y/l,this.uvs[t+2]=(e.x+e.width)/n,this.uvs[t+3]=e.y/l,this.uvs[t+4]=(e.x+e.width)/n,this.uvs[t+5]=(e.y+e.height)/l,this.uvs[t+6]=e.x/n,this.uvs[t+7]=(e.y+e.height)/l,o.updateFrame=!1,r=4*a,this.colors[r]=this.colors[r+1]=this.colors[r+2]=this.colors[r+3]=o.worldAlpha,o=o.__next,a++}this.dirtyUVS=!0,this.dirtyColors=!0},a.update=function(){for(var _,a,b,c,A,E,f,g,h,i,C,S,l,m,n,o,p=0,R=this.head,r=this.verticies,s=this.uvs,t=this.colors;R;){if(R.vcount===T.visibleCount){if(a=R.texture.frame.width,b=R.texture.frame.height,c=R.anchor.x,A=R.anchor.y,E=a*(1-c),f=a*-c,g=b*(1-A),h=b*-A,i=8*p,_=R.worldTransform,C=_[0],S=_[3],l=_[1],m=_[4],n=_[2],o=_[5],r[i+0]=C*f+l*h+n,r[i+1]=m*h+S*f+o,r[i+2]=C*E+l*h+n,r[i+3]=m*h+S*E+o,r[i+4]=C*E+l*g+n,r[i+5]=m*g+S*E+o,r[i+6]=C*f+l*g+n,r[i+7]=m*g+S*f+o,R.updateFrame||R.texture.updateFrame){this.dirtyUVS=!0;var u=R.texture,v=u.frame,F=u.baseTexture.width,x=u.baseTexture.height;s[i+0]=v.x/F,s[i+1]=v.y/x,s[i+2]=(v.x+v.width)/F,s[i+3]=v.y/x,s[i+4]=(v.x+v.width)/F,s[i+5]=(v.y+v.height)/x,s[i+6]=v.x/F,s[i+7]=(v.y+v.height)/x,R.updateFrame=!1}if(R.cacheAlpha!==R.worldAlpha){R.cacheAlpha=R.worldAlpha;var y=4*p;t[y]=t[y+1]=t[y+2]=t[y+3]=R.worldAlpha,this.dirtyColors=!0}}else i=8*p,r[i+0]=r[i+1]=r[i+2]=r[i+3]=r[i+4]=r[i+5]=r[i+6]=r[i+7]=0;p++,R=R.__next}},a.render=function(t,r){if(t=t||0,2>arguments.length&&(r=this.size),this.dirty&&(this.refresh(),this.dirty=!1),this.size){this.update();var a=this.gl,o=T.defaultShader;a.bindBuffer(a.ARRAY_BUFFER,this.vertexBuffer),a.bufferSubData(a.ARRAY_BUFFER,0,this.verticies),a.vertexAttribPointer(o.aVertexPosition,2,a.FLOAT,!1,0,0),a.bindBuffer(a.ARRAY_BUFFER,this.uvBuffer),this.dirtyUVS&&(this.dirtyUVS=!1,a.bufferSubData(a.ARRAY_BUFFER,0,this.uvs)),a.vertexAttribPointer(o.aTextureCoord,2,a.FLOAT,!1,0,0),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,this.texture._glTexture),a.bindBuffer(a.ARRAY_BUFFER,this.colorBuffer),this.dirtyColors&&(this.dirtyColors=!1,a.bufferSubData(a.ARRAY_BUFFER,0,this.colors)),a.vertexAttribPointer(o.colorAttribute,1,a.FLOAT,!1,0,0),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var i=r-t;a.drawElements(a.TRIANGLES,6*i,a.UNSIGNED_SHORT,6*(2*t))}};var n=[];o.restoreBatches=function(e){for(var t=0,r=n.length;r>t;t++)n[t].restoreLostContext(e)},o.getBatch=function(){return n.length?n.pop():new o(T.gl)},o.returnBatch=function(e){e.clean(),n.push(e)},e.exports=o},function(e,t,r){'use strict';function s(e,t){this.gl=e,this.root=null,this.backgroundColor=void 0,this.transparent=!(void 0!==t)||t,this.batchs=[],this.toRemove=[],this.filterManager=new n(this.transparent)}var u=r(0),o=r(14),i=r(36),p=r(23),n=r(63),l=r(9).mat3,d=r(12),m=r(21),x=r(16),h=r(10),f=r(15),v=r(7),g=r(22),a=s.prototype;a.setRenderable=function(e){this.root&&this.removeDisplayObjectAndChildren(this.root),e.worldVisible=e.visible,this.root=e,this.addDisplayObjectAndChildren(e)},a.render=function(t,r){var a=this.gl;s.updateTextures(a),a.uniform2f(u.defaultShader.projectionVector,t.x,t.y),this.filterManager.begin(t,r),a.blendFunc(a.ONE,a.ONE_MINUS_SRC_ALPHA);for(var o,i=0;i<this.batchs.length;i++)o=this.batchs[i],o instanceof p?this.batchs[i].render():this.renderSpecial(o,t)},a.handleFilter=function(){},a.renderSpecific=function(t,r,a){var c=this.gl;s.updateTextures(c),c.uniform2f(u.defaultShader.projectionVector,r.x,r.y),this.filterManager.begin(r,a);for(var d,e,f,g,h,i,x=t.first;x._iNext&&(!x.renderable||!x.__renderGroup);)x=x._iNext;var T=x.batch;if(!(x instanceof v))T=x;else if(T=x.batch,i=T.head,i===x)d=0;else for(d=1;i.__next!==x;)d++,i=i.__next;for(var l=t.last;l._iPrev&&(!l.renderable||!l.__renderGroup);)l=l._iNext;if(!(l instanceof v))h=l;else if(h=l.batch,i=h.head,i===l)f=0;else for(f=1;i.__next!==l;)f++,i=i.__next;if(T===h)return void(T instanceof p?T.render(d,f+1):this.renderSpecial(T,r));e=this.batchs.indexOf(T),g=this.batchs.indexOf(h),T instanceof p?T.render(d):this.renderSpecial(T,r);for(var m,n=e+1;g>n;n++)m=this.batchs[n],m instanceof p?this.batchs[n].render():this.renderSpecial(m,r);h instanceof p?h.render(0,f+1):this.renderSpecial(h,r)},a.renderSpecial=function(e,t){var r=e.vcount===u.visibleCount;e instanceof m?r&&this.renderTilingSprite(e,t):e instanceof x?r&&this.renderStrip(e,t):e instanceof g?r&&e.renderWebGL(this,t):e instanceof h?r&&e.renderable&&i.renderGraphics(e,t):e instanceof f&&this.handleFilterBlock(e,t)};var T=[];a.handleFilterBlock=function(e,t){var r=u.gl;if(e.open)e.data instanceof Array?this.filterManager.pushFilter(e):(T.push(e),r.enable(r.STENCIL_TEST),r.colorMask(!1,!1,!1,!1),r.stencilFunc(r.ALWAYS,1,1),r.stencilOp(r.KEEP,r.KEEP,r.INCR),i.renderGraphics(e.data,t),r.colorMask(!0,!0,!0,!0),r.stencilFunc(r.NOTEQUAL,0,T.length),r.stencilOp(r.KEEP,r.KEEP,r.KEEP));else if(e.data instanceof Array)this.filterManager.popFilter();else{var a=T.pop(e);a&&(r.colorMask(!1,!1,!1,!1),r.stencilFunc(r.ALWAYS,1,1),r.stencilOp(r.KEEP,r.KEEP,r.DECR),i.renderGraphics(a.data,t),r.colorMask(!0,!0,!0,!0),r.stencilFunc(r.NOTEQUAL,0,T.length),r.stencilOp(r.KEEP,r.KEEP,r.KEEP)),r.disable(r.STENCIL_TEST)}},a.updateTexture=function(e){this.removeObject(e);for(var t=e.first;t!==this.root&&(t=t._iPrev,!t.renderable||!t.__renderGroup););for(var r=e.last;r._iNext&&(r=r._iNext,!r.renderable||!r.__renderGroup););this.insertObject(e,t,r)},a.addFilterBlocks=function(e,t){e.__renderGroup=this,t.__renderGroup=this;for(var r=e;r!==this.root.first&&(r=r._iPrev,!r.renderable||!r.__renderGroup););this.insertAfter(e,r);for(var a=t;a!==this.root.first&&(a=a._iPrev,!a.renderable||!a.__renderGroup););this.insertAfter(t,a)},a.removeFilterBlocks=function(e,t){this.removeObject(e),this.removeObject(t)},a.addDisplayObjectAndChildren=function(t){t.__renderGroup&&t.__renderGroup.removeDisplayObjectAndChildren(t);for(var r=t.first;r!==this.root.first&&(r=r._iPrev,!r.renderable||!r.__renderGroup););for(var a=t.last;a._iNext&&(a=a._iNext,!a.renderable||!a.__renderGroup););var o=t.first,i=t.last._iNext;do o.__renderGroup=this,o.renderable&&(this.insertObject(o,r,a),r=o),o=o._iNext;while(o!==i)},a.removeDisplayObjectAndChildren=function(e){if(e.__renderGroup===this)do e.__renderGroup=null,e.renderable&&this.removeObject(e),e=e._iNext;while(e)},a.insertObject=function(t,r,a){var o,n,e=r,l=a;if(t instanceof v){var s,d;if(!(e instanceof v))s=e;else if(s=e.batch,s&&s.texture===t.texture.baseTexture&&s.blendMode===t.blendMode)return void s.insertAfter(t,e);if(l)if(!(l instanceof v))d=l;else if(d=l.batch){if(d.texture===t.texture.baseTexture&&d.blendMode===t.blendMode)return void d.insertBefore(t,l);if(d===s){var i=s.split(l);return o=p.getBatch(),n=this.batchs.indexOf(s),o.init(t),void this.batchs.splice(n+1,0,o,i)}}return o=p.getBatch(),o.init(t),void(s?(n=this.batchs.indexOf(s),this.batchs.splice(n+1,0,o)):this.batchs.push(o))}t instanceof m?this.initTilingSprite(t):t instanceof x&&this.initStrip(t),this.insertAfter(t,e)},a.insertAfter=function(t,r){var a,o,i;r instanceof v?(a=r.batch,a?a.tail===r?(i=this.batchs.indexOf(a),this.batchs.splice(i+1,0,t)):(o=a.split(r.__next),i=this.batchs.indexOf(a),this.batchs.splice(i+1,0,t,o)):this.batchs.push(t)):(i=this.batchs.indexOf(r),this.batchs.splice(i+1,0,t))},a.removeObject=function(e){var t,r;if(e instanceof v){var a=e.batch;if(!a)return;a.remove(e),a.size||(t=a)}else t=e;if(t){if(r=this.batchs.indexOf(t),-1===r)return;if(0===r||r===this.batchs.length-1)return this.batchs.splice(r,1),void(t instanceof p&&p.returnBatch(t));if(this.batchs[r-1]instanceof p&&this.batchs[r+1]instanceof p&&this.batchs[r-1].texture===this.batchs[r+1].texture&&this.batchs[r-1].blendMode===this.batchs[r+1].blendMode)return this.batchs[r-1].merge(this.batchs[r+1]),t instanceof p&&p.returnBatch(t),p.returnBatch(this.batchs[r+1]),void this.batchs.splice(r,2);this.batchs.splice(r,1),t instanceof p&&p.returnBatch(t)}},a.initTilingSprite=function(e){var t=this.gl;e.verticies=new Float32Array([0,0,e.width,0,e.width,e.height,0,e.height]),e.uvs=new Float32Array([0,0,1,0,1,1,0,1]),e.colors=new Float32Array([1,1,1,1]),e.indices=new Uint16Array([0,1,3,2]),e._vertexBuffer=t.createBuffer(),e._indexBuffer=t.createBuffer(),e._uvBuffer=t.createBuffer(),e._colorBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,e._vertexBuffer),t.bufferData(t.ARRAY_BUFFER,e.verticies,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,e._uvBuffer),t.bufferData(t.ARRAY_BUFFER,e.uvs,t.DYNAMIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,e._colorBuffer),t.bufferData(t.ARRAY_BUFFER,e.colors,t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e._indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,e.indices,t.STATIC_DRAW),e.texture.baseTexture._glTexture?(t.bindTexture(t.TEXTURE_2D,e.texture.baseTexture._glTexture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT),e.texture.baseTexture._powerOf2=!0):e.texture.baseTexture._powerOf2=!0},a.renderStrip=function(t,r){var a=this.gl;o.activateStripShader();var i=u.stripShader,n=l.clone(t.worldTransform);l.transpose(n),a.uniformMatrix3fv(i.translationMatrix,!1,n),a.uniform2f(i.projectionVector,r.x,r.y),a.uniform2f(i.offsetVector,-u.offset.x,-u.offset.y),a.uniform1f(i.alpha,t.worldAlpha),t.dirty?(t.dirty=!1,a.bindBuffer(a.ARRAY_BUFFER,t._vertexBuffer),a.bufferData(a.ARRAY_BUFFER,t.verticies,a.STATIC_DRAW),a.vertexAttribPointer(i.aVertexPosition,2,a.FLOAT,!1,0,0),a.bindBuffer(a.ARRAY_BUFFER,t._uvBuffer),a.bufferData(a.ARRAY_BUFFER,t.uvs,a.STATIC_DRAW),a.vertexAttribPointer(i.aTextureCoord,2,a.FLOAT,!1,0,0),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,t.texture.baseTexture._glTexture),a.bindBuffer(a.ARRAY_BUFFER,t._colorBuffer),a.bufferData(a.ARRAY_BUFFER,t.colors,a.STATIC_DRAW),a.vertexAttribPointer(i.colorAttribute,1,a.FLOAT,!1,0,0),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,t._indexBuffer),a.bufferData(a.ELEMENT_ARRAY_BUFFER,t.indices,a.STATIC_DRAW)):(a.bindBuffer(a.ARRAY_BUFFER,t._vertexBuffer),a.bufferSubData(a.ARRAY_BUFFER,0,t.verticies),a.vertexAttribPointer(i.aVertexPosition,2,a.FLOAT,!1,0,0),a.bindBuffer(a.ARRAY_BUFFER,t._uvBuffer),a.vertexAttribPointer(i.aTextureCoord,2,a.FLOAT,!1,0,0),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,t.texture.baseTexture._glTexture),a.bindBuffer(a.ARRAY_BUFFER,t._colorBuffer),a.vertexAttribPointer(i.colorAttribute,1,a.FLOAT,!1,0,0),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,t._indexBuffer)),a.drawElements(a.TRIANGLE_STRIP,t.indices.length,a.UNSIGNED_SHORT,0),o.deactivateStripShader()},a.renderTilingSprite=function(t,r){var a=this.gl,o=t.tilePosition,n=t.tileScale,e=o.x/t.texture.baseTexture.width,l=o.y/t.texture.baseTexture.height,s=t.width/t.texture.baseTexture.width/n.x,d=t.height/t.texture.baseTexture.height/n.y;t.uvs[0]=0-e,t.uvs[1]=0-l,t.uvs[2]=1*s-e,t.uvs[3]=0-l,t.uvs[4]=1*s-e,t.uvs[5]=1*d-l,t.uvs[6]=0-e,t.uvs[7]=1*d-l,a.bindBuffer(a.ARRAY_BUFFER,t._uvBuffer),a.bufferSubData(a.ARRAY_BUFFER,0,t.uvs),this.renderStrip(t,r)},a.initStrip=function(e){var t=this.gl;e._vertexBuffer=t.createBuffer(),e._indexBuffer=t.createBuffer(),e._uvBuffer=t.createBuffer(),e._colorBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,e._vertexBuffer),t.bufferData(t.ARRAY_BUFFER,e.verticies,t.DYNAMIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,e._uvBuffer),t.bufferData(t.ARRAY_BUFFER,e.uvs,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,e._colorBuffer),t.bufferData(t.ARRAY_BUFFER,e.colors,t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e._indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,e.indices,t.STATIC_DRAW)},s.updateTexture=function(e,t){t._glTexture||(t._glTexture=e.createTexture()),t.hasLoaded&&(e.bindTexture(e.TEXTURE_2D,t._glTexture),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t.source),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,t.scaleMode===d.SCALE_MODE.LINEAR?e.LINEAR:e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t.scaleMode===d.SCALE_MODE.LINEAR?e.LINEAR:e.NEAREST),t._powerOf2?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT)):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)),e.bindTexture(e.TEXTURE_2D,null))},s.destroyTexture=function(e,t){t._glTexture&&(t._glTexture=e.createTexture(),e.deleteTexture(e.TEXTURE_2D,t._glTexture))},s.updateTextures=function(e){for(var t=0,r=u.texturesToUpdate.length;r>t;t++)s.updateTexture(e,u.texturesToUpdate[t]);for(t=0,r=u.texturesToDestroy.length;r>t;t++)s.destroyTexture(e,u.texturesToDestroy[t]);u.texturesToUpdate=[],u.texturesToDestroy=[]},e.exports=s},function(e,t,r){'use strict';function o(t){if(l.call(this),this.spineData=o.animCache[t],!this.spineData)throw new Error('Spine data must be preloaded using SpineLoader or AssetLoader: '+t);this.skeleton=new n.Skeleton(this.spineData),this.skeleton.updateWorldTransform(),this.stateData=new n.AnimationStateData(this.spineData),this.state=new n.AnimationState(this.stateData),this.slotContainers=[];for(var r=0,a=this.skeleton.drawOrder.length;a>r;r++){var i=this.skeleton.drawOrder[r],s=i.attachment,e=new l;if(this.slotContainers.push(e),this.addChild(e),s instanceof n.RegionAttachment){var d=s.rendererObject.name,u=this.createSprite(i,s.rendererObject);i.currentSprite=u,i.currentSpriteName=d,e.addChild(u)}}}var n=r(26),l=r(6),i=r(7),s=r(4),a=o.prototype=Object.create(l.prototype,{constructor:{value:o}});a.updateTransform=function(){this.lastTime=this.lastTime||Date.now();var t=.001*(Date.now()-this.lastTime);this.lastTime=Date.now(),this.state.update(t),this.state.apply(this.skeleton),this.skeleton.updateWorldTransform();for(var r=this.skeleton.drawOrder,a=0,o=r.length;o>a;a++){var s=r[a],e=s.attachment,d=this.slotContainers[a];if(e instanceof n.RegionAttachment){if(e.rendererObject&&(!s.currentSpriteName||s.currentSpriteName!==e.name)){var u=e.rendererObject.name;if(void 0!==s.currentSprite&&(s.currentSprite.visible=!1),s.sprites=s.sprites||{},void 0!==s.sprites[u])s.sprites[u].visible=!0;else{var c=this.createSprite(s,e.rendererObject);d.addChild(c)}s.currentSprite=s.sprites[u],s.currentSpriteName=u}d.visible=!0;var i=s.bone;d.position.x=i.worldX+e.x*i.m00+e.y*i.m01,d.position.y=i.worldY+e.x*i.m10+e.y*i.m11,d.scale.x=i.worldScaleX,d.scale.y=i.worldScaleY,d.rotation=-(s.bone.worldRotation*Math.PI/180)}else d.visible=!1}l.prototype.updateTransform.call(this)},a.createSprite=function(e,t){var r=s.cache[t.name]?t.name:t.name+'.png',a=new i(s.fromFrame(r));return a.scale=t.scale,a.rotation=t.rotation,a.anchor.x=a.anchor.y=.5,e.sprites=e.sprites||{},e.sprites[t.name]=a,a},o.animCache={},e.exports=o},function(e){'use strict';var t=Math.abs,a=Math.max,s=Math.PI,u=Math.cos,x=Math.sin,T=e.exports={};T.BoneData=function(e,t){this.name=e,this.parent=t},T.BoneData.prototype={length:0,x:0,y:0,rotation:0,scaleX:1,scaleY:1},T.SlotData=function(e,t){this.name=e,this.boneData=t},T.SlotData.prototype={r:1,g:1,b:1,a:1,attachmentName:null},T.Bone=function(e,t){this.data=e,this.parent=t,this.setToSetupPose()},T.Bone.yDown=!1,T.Bone.prototype={x:0,y:0,rotation:0,scaleX:1,scaleY:1,m00:0,m01:0,worldX:0,m10:0,m11:0,worldY:0,worldRotation:0,worldScaleX:1,worldScaleY:1,updateWorldTransform:function(t,r){var a=this.parent;null==a?(this.worldX=this.x,this.worldY=this.y,this.worldScaleX=this.scaleX,this.worldScaleY=this.scaleY,this.worldRotation=this.rotation):(this.worldX=this.x*a.m00+this.y*a.m01+a.worldX,this.worldY=this.x*a.m10+this.y*a.m11+a.worldY,this.worldScaleX=a.worldScaleX*this.scaleX,this.worldScaleY=a.worldScaleY*this.scaleY,this.worldRotation=a.worldRotation+this.rotation);var o=this.worldRotation*s/180,i=u(o),e=x(o);this.m00=i*this.worldScaleX,this.m10=e*this.worldScaleX,this.m01=-e*this.worldScaleY,this.m11=i*this.worldScaleY,t&&(this.m00=-this.m00,this.m01=-this.m01),r&&(this.m10=-this.m10,this.m11=-this.m11),T.Bone.yDown&&(this.m10=-this.m10,this.m11=-this.m11)},setToSetupPose:function(){var e=this.data;this.x=e.x,this.y=e.y,this.rotation=e.rotation,this.scaleX=e.scaleX,this.scaleY=e.scaleY}},T.Slot=function(e,t,r){this.data=e,this.skeleton=t,this.bone=r,this.setToSetupPose()},T.Slot.prototype={r:1,g:1,b:1,a:1,_attachmentTime:0,attachment:null,setAttachment:function(e){this.attachment=e,this._attachmentTime=this.skeleton.time},setAttachmentTime:function(e){this._attachmentTime=this.skeleton.time-e},getAttachmentTime:function(){return this.skeleton.time-this._attachmentTime},setToSetupPose:function(){var e=this.data;this.r=e.r,this.g=e.g,this.b=e.b,this.a=e.a;for(var t=this.skeleton.data.slots,r=0,a=t.length;a>r;r++)if(t[r]==e){this.setAttachment(e.attachmentName?this.skeleton.getAttachmentBySlotIndex(r,e.attachmentName):null);break}}},T.Skin=function(e){this.name=e,this.attachments={}},T.Skin.prototype={addAttachment:function(e,t,r){this.attachments[e+':'+t]=r},getAttachment:function(e,t){return this.attachments[e+':'+t]},_attachAll:function(t,r){for(var a in r.attachments){var o=a.indexOf(':'),i=parseInt(a.substring(0,o),10),e=a.substring(o+1),n=t.slots[i];if(n.attachment&&n.attachment.name==e){var l=this.getAttachment(i,e);l&&n.setAttachment(l)}}}},T.Animation=function(e,t,r){this.name=e,this.timelines=t,this.duration=r},T.Animation.prototype={apply:function(t,r,a){a&&this.duration&&(r%=this.duration);for(var o=this.timelines,i=0,e=o.length;e>i;i++)o[i].apply(t,r,1)},mix:function(t,r,a,o){a&&this.duration&&(r%=this.duration);for(var i=this.timelines,e=0,n=i.length;n>e;e++)i[e].apply(t,r,o)}},T.binarySearch=function(t,r,a){var o=0,i=Math.floor(t.length/a)-2;if(!i)return a;for(var n=i>>>1;;){if(t[(n+1)*a]<=r?o=n+1:i=n,o==i)return(o+1)*a;n=o+i>>>1}},T.linearSearch=function(t,r,a){for(var o=0,i=t.length-a;i>=o;o+=a)if(t[o]>r)return o;return-1},T.Curves=function(e){this.curves=[],this.curves.length=6*(e-1)},T.Curves.prototype={setLinear:function(e){this.curves[6*e]=0},setStepped:function(e){this.curves[6*e]=-1},setCurve:function(t,a,s,u,d){var e=.1,f=e*e,g=f*e,h=3*e,i=3*f,x=6*f,v=6*g,l=2*-a+u,m=2*-s+d,n=3*(a-u)+1,o=3*(s-d)+1,p=6*t,T=this.curves;T[p]=a*h+l*i+n*g,T[p+1]=s*h+m*i+o*g,T[p+2]=l*x+n*v,T[p+3]=m*x+o*v,T[p+4]=n*v,T[p+5]=o*v},getCurvePercent:function(t,r){r=0>r?0:1<r?1:r;var a=6*t,s=this.curves,d=s[a];if(!d)return r;if(-1==d)return 0;for(var u=s[a+1],c=s[a+2],p=s[a+3],h=s[a+4],i=s[a+5],f=d,g=u,l=8;;){if(f>=r){var x=f-d,n=g-u;return n+(g-n)*(r-x)/(f-x)}if(!l)break;l--,d+=c,u+=p,c+=h,p+=i,f+=d,g+=u}return g+(1-g)*(r-f)/(1-f)}},T.RotateTimeline=function(e){this.curves=new T.Curves(e),this.frames=[],this.frames.length=2*e},T.RotateTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/2},setFrame:function(e,t,r){e*=2,this.frames[e]=t,this.frames[e+1]=r},apply:function(t,r,a){var o,n=this.frames;if(!(r<n[0])){var e=t.bones[this.boneIndex];if(r>=n[n.length-2]){for(o=e.data.rotation+n[n.length-1]-e.rotation;180<o;)o-=360;for(;-180>o;)o+=360;return void(e.rotation+=o*a)}var l=T.binarySearch(n,r,2),s=n[l-1],d=n[l],i=1-(r-d)/(n[l-2]-d);for(i=this.curves.getCurvePercent(l/2-1,i),o=n[l+1]-s;180<o;)o-=360;for(;-180>o;)o+=360;for(o=e.data.rotation+(s+o*i)-e.rotation;180<o;)o-=360;for(;-180>o;)o+=360;e.rotation+=o*a}}},T.TranslateTimeline=function(e){this.curves=new T.Curves(e),this.frames=[],this.frames.length=3*e},T.TranslateTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(e,t,r,a){e*=3,this.frames[e]=t,this.frames[e+1]=r,this.frames[e+2]=a},apply:function(t,r,a){var o=this.frames;if(!(r<o[0])){var n=t.bones[this.boneIndex];if(r>=o[o.length-3])return n.x+=(n.data.x+o[o.length-2]-n.x)*a,void(n.y+=(n.data.y+o[o.length-1]-n.y)*a);var e=T.binarySearch(o,r,3),l=o[e-2],s=o[e-1],d=o[e],i=1-(r-d)/(o[e+-3]-d);i=this.curves.getCurvePercent(e/3-1,i),n.x+=(n.data.x+l+(o[e+1]-l)*i-n.x)*a,n.y+=(n.data.y+s+(o[e+2]-s)*i-n.y)*a}}},T.ScaleTimeline=function(e){this.curves=new T.Curves(e),this.frames=[],this.frames.length=3*e},T.ScaleTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(e,t,r,a){e*=3,this.frames[e]=t,this.frames[e+1]=r,this.frames[e+2]=a},apply:function(t,r,a){var o=this.frames;if(!(r<o[0])){var n=t.bones[this.boneIndex];if(r>=o[o.length-3])return n.scaleX+=(n.data.scaleX-1+o[o.length-2]-n.scaleX)*a,void(n.scaleY+=(n.data.scaleY-1+o[o.length-1]-n.scaleY)*a);var e=T.binarySearch(o,r,3),l=o[e-2],s=o[e-1],d=o[e],i=1-(r-d)/(o[e+-3]-d);i=this.curves.getCurvePercent(e/3-1,i),n.scaleX+=(n.data.scaleX-1+l+(o[e+1]-l)*i-n.scaleX)*a,n.scaleY+=(n.data.scaleY-1+s+(o[e+2]-s)*i-n.scaleY)*a}}},T.ColorTimeline=function(e){this.curves=new T.Curves(e),this.frames=[],this.frames.length=5*e},T.ColorTimeline.prototype={slotIndex:0,getFrameCount:function(){return this.frames.length/2},setFrame:function(t,r,a,o,i,e){t*=5,this.frames[t]=r,this.frames[t+1]=a,this.frames[t+2]=o,this.frames[t+3]=i,this.frames[t+4]=e},apply:function(t,r,a){var s=this.frames;if(!(r<s[0])){var d=t.slots[this.slotIndex];if(r>=s[s.length-5]){var e=s.length-1;return d.r=s[e-3],d.g=s[e-2],d.b=s[e-1],void(d.a=s[e])}var u=T.binarySearch(s,r,5),c=s[u-4],h=s[u-3],i=s[u-2],f=s[u-1],g=s[u],l=1-(r-g)/(s[u-5]-g);l=this.curves.getCurvePercent(u/5-1,l);var m=c+(s[u+1]-c)*l,n=h+(s[u+2]-h)*l,o=i+(s[u+3]-i)*l,p=f+(s[u+4]-f)*l;1>a?(d.r+=(m-d.r)*a,d.g+=(n-d.g)*a,d.b+=(o-d.b)*a,d.a+=(p-d.a)*a):(d.r=m,d.g=n,d.b=o,d.a=p)}}},T.AttachmentTimeline=function(e){this.curves=new T.Curves(e),this.frames=[],this.frames.length=e,this.attachmentNames=[],this.attachmentNames.length=e},T.AttachmentTimeline.prototype={slotIndex:0,getFrameCount:function(){return this.frames.length},setFrame:function(e,t,r){this.frames[e]=t,this.attachmentNames[e]=r},apply:function(t,r){var a=this.frames;if(!(r<a[0])){var o=r>=a[a.length-1]?a.length-1:T.binarySearch(a,r,1)-1;var e=this.attachmentNames[o];t.slots[this.slotIndex].setAttachment(e?t.getAttachmentBySlotIndex(this.slotIndex,e):null)}}},T.SkeletonData=function(){this.bones=[],this.slots=[],this.skins=[],this.animations=[]},T.SkeletonData.prototype={defaultSkin:null,findBone:function(e){for(var t=this.bones,r=0,a=t.length;a>r;r++)if(t[r].name==e)return t[r];return null},findBoneIndex:function(e){for(var t=this.bones,r=0,a=t.length;a>r;r++)if(t[r].name==e)return r;return-1},findSlot:function(e){for(var t=this.slots,r=0,a=t.length;a>r;r++)if(t[r].name==e)return t[r];return null},findSlotIndex:function(e){for(var t=this.slots,r=0,a=t.length;a>r;r++)if(t[r].name==e)return r;return-1},findSkin:function(e){for(var t=this.skins,r=0,a=t.length;a>r;r++)if(t[r].name==e)return t[r];return null},findAnimation:function(e){for(var t=this.animations,r=0,a=t.length;a>r;r++)if(t[r].name==e)return t[r];return null}},T.Skeleton=function(t){this.data=t,this.bones=[];for(var r=0,a=t.bones.length;a>r;r++){var o=t.bones[r],i=o.parent?this.bones[t.bones.indexOf(o.parent)]:null;this.bones.push(new T.Bone(o,i))}for(this.slots=[],this.drawOrder=[],r=0,a=t.slots.length;a>r;r++){var e=t.slots[r],n=this.bones[t.bones.indexOf(e.boneData)],l=new T.Slot(e,this,n);this.slots.push(l),this.drawOrder.push(l)}},T.Skeleton.prototype={x:0,y:0,skin:null,r:1,g:1,b:1,a:1,time:0,flipX:!1,flipY:!1,updateWorldTransform:function(){for(var t=this.flipX,r=this.flipY,a=this.bones,o=0,i=a.length;i>o;o++)a[o].updateWorldTransform(t,r)},setToSetupPose:function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},setBonesToSetupPose:function(){for(var e=this.bones,t=0,r=e.length;r>t;t++)e[t].setToSetupPose()},setSlotsToSetupPose:function(){for(var e=this.slots,t=0,r=e.length;r>t;t++)e[t].setToSetupPose(t)},getRootBone:function(){return this.bones.length?this.bones[0]:null},findBone:function(e){for(var t=this.bones,r=0,a=t.length;a>r;r++)if(t[r].data.name==e)return t[r];return null},findBoneIndex:function(e){for(var t=this.bones,r=0,a=t.length;a>r;r++)if(t[r].data.name==e)return r;return-1},findSlot:function(e){for(var t=this.slots,r=0,a=t.length;a>r;r++)if(t[r].data.name==e)return t[r];return null},findSlotIndex:function(e){for(var t=this.slots,r=0,a=t.length;a>r;r++)if(t[r].data.name==e)return r;return-1},setSkinByName:function(e){var t=this.data.findSkin(e);if(!t)throw'Skin not found: '+e;this.setSkin(t)},setSkin:function(e){this.skin&&e&&e._attachAll(this,this.skin),this.skin=e},getAttachmentBySlotName:function(e,t){return this.getAttachmentBySlotIndex(this.data.findSlotIndex(e),t)},getAttachmentBySlotIndex:function(e,t){if(this.skin){var r=this.skin.getAttachment(e,t);if(r)return r}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(e,t):null},setAttachment:function(t,r){for(var a,o=this.slots,i=0,n=o.size;n>i;i++)if(a=o[i],a.data.name==t){var e=null;if(r&&(e=this.getAttachment(i,r),null==e))throw'Attachment not found: '+r+', for slot: '+t;return void a.setAttachment(e)}throw'Slot not found: '+t},update:function(e){this.time+=e}},T.AttachmentType={region:0},T.RegionAttachment=function(){this.offset=[],this.offset.length=8,this.uvs=[],this.uvs.length=8},T.RegionAttachment.prototype={x:0,y:0,rotation:0,scaleX:1,scaleY:1,width:0,height:0,rendererObject:null,regionOffsetX:0,regionOffsetY:0,regionWidth:0,regionHeight:0,regionOriginalWidth:0,regionOriginalHeight:0,setUVs:function(t,r,a,o,i){var e=this.uvs;i?(e[2]=t,e[3]=o,e[4]=t,e[5]=r,e[6]=a,e[7]=r,e[0]=a,e[1]=o):(e[0]=t,e[1]=o,e[2]=t,e[3]=r,e[4]=a,e[5]=r,e[6]=a,e[7]=o)},updateOffset:function(){var t=this.width/this.regionOriginalWidth*this.scaleX,a=this.height/this.regionOriginalHeight*this.scaleY,v=-this.width/2*this.scaleX+this.regionOffsetX*t,c=-this.height/2*this.scaleY+this.regionOffsetY*a,d=v+this.regionWidth*t,e=c+this.regionHeight*a,f=this.rotation*s/180,g=u(f),h=x(f),i=v*g+this.x,T=v*h,b=c*g+this.y,l=c*h,m=d*g+this.x,n=d*h,o=e*g+this.y,p=e*h,y=this.offset;y[0]=i-l,y[1]=b+T,y[2]=i-p,y[3]=o+T,y[4]=m-p,y[5]=o+n,y[6]=m-l,y[7]=b+n},computeVertices:function(t,r,a,o){t+=a.worldX,r+=a.worldY;var n=a.m00,e=a.m01,l=a.m10,s=a.m11,d=this.offset;o[0]=d[0]*n+d[1]*e+t,o[1]=d[0]*l+d[1]*s+r,o[2]=d[2]*n+d[3]*e+t,o[3]=d[2]*l+d[3]*s+r,o[4]=d[4]*n+d[5]*e+t,o[5]=d[4]*l+d[5]*s+r,o[6]=d[6]*n+d[7]*e+t,o[7]=d[6]*l+d[7]*s+r}},T.AnimationStateData=function(e){this.skeletonData=e,this.animationToMixTime={}},T.AnimationStateData.prototype={defaultMix:0,setMixByName:function(t,r,a){var o=this.skeletonData.findAnimation(t);if(!o)throw'Animation not found: '+t;var i=this.skeletonData.findAnimation(r);if(!i)throw'Animation not found: '+r;this.setMix(o,i,a)},setMix:function(e,t,r){this.animationToMixTime[e.name+':'+t.name]=r},getMix:function(e,t){var r=this.animationToMixTime[e.name+':'+t.name];return r?r:this.defaultMix}},T.AnimationState=function(e){this.data=e,this.queue=[]},T.AnimationState.prototype={current:null,previous:null,currentTime:0,previousTime:0,currentLoop:!1,previousLoop:!1,mixTime:0,mixDuration:0,update:function(e){if(this.currentTime+=e,this.previousTime+=e,this.mixTime+=e,0<this.queue.length){var t=this.queue[0];this.currentTime>=t.delay&&(this._setAnimation(t.animation,t.loop),this.queue.shift())}},apply:function(e){if(this.current)if(this.previous){this.previous.apply(e,this.previousTime,this.previousLoop);var t=this.mixTime/this.mixDuration;1<=t&&(t=1,this.previous=null),this.current.mix(e,this.currentTime,this.currentLoop,t)}else this.current.apply(e,this.currentTime,this.currentLoop)},clearAnimation:function(){this.previous=null,this.current=null,this.queue.length=0},_setAnimation:function(e,t){this.previous=null,e&&this.current&&(this.mixDuration=this.data.getMix(this.current,e),0<this.mixDuration&&(this.mixTime=0,this.previous=this.current,this.previousTime=this.currentTime,this.previousLoop=this.currentLoop)),this.current=e,this.currentLoop=t,this.currentTime=0},setAnimationByName:function(e,t){var r=this.data.skeletonData.findAnimation(e);if(!r)throw'Animation not found: '+e;this.setAnimation(r,t)},setAnimation:function(e,t){this.queue.length=0,this._setAnimation(e,t)},addAnimationByName:function(e,t,r){var a=this.data.skeletonData.findAnimation(e);if(!a)throw'Animation not found: '+e;this.addAnimation(a,t,r)},addAnimation:function(t,r,a){var o={};if(o.animation=t,o.loop=r,!a||0>=a){var i=this.queue.length?this.queue[this.queue.length-1].animation:this.current;a=null==i?0:i.duration-this.data.getMix(i,t)+(a||0)}o.delay=a,this.queue.push(o)},isComplete:function(){return!this.current||this.currentTime>=this.current.duration}},T.SkeletonJson=function(e){this.attachmentLoader=e},T.SkeletonJson.prototype={scale:1,readSkeletonData:function(x){for(var a,y=new T.SkeletonData,c=x.bones,d=0,e=c.length;e>d;d++){var f=c[d],g=null;if(f.parent&&(g=y.findBone(f.parent),!g))throw'Parent bone not found: '+f.parent;a=new T.BoneData(f.name,g),a.length=(f.length||0)*this.scale,a.x=(f.x||0)*this.scale,a.y=(f.y||0)*this.scale,a.rotation=f.rotation||0,a.scaleX=f.scaleX||1,a.scaleY=f.scaleY||1,y.bones.push(a)}var _=x.slots;for(d=0,e=_.length;e>d;d++){var i=_[d];if(a=y.findBone(i.bone),!a)throw'Slot bone not found: '+i.bone;var A=new T.SlotData(i.name,a),E=i.color;E&&(A.r=T.SkeletonJson.toColor(E,0),A.g=T.SkeletonJson.toColor(E,1),A.b=T.SkeletonJson.toColor(E,2),A.a=T.SkeletonJson.toColor(E,3)),A.attachmentName=i.attachment,y.slots.push(A)}var l=x.skins;for(var m in l)if(l.hasOwnProperty(m)){var n=l[m],o=new T.Skin(m);for(var p in n)if(n.hasOwnProperty(p)){var C=y.findSlotIndex(p),r=n[p];for(var s in r)if(r.hasOwnProperty(s)){var t=this.readAttachment(o,s,r[s]);null!=t&&o.addAttachment(C,s,t)}}y.skins.push(o),'default'==o.name&&(y.defaultSkin=o)}var u=x.animations;for(var v in u)u.hasOwnProperty(v)&&this.readAnimation(v,u[v],y);return y},readAttachment:function(t,r,a){r=a.name||r;var o=T.AttachmentType[a.type||'region'];if(o==T.AttachmentType.region){var i=new T.RegionAttachment;return i.x=(a.x||0)*this.scale,i.y=(a.y||0)*this.scale,i.scaleX=a.scaleX||1,i.scaleY=a.scaleY||1,i.rotation=a.rotation||0,i.width=(a.width||32)*this.scale,i.height=(a.height||32)*this.scale,i.updateOffset(),i.rendererObject={},i.rendererObject.name=r,i.rendererObject.scale={},i.rendererObject.scale.x=i.scaleX,i.rendererObject.scale.y=i.scaleY,i.rendererObject.rotation=-i.rotation*s/180,i}throw'Unknown attachment type: '+o},readAnimation:function(_,E,b){var c,d,e,f,g,h,i,C=[],S=0,l=E.bones;for(var m in l)if(l.hasOwnProperty(m)){var n=b.findBoneIndex(m);if(-1==n)throw'Bone not found: '+m;var o=l[m];for(e in o)if(o.hasOwnProperty(e))if(g=o[e],'rotate'==e){for(d=new T.RotateTimeline(g.length),d.boneIndex=n,c=0,h=0,i=g.length;i>h;h++)f=g[h],d.setFrame(c,f.time,f.angle),T.SkeletonJson.readCurve(d,c,f),c++;C.push(d),S=a(S,d.frames[2*d.getFrameCount()-2])}else{if('translate'!=e&&'scale'!=e)throw'Invalid timeline type for a bone: '+e+' ('+m+')';var p=1;for('scale'==e?d=new T.ScaleTimeline(g.length):(d=new T.TranslateTimeline(g.length),p=this.scale),d.boneIndex=n,c=0,h=0,i=g.length;i>h;h++){f=g[h];var R=(f.x||0)*p,r=(f.y||0)*p;d.setFrame(c,f.time,R,r),T.SkeletonJson.readCurve(d,c,f),c++}C.push(d),S=a(S,d.frames[3*d.getFrameCount()-3])}}var s=E.slots;for(var t in s)if(s.hasOwnProperty(t)){var u=s[t],v=b.findSlotIndex(t);for(e in u)if(u.hasOwnProperty(e))if(g=u[e],'color'==e){for(d=new T.ColorTimeline(g.length),d.slotIndex=v,c=0,h=0,i=g.length;i>h;h++){f=g[h];var F=f.color,x=T.SkeletonJson.toColor(F,0),y=T.SkeletonJson.toColor(F,1),w=T.SkeletonJson.toColor(F,2),A=T.SkeletonJson.toColor(F,3);d.setFrame(c,f.time,x,y,w,A),T.SkeletonJson.readCurve(d,c,f),c++}C.push(d),S=a(S,d.frames[5*d.getFrameCount()-5])}else{if('attachment'!=e)throw'Invalid timeline type for a slot: '+e+' ('+t+')';for(d=new T.AttachmentTimeline(g.length),d.slotIndex=v,c=0,h=0,i=g.length;i>h;h++)f=g[h],d.setFrame(c++,f.time,f.name);C.push(d),S=a(S,d.frames[d.getFrameCount()-1])}}b.animations.push(new T.Animation(_,C,S))}},T.SkeletonJson.readCurve=function(e,t,r){var a=r.curve;a&&('stepped'==a?e.curves.setStepped(t):a instanceof Array&&e.curves.setCurve(t,a[0],a[1],a[2],a[3]))},T.SkeletonJson.toColor=function(e,t){if(8!=e.length)throw'Color hexidecimal length must be 8, recieved: '+e;return parseInt(e.substring(2*t,2),16)/255},T.Atlas=function(r,a){this.textureLoader=a,this.pages=[],this.regions=[];var o=new T.AtlasReader(r),n=[];n.length=4;for(var s,d=null;;){if(s=o.readLine(),null==s)break;if(s=o.trim(s),!s.length)d=null;else if(d){var e=new T.AtlasRegion;e.name=s,e.page=d,e.rotate='true'==o.readValue(),o.readTuple(n);var u=parseInt(n[0],10),c=parseInt(n[1],10);o.readTuple(n);var i=parseInt(n[0],10),p=parseInt(n[1],10);e.u=u/d.width,e.v=c/d.height,e.rotate?(e.u2=(u+p)/d.width,e.v2=(c+i)/d.height):(e.u2=(u+i)/d.width,e.v2=(c+p)/d.height),e.x=u,e.y=c,e.width=t(i),e.height=t(p),4==o.readTuple(n)&&(e.splits=[parseInt(n[0],10),parseInt(n[1],10),parseInt(n[2],10),parseInt(n[3],10)],4==o.readTuple(n)&&(e.pads=[parseInt(n[0],10),parseInt(n[1],10),parseInt(n[2],10),parseInt(n[3],10)],o.readTuple(n))),e.originalWidth=parseInt(n[0],10),e.originalHeight=parseInt(n[1],10),o.readTuple(n),e.offsetX=parseInt(n[0],10),e.offsetY=parseInt(n[1],10),e.index=parseInt(o.readValue(),10),this.regions.push(e)}else{d=new T.AtlasPage,d.name=s,d.format=T.Atlas.Format[o.readValue()],o.readTuple(n),d.minFilter=T.Atlas.TextureFilter[n[0]],d.magFilter=T.Atlas.TextureFilter[n[1]];var h=o.readValue();d.uWrap=T.Atlas.TextureWrap.clampToEdge,d.vWrap=T.Atlas.TextureWrap.clampToEdge,'x'==h?d.uWrap=T.Atlas.TextureWrap.repeat:'y'==h?d.vWrap=T.Atlas.TextureWrap.repeat:'xy'==h&&(d.uWrap=d.vWrap=T.Atlas.TextureWrap.repeat),a.load(d,s),this.pages.push(d)}}},T.Atlas.prototype={findRegion:function(e){for(var t=this.regions,r=0,a=t.length;a>r;r++)if(t[r].name==e)return t[r];return null},dispose:function(){for(var e=this.pages,t=0,r=e.length;r>t;t++)this.textureLoader.unload(e[t].rendererObject)},updateUVs:function(t){for(var r,e=this.regions,a=0,o=e.length;o>a;a++)r=e[a],r.page==t&&(r.u=r.x/t.width,r.v=r.y/t.height,r.rotate?(r.u2=(r.x+r.height)/t.width,r.v2=(r.y+r.width)/t.height):(r.u2=(r.x+r.width)/t.width,r.v2=(r.y+r.height)/t.height))}},T.Atlas.Format={alpha:0,intensity:1,luminanceAlpha:2,rgb565:3,rgba4444:4,rgb888:5,rgba8888:6},T.Atlas.TextureFilter={nearest:0,linear:1,mipMap:2,mipMapNearestNearest:3,mipMapLinearNearest:4,mipMapNearestLinear:5,mipMapLinearLinear:6},T.Atlas.TextureWrap={mirroredRepeat:0,clampToEdge:1,repeat:2},T.AtlasPage=function(){},T.AtlasPage.prototype={name:null,format:null,minFilter:null,magFilter:null,uWrap:null,vWrap:null,rendererObject:null,width:0,height:0},T.AtlasRegion=function(){},T.AtlasRegion.prototype={page:null,name:null,x:0,y:0,width:0,height:0,u:0,v:0,u2:0,v2:0,offsetX:0,offsetY:0,originalWidth:0,originalHeight:0,index:0,rotate:!1,splits:null,pads:null},T.AtlasReader=function(e){this.lines=e.split(/\r\n|\r|\n/)},T.AtlasReader.prototype={index:0,trim:function(e){return e.replace(/^\s+|\s+$/g,'')},readLine:function(){return this.index>=this.lines.length?null:this.lines[this.index++]},readValue:function(){var e=this.readLine(),t=e.indexOf(':');if(-1==t)throw'Invalid line: '+e;return this.trim(e.substring(t+1))},readTuple:function(t){var r=this.readLine(),a=r.indexOf(':');if(-1==a)throw'Invalid line: '+r;for(var o,i=0,n=a+1;3>i;i++){if(o=r.indexOf(',',n),-1==o){if(!i)throw'Invalid line: '+r;break}t[i]=this.trim(r.substr(n,o-n)),n=o+1}return t[i]=this.trim(r.substring(n)),i+1}},T.AtlasAttachmentLoader=function(e){this.atlas=e},T.AtlasAttachmentLoader.prototype={newAttachment:function(t,r,a){switch(r){case T.AttachmentType.region:var o=this.atlas.findRegion(a);if(!o)throw'Region not found in atlas: '+a+' ('+r+')';var i=new T.RegionAttachment(a);return i.rendererObject=o,i.setUVs(o.u,o.v,o.u2,o.v2,o.rotate),i.regionOffsetX=o.offsetX,i.regionOffsetY=o.offsetY,i.regionWidth=o.width,i.regionHeight=o.height,i.regionOriginalWidth=o.originalWidth,i.regionOriginalHeight=o.originalHeight,i;}throw'Unknown attachment type: '+r}},T.Bone.yDown=!0},function(e,t,r){'use strict';function a(e,t){n.call(this),this.url=e,this.crossorigin=t,this.baseUrl=e.replace(/[^\/]*$/,''),this.loaded=!1}var o=r(13),i=r(17),n=r(5),l=r(4),s=r(25),d=r(26).SkeletonJson,u=r(2),c=a.prototype;c.handleEvent=function(e){switch(e.type){case'load':this.onJSONLoaded();break;default:this.onError();}},c.load=function(){this.request=u.createRequest(),this.request.addEventListener('load',this),this.request.addEventListener('error',this),this.request.open('GET',this.url,!0),this.request.overrideMimeType&&this.request.overrideMimeType('application/json'),this.request.send(null)},c.onJSONLoaded=function(){if(this.json=JSON.parse(this.request.responseText),this.json.frames){var t=this,r=this.baseUrl+this.json.meta.image,a=new i(r,this.crossorigin),o=this.json.frames;for(var n in this.texture=a.texture.baseTexture,a.addEventListener('loaded',function(){t.onLoaded()}),o){var e=o[n].frame;e&&(l.cache[n]=new l(this.texture,{x:e.x,y:e.y,width:e.w,height:e.h}),o[n].trimmed&&(l.cache[n].realSize=o[n].spriteSourceSize,l.cache[n].trim.x=0))}a.load()}else if(this.json.bones){var u=new d,c=u.readSkeletonData(this.json);s.animCache[this.url]=c,this.onLoaded()}else this.onLoaded()},c.onLoaded=function(){this.loaded=!0,this.dispatchEvent({type:'loaded',content:this})},c.onError=function(){this.dispatchEvent({type:'error',content:this})},o.registerLoaderType('json',a),e.exports=a},function(e,t,r){'use strict';function o(){this.program=null,this.fragmentSrc=['precision lowp float;','varying vec2 vTextureCoord;','varying float vColor;','uniform sampler2D uSampler;','void main(void) {','   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor;','}'],this.textureCount=0}var i=r(18),n=r(0),a=o.prototype;a.init=function(){var e=n.gl,t=i.program(e,this.vertexSrc||o.defaultVertexSrc,this.fragmentSrc);for(var r in e.useProgram(t),this.uSampler=e.getUniformLocation(t,'uSampler'),this.projectionVector=e.getUniformLocation(t,'projectionVector'),this.offsetVector=e.getUniformLocation(t,'offsetVector'),this.dimensions=e.getUniformLocation(t,'dimensions'),this.aVertexPosition=e.getAttribLocation(t,'aVertexPosition'),this.colorAttribute=e.getAttribLocation(t,'aColor'),this.aTextureCoord=e.getAttribLocation(t,'aTextureCoord'),this.uniforms)this.uniforms[r].uniformLocation=e.getUniformLocation(t,r);this.initUniforms(),this.program=t},a.initUniforms=function(){this.textureCount=1;var e;for(var t in this.uniforms){e=this.uniforms[t];var r=e.type;'sampler2D'===r?(e._init=!1,null!==e.value&&this.initSampler2D(e)):'mat2'===r||'mat3'===r||'mat4'===r?(e.glMatrix=!0,e.glValueLength=1,'mat2'===r?e.glFunc=n.gl.uniformMatrix2fv:'mat3'===r?e.glFunc=n.gl.uniformMatrix3fv:'mat4'===r&&(e.glFunc=n.gl.uniformMatrix4fv)):(e.glFunc=n.gl['uniform'+r],e.glValueLength='2f'===r||'2i'===r?2:'3f'===r||'3i'===r?3:'4f'===r||'4i'===r?4:1)}},a.initSampler2D=function(t){if(t.value&&t.value.baseTexture&&t.value.baseTexture.hasLoaded){if(n.gl.activeTexture(n.gl['TEXTURE'+this.textureCount]),n.gl.bindTexture(n.gl.TEXTURE_2D,t.value.baseTexture._glTexture),t.textureData){var r=t.textureData,a=r.magFilter?r.magFilter:n.gl.LINEAR,o=r.minFilter?r.minFilter:n.gl.LINEAR,l=r.wrapS?r.wrapS:n.gl.CLAMP_TO_EDGE,e=r.wrapT?r.wrapT:n.gl.CLAMP_TO_EDGE,s=r.luminance?n.gl.LUMINANCE:n.gl.RGBA;if(r.repeat&&(l=n.gl.REPEAT,e=n.gl.REPEAT),n.gl.pixelStorei(n.gl.UNPACK_FLIP_Y_WEBGL,!1),r.width){var d=r.width?r.width:512,u=r.height?r.height:2,i=r.border?r.border:0;n.gl.texImage2D(n.gl.TEXTURE_2D,0,s,d,u,i,s,n.gl.UNSIGNED_BYTE,null)}else n.gl.texImage2D(n.gl.TEXTURE_2D,0,s,n.gl.RGBA,n.gl.UNSIGNED_BYTE,t.value.baseTexture.source);n.gl.texParameteri(n.gl.TEXTURE_2D,n.gl.TEXTURE_MAG_FILTER,a),n.gl.texParameteri(n.gl.TEXTURE_2D,n.gl.TEXTURE_MIN_FILTER,o),n.gl.texParameteri(n.gl.TEXTURE_2D,n.gl.TEXTURE_WRAP_S,l),n.gl.texParameteri(n.gl.TEXTURE_2D,n.gl.TEXTURE_WRAP_T,e)}n.gl.uniform1i(t.uniformLocation,this.textureCount),t._init=!0,this.textureCount++}},a.syncUniforms=function(){this.textureCount=1;var e;for(var t in this.uniforms)e=this.uniforms[t],1===e.glValueLength?!0===e.glMatrix?e.glFunc.call(n.gl,e.uniformLocation,e.transpose,e.value):e.glFunc.call(n.gl,e.uniformLocation,e.value):2===e.glValueLength?e.glFunc.call(n.gl,e.uniformLocation,e.value.x,e.value.y):3===e.glValueLength?e.glFunc.call(n.gl,e.uniformLocation,e.value.x,e.value.y,e.value.z):4===e.glValueLength?e.glFunc.call(n.gl,e.uniformLocation,e.value.x,e.value.y,e.value.z,e.value.w):'sampler2D'===e.type&&(e._init?(n.gl.activeTexture(n.gl['TEXTURE'+this.textureCount]),n.gl.bindTexture(n.gl.TEXTURE_2D,e.value.baseTexture._glTexture),n.gl.uniform1i(e.uniformLocation,this.textureCount),this.textureCount++):this.initSampler2D(e))},o.defaultVertexSrc=['attribute vec2 aVertexPosition;','attribute vec2 aTextureCoord;','attribute float aColor;','uniform vec2 projectionVector;','uniform vec2 offsetVector;','varying vec2 vTextureCoord;','varying float vColor;','const vec2 center = vec2(-1.0, 1.0);','void main(void) {','   gl_Position = vec4( ((aVertexPosition + offsetVector) / projectionVector) + center , 0.0, 1.0);','   vTextureCoord = aTextureCoord;','   vColor = aColor;','}'],e.exports=o},function(e,t,r){'use strict';function a(){o.call(this),this.passes=[this],this.uniforms={blur:{type:'1f',value:1/512}},this.fragmentSrc=['precision mediump float;','varying vec2 vTextureCoord;','varying float vColor;','uniform float blur;','uniform sampler2D uSampler;','void main(void) {','   vec4 sum = vec4(0.0);','   sum += texture2D(uSampler, vec2(vTextureCoord.x - 4.0*blur, vTextureCoord.y)) * 0.05;','   sum += texture2D(uSampler, vec2(vTextureCoord.x - 3.0*blur, vTextureCoord.y)) * 0.09;','   sum += texture2D(uSampler, vec2(vTextureCoord.x - 2.0*blur, vTextureCoord.y)) * 0.12;','   sum += texture2D(uSampler, vec2(vTextureCoord.x - blur, vTextureCoord.y)) * 0.15;','   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * 0.16;','   sum += texture2D(uSampler, vec2(vTextureCoord.x + blur, vTextureCoord.y)) * 0.15;','   sum += texture2D(uSampler, vec2(vTextureCoord.x + 2.0*blur, vTextureCoord.y)) * 0.12;','   sum += texture2D(uSampler, vec2(vTextureCoord.x + 3.0*blur, vTextureCoord.y)) * 0.09;','   sum += texture2D(uSampler, vec2(vTextureCoord.x + 4.0*blur, vTextureCoord.y)) * 0.05;','   gl_FragColor = sum;','}']}var o=r(1),i=a.prototype=Object.create(o.prototype,{constructor:{value:a}});Object.defineProperty(i,'blur',{get:function(){return this.uniforms.blur.value/(1/7e3)},set:function(e){this.dirty=!0,this.uniforms.blur.value=1/7e3*e}}),e.exports=a},function(e,t,r){'use strict';function a(){o.call(this),this.passes=[this],this.uniforms={blur:{type:'1f',value:1/512}},this.fragmentSrc=['precision mediump float;','varying vec2 vTextureCoord;','varying float vColor;','uniform float blur;','uniform sampler2D uSampler;','void main(void) {','   vec4 sum = vec4(0.0);','   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 4.0*blur)) * 0.05;','   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 3.0*blur)) * 0.09;','   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 2.0*blur)) * 0.12;','   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - blur)) * 0.15;','   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * 0.16;','   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + blur)) * 0.15;','   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 2.0*blur)) * 0.12;','   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 3.0*blur)) * 0.09;','   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 4.0*blur)) * 0.05;','   gl_FragColor = sum;','}']}var o=r(1),i=a.prototype=Object.create(o.prototype,{constructor:{value:a}});Object.defineProperty(i,'blur',{get:function(){return this.uniforms.blur.value/(1/7e3)},set:function(e){this.uniforms.blur.value=1/7e3*e}}),e.exports=a},function(e,t,r){'use strict';function o(e,t){i.call(this),this.setText(e),this.setStyle(t),this.updateText(),this.dirty=!1}var s=Math.max,i=r(6),a=r(7),n=r(3),l=o.prototype=Object.create(i.prototype,{constructor:{value:o}});l.setText=function(e){this.text=e||' ',this.dirty=!0},l.setStyle=function(e){e=e||{},e.align=e.align||'left',this.style=e;var t=e.font.split(' ');this.fontName=t[t.length-1],this.fontSize=2<=t.length?parseInt(t[t.length-2],10):o.fonts[this.fontName].size,this.dirty=!0},l.updateText=function(){for(var t,r=o.fonts[this.fontName],u=new n,p=null,c=[],d=0,e=[],f=0,x=this.fontSize/r.size,h=0;h<this.text.length;h++)if(t=this.text.charCodeAt(h),/(?:\r\n|\r|\n)/.test(this.text.charAt(h)))e.push(u.x),d=s(d,u.x),f++,u.x=0,u.y+=r.lineHeight,p=null;else{var i=r.chars[t];i&&(p&&i[p]&&(u.x+=i.kerning[p]),c.push({texture:i.texture,line:f,charCode:t,position:new n(u.x+i.xOffset,u.y+i.yOffset)}),u.x+=i.xAdvance,p=t)}e.push(u.x),d=s(d,u.x);var v=[];for(h=0;f>=h;h++){var l=0;'right'===this.style.align?l=d-e[h]:'center'===this.style.align&&(l=(d-e[h])/2),v.push(l)}for(h=0;h<c.length;h++){var m=new a(c[h].texture);m.position.x=(c[h].position.x+v[c[h].line])*x,m.position.y=c[h].position.y*x,m.scale.x=m.scale.y=x,this.addChild(m)}this.width=d*x,this.height=(u.y+r.lineHeight)*x},l.updateTransform=function(){if(this.dirty){for(;0<this.children.length;)this.removeChild(this.getChildAt(0));this.updateText(),this.dirty=!1}i.prototype.updateTransform.call(this)},o.fonts={},e.exports=o},function(e,t,r){'use strict';function o(){this.global=new n,this.local=new n,this.target=null,this.originalEvent=null}function a(e){this.stage=e,this.mouse=new o,this.touchs={},this.tempPoint=new n,this.mouseoverEnabled=!0,this.pool=[],this.interactiveItems=[],this.interactionDOMElement=null,this.last=0}var d=r(0),n=r(3),x=r(7),i=r(2);o.prototype.getLocalPosition=function(t){var r=t.worldTransform,a=this.global,o=r[0],l=r[1],s=r[2],d=r[3],u=r[4],c=r[5],p=1/(o*u+l*-d);return new n(u*p*a.x+-l*p*a.y+(c*l-s*u)*p,o*p*a.y+-d*p*a.x+(-c*o+s*d)*p)};var l=a.prototype;l.handleEvent=function(e){switch(e.type){case'mousedown':this.onMouseDown(e);break;case'mousemove':this.onMouseMove(e);break;case'mouseup':this.onMouseUp(e);break;case'mouseout':this.onMouseOut(e);break;case'touchstart':this.onTouchStart(e);break;case'touchmove':this.onTouchMove(e);break;case'touchend':this.onTouchEnd(e);}},l.collectInteractiveSprite=function(t,r){for(var a,e=t.children,o=e.length-1;0<=o;o--)a=e[o],a.interactive?(r.interactiveChildren=!0,this.interactiveItems.push(a),0<a.children.length&&this.collectInteractiveSprite(a,a)):(a.__iParent=null,0<a.children.length&&this.collectInteractiveSprite(a,r))},l.setTarget=function(e){e?null===this.interactionDOMElement&&this.setTargetDomElement(e.view):null!==this.target&&i.window.removeEventListener('mouseup',this,!0),i.window.addEventListener('mouseup',this,!0),this.target=e},l.setTargetDomElement=function(e){null!==this.interactionDOMElement&&(this.interactionDOMElement.style['-ms-content-zooming']='',this.interactionDOMElement.style['-ms-touch-action']='',this.interactionDOMElement.removeEventListener('mousemove',this,!0),this.interactionDOMElement.removeEventListener('mousedown',this,!0),this.interactionDOMElement.removeEventListener('mouseout',this,!0),this.interactionDOMElement.removeEventListener('touchstart',this,!0),this.interactionDOMElement.removeEventListener('touchend',this,!0),this.interactionDOMElement.removeEventListener('touchmove',this,!0));var t=i.navigator;t&&t.msPointerEnabled&&(e.style['-ms-content-zooming']='none',e.style['-ms-touch-action']='none'),e.addEventListener('mousemove',this,!0),e.addEventListener('mousedown',this,!0),e.addEventListener('mouseout',this,!0),e.addEventListener('touchstart',this,!0),e.addEventListener('touchend',this,!0),e.addEventListener('touchmove',this,!0),this.interactionDOMElement=e},l.update=function(){if(this.target){var t=Date.now(),r=t-this.last;if(r=30*r/1e3,!(1>r)){this.last=t;var a,o;if(this.dirty){for(this.dirty=!1,a=0,o=this.interactiveItems.length;o>a;a++)this.interactiveItems[a].interactiveChildren=!1;this.interactiveItems=[],this.stage.interactive&&this.interactiveItems.push(this.stage),this.collectInteractiveSprite(this.stage,this.stage)}for(this.interactionDOMElement.style.cursor='inherit',a=0,o=this.interactiveItems.length;o>a;a++){var i=this.interactiveItems[a];(i.mouseover||i.mouseout||i.buttonMode)&&(i.__hit=this.hitTest(i,this.mouse),this.mouse.target=i,i.__hit?(i.buttonMode&&(this.interactionDOMElement.style.cursor=i.defaultCursor),i.__isOver||(i.mouseover&&i.mouseover(this.mouse),i.__isOver=!0)):i.__isOver&&(i.mouseout&&i.mouseout(this.mouse),i.__isOver=!1))}}}},l.onMouseMove=function(t){this.mouse.originalEvent=t;var r=this.interactionDOMElement.getBoundingClientRect();this.mouse.global.x=(t.clientX-r.left)*(this.target.width/r.width),this.mouse.global.y=(t.clientY-r.top)*(this.target.height/r.height);for(var a,e=0,o=this.interactiveItems.length;o>e;e++)a=this.interactiveItems[e],a.mousemove&&a.mousemove(this.mouse)},l.onMouseDown=function(e){this.mouse.originalEvent=e;for(var t,r=0,a=this.interactiveItems.length;a>r&&(t=this.interactiveItems[r],!((t.mousedown||t.click)&&(t.__mouseIsDown=!0,t.__hit=this.hitTest(t,this.mouse),t.__hit&&(t.mousedown&&t.mousedown(this.mouse),t.__isDown=!0,!t.interactiveChildren))));r++);},l.onMouseOut=function(){this.interactionDOMElement.style.cursor='inherit';for(var e,t=0,r=this.interactiveItems.length;r>t;t++)e=this.interactiveItems[t],e.__isOver&&(this.mouse.target=e,e.mouseout&&e.mouseout(this.mouse),e.__isOver=!1)},l.onMouseUp=function(t){this.mouse.originalEvent=t;for(var r,e=!1,a=0,o=this.interactiveItems.length;o>a;a++)r=this.interactiveItems[a],(r.mouseup||r.mouseupoutside||r.click)&&(r.__hit=this.hitTest(r,this.mouse),r.__hit&&!e?(r.mouseup&&r.mouseup(this.mouse),r.__isDown&&r.click&&r.click(this.mouse),r.interactiveChildren||(e=!0)):r.__isDown&&r.mouseupoutside&&r.mouseupoutside(this.mouse),r.__isDown=!1)},l.hitTest=function(T,a){var b=a.global;if(T.vcount!==d.visibleCount)return!1;var c=T.worldTransform,e=c[0],f=c[1],y=c[2],h=c[3],_=c[4],A=c[5],E=1/(e*_+f*-h),l=_*E*b.x+-f*E*b.y+(A*f-y*_)*E,m=e*E*b.y+-h*E*b.x+(-A*e+y*h)*E;if(a.target=T,T.hitArea&&T.hitArea.contains)return!!T.hitArea.contains(l,m)&&(a.target=T,!0);if(T instanceof x){var n,o=T.texture.frame.width,C=T.texture.frame.height,S=-o*T.anchor.x;if(l>S&&S+o>l&&(n=-C*T.anchor.y,m>n&&n+C>m))return a.target=T,!0}for(var r=0,s=T.children.length;s>r;r++){var t=T.children[r],u=this.hitTest(t,a);if(u)return a.target=T,!0}return!1},l.onTouchMove=function(t){var r,a,o,n,e,l,s,d=this.interactionDOMElement.getBoundingClientRect(),i=t.changedTouches;for(r=0,a=i.length;a>r;r++)for(o=i[r],n=this.touchs[o.identifier],n.originalEvent=t,n.global.x=(o.clientX-d.left)*(this.target.width/d.width),n.global.y=(o.clientY-d.top)*(this.target.height/d.height),e=0,l=this.interactiveItems.length;l>e;e++)s=this.interactiveItems[r],s.touchmove&&s.touchmove(n)},l.onTouchStart=function(t){for(var r=this.interactionDOMElement.getBoundingClientRect(),a=t.changedTouches,n=0,l=a.length;l>n;n++){var e=a[n],s=this.pool.pop();s||(s=new o),s.originalEvent=t,this.touchs[e.identifier]=s,s.global.x=(e.clientX-r.left)*(this.target.width/r.width),s.global.y=(e.clientY-r.top)*(this.target.height/r.height);for(var d,u=0,c=this.interactiveItems.length;c>u&&(d=this.interactiveItems[u],!((d.touchstart||d.tap)&&(d.__hit=this.hitTest(d,s),d.__hit&&(d.touchstart&&d.touchstart(s),d.__isDown=!0,d.__touchData=s,!d.interactiveChildren))));u++);}},l.onTouchEnd=function(t){for(var r=this.interactionDOMElement.getBoundingClientRect(),a=t.changedTouches,o=0,n=a.length;n>o;o++){var e=a[o],s=this.touchs[e.identifier],d=!1;s.global.x=(e.clientX-r.left)*(this.target.width/r.width),s.global.y=(e.clientY-r.top)*(this.target.height/r.height);for(var u=0,i=this.interactiveItems.length;i>u;u++){var c=this.interactiveItems[u],p=c.__touchData;c.__hit=this.hitTest(c,s),p===s&&(s.originalEvent=t,(c.touchend||c.tap)&&(c.__hit&&!d?(c.touchend&&c.touchend(s),c.__isDown&&c.tap&&c.tap(s),c.interactiveChildren||(d=!0)):c.__isDown&&c.touchendoutside&&c.touchendoutside(s),c.__isDown=!1),c.__touchData=null)}this.pool.push(s),this.touchs[e.identifier]=null}},e.exports=a},function(e,t){'use strict';t.hex2rgb=function(e){return[(255&e>>16)/255,(255&e>>8)/255,(255&e)/255]}},function(e,t,r){'use strict';var x=Math.PI,u=r(2),T=r(10);t.renderGraphics=function(y,a){for(var b,c,d,e,f=y.worldAlpha,g='',h=0,i=y.graphicsData.length;i>h;h++)if(b=y.graphicsData[h],c=b.points,g=a.strokeStyle='#'+('00000'+(0|b.lineColor).toString(16)).substr(-6),a.lineWidth=b.lineWidth,b.type===T.POLY){for(a.beginPath(),a.moveTo(c[0],c[1]),d=1,e=c.length/2;e>d;d++)a.lineTo(c[2*d],c[2*d+1]);c[0]===c[c.length-2]&&c[1]===c[c.length-1]&&a.closePath(),b.fill&&(a.globalAlpha=b.fillAlpha*f,a.fillStyle=g='#'+('00000'+(0|b.fillColor).toString(16)).substr(-6),a.fill()),b.lineWidth&&(a.globalAlpha=b.lineAlpha*f,a.stroke())}else if(b.type===T.RECT)(b.fillColor||0===b.fillColor)&&(a.globalAlpha=b.fillAlpha*f,a.fillStyle=g='#'+('00000'+(0|b.fillColor).toString(16)).substr(-6),a.fillRect(c[0],c[1],c[2],c[3])),b.lineWidth&&(a.globalAlpha=b.lineAlpha*f,a.strokeRect(c[0],c[1],c[2],c[3]));else if(b.type===T.CIRC)a.beginPath(),a.arc(c[0],c[1],c[2],0,2*x),a.closePath(),b.fill&&(a.globalAlpha=b.fillAlpha*f,a.fillStyle=g='#'+('00000'+(0|b.fillColor).toString(16)).substr(-6),a.fill()),b.lineWidth&&(a.globalAlpha=b.lineAlpha*f,a.stroke());else if(b.type===T.ELIP){var _=b.points,A=2*_[2],l=2*_[3],m=_[0]-A/2,n=_[1]-l/2;a.beginPath();var o=.5522848,p=A/2*o,E=l/2*o,r=m+A,s=n+l,t=m+A/2,u=n+l/2;a.moveTo(m,u),a.bezierCurveTo(m,u-E,t-p,n,t,n),a.bezierCurveTo(t+p,n,r,u-E,r,u),a.bezierCurveTo(r,u+E,t+p,s,t,s),a.bezierCurveTo(t-p,s,m,u+E,m,u),a.closePath(),b.fill&&(a.globalAlpha=b.fillAlpha*f,a.fillStyle=g='#'+('00000'+(0|b.fillColor).toString(16)).substr(-6),a.fill()),b.lineWidth&&(a.globalAlpha=b.lineAlpha*f,a.stroke())}},t.renderGraphicsMask=function(t,a){var v=t.graphicsData.length;if(0!==v){1<v&&(v=1,u.console.warn('Pixi.js warning: masks in canvas can only mask using the first path in the graphics object'));for(var c=0;1>c;c++){var d=t.graphicsData[c],e=d.points;if(d.type===T.POLY){a.beginPath(),a.moveTo(e[0],e[1]);for(var f=1;f<e.length/2;f++)a.lineTo(e[2*f],e[2*f+1]);e[0]===e[e.length-2]&&e[1]===e[e.length-1]&&a.closePath()}else if(d.type===T.RECT)a.beginPath(),a.rect(e[0],e[1],e[2],e[3]),a.closePath();else if(d.type===T.CIRC)a.beginPath(),a.arc(e[0],e[1],e[2],0,2*x),a.closePath();else if(d.type===T.ELIP){var g=d.points,h=2*g[2],i=2*g[3],b=g[0]-h/2,y=g[1]-i/2;a.beginPath();var l=.5522848,m=h/2*l,n=i/2*l,o=b+h,p=y+i,_=b+h/2,r=y+i/2;a.moveTo(b,r),a.bezierCurveTo(b,r-n,_-m,y,_,y),a.bezierCurveTo(_+m,y,o,r-n,o,r),a.bezierCurveTo(o,r+n,_+m,p,_,p),a.bezierCurveTo(_-m,p,b,r+n,b,r),a.closePath()}}}}},function(e,t,r){'use strict';function a(t,r,a,c,p){var m;this.transparent=!!c,this.width=t||800,this.height=r||600,this.view=a||o.createCanvas(),this.view.width=this.width,this.view.height=this.height;var f=this;this.view.addEventListener('webglcontextlost',function(e){f.handleContextLost(e)},!1),this.view.addEventListener('webglcontextrestored',function(e){f.handleContextRestored(e)},!1),this.batchs=[];var g={alpha:this.transparent,antialias:!!p,premultipliedAlpha:!1,stencil:!0};try{m=this.view.getContext('experimental-webgl',g)}catch(e){try{m=this.view.getContext('webgl',g)}catch(e){throw new Error(' This browser does not support webGL. Try using the canvas renderer'+this)}}this.gl=i.gl=m,n.initDefaultShaders(),m.useProgram(i.defaultShader.program),this.batch=new l(m),m.disable(m.DEPTH_TEST),m.disable(m.CULL_FACE),m.enable(m.BLEND),m.colorMask(!0,!0,!0,this.transparent),this.projection=i.projection=new u(400,300),this.offset=i.offset=new u(0,0),this.resize(this.width,this.height),this.contextLost=!1,this.stageRenderGroup=new s(this.gl,this.transparent)}var o=r(2),i=r(0),n=r(14),l=r(23),s=r(24),u=r(3),p=r(4),d=a.prototype;d.render=function(e){if(!this.contextLost){this.__stage!==e&&(this.__stage=e,this.stageRenderGroup.setRenderable(e));var t=this.gl;if(s.updateTextures(t),i.visibleCount++,e.updateTransform(),t.colorMask(!0,!0,!0,this.transparent),t.viewport(0,0,this.width,this.height),t.bindFramebuffer(t.FRAMEBUFFER,null),t.clearColor(e.backgroundColorSplit[0],e.backgroundColorSplit[1],e.backgroundColorSplit[2],!this.transparent),t.clear(t.COLOR_BUFFER_BIT),this.stageRenderGroup.backgroundColor=e.backgroundColorSplit,this.projection.x=this.width/2,this.projection.y=-this.height/2,this.stageRenderGroup.render(this.projection),e.interactive&&(e._interactiveEventsAdded||(e._interactiveEventsAdded=!0,e.interactionManager.setTarget(this))),0<p.frameUpdates.length){for(var r=0,a=p.frameUpdates.length;a>r;r++)p.frameUpdates[r].updateFrame=!1;p.frameUpdates=[]}}},d.resize=function(e,t){this.width=e,this.height=t,this.view.width=e,this.view.height=t,this.gl.viewport(0,0,this.width,this.height),this.projection.x=this.width/2,this.projection.y=-this.height/2},d.handleContextLost=function(e){e.preventDefault(),this.contextLost=!0},d.handleContextRestored=function(){var t=this.gl=this.view.getContext('experimental-webgl',{alpha:!0});for(var r in this.initShaders(),p.cache){var a=p.cache[r].baseTexture;a._glTexture=null,s.updateTexture(t,a)}for(var o=0,i=this.batchs.length;i>o;o++)this.batchs[o].restoreLostContext(t),this.batchs[o].dirty=!0;l.restoreBatches(t),this.contextLost=!1},e.exports=a},function(e,t,r){'use strict';var a=Math.sqrt,s=Math.cos,u=Math.sin,o=r(14),i=r(0),n=r(9).mat3,T=r(33).hex2rgb,p=r(37).triangulate,_=r(3),l=r(10);t.renderGraphics=function(e,r){var a=i.gl;e._webGL||(e._webGL={points:[],indices:[],lastIndex:0,buffer:a.createBuffer(),indexBuffer:a.createBuffer()}),e.dirty&&(e.dirty=!1,e.clearDirty&&(e.clearDirty=!1,e._webGL.lastIndex=0,e._webGL.points=[],e._webGL.indices=[]),t.updateGraphics(e)),o.activatePrimitiveShader();var l=n.clone(e.worldTransform);n.transpose(l),a.blendFunc(a.ONE,a.ONE_MINUS_SRC_ALPHA),a.uniformMatrix3fv(i.primitiveShader.translationMatrix,!1,l),a.uniform2f(i.primitiveShader.projectionVector,r.x,-r.y),a.uniform2f(i.primitiveShader.offsetVector,-i.offset.x,-i.offset.y),a.uniform1f(i.primitiveShader.alpha,e.worldAlpha),a.bindBuffer(a.ARRAY_BUFFER,e._webGL.buffer),a.vertexAttribPointer(i.primitiveShader.aVertexPosition,2,a.FLOAT,!1,24,0),a.vertexAttribPointer(i.primitiveShader.colorAttribute,4,a.FLOAT,!1,24,8),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,e._webGL.indexBuffer),a.drawElements(a.TRIANGLE_STRIP,e._webGL.indices.length,a.UNSIGNED_SHORT,0),o.deactivatePrimitiveShader()},t.updateGraphics=function(e){for(var r,a=e._webGL.lastIndex;a<e.graphicsData.length;a++)r=e.graphicsData[a],r.type===l.POLY?(r.fill&&3<r.points.length&&t.buildPoly(r,e._webGL),0<r.lineWidth&&t.buildLine(r,e._webGL)):r.type===l.RECT?t.buildRectangle(r,e._webGL):r.type===l.CIRC||r.type===l.ELIP,t.buildCircle(r,e._webGL);e._webGL.lastIndex=e.graphicsData.length;var o=i.gl;e._webGL.glPoints=new Float32Array(e._webGL.points),o.bindBuffer(o.ARRAY_BUFFER,e._webGL.buffer),o.bufferData(o.ARRAY_BUFFER,e._webGL.glPoints,o.STATIC_DRAW),e._webGL.glIndicies=new Uint16Array(e._webGL.indices),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,e._webGL.indexBuffer),o.bufferData(o.ELEMENT_ARRAY_BUFFER,e._webGL.glIndicies,o.STATIC_DRAW)},t.buildRectangle=function(r,a){var s=r.points,u=s[0],d=s[1],e=s[2],c=s[3];if(r.fill){var p=T(r.fillColor),h=r.fillAlpha,i=p[0]*h,f=p[1]*h,g=p[2]*h,l=a.points,m=a.indices,n=l.length/6;l.push(u,d),l.push(i,f,g,h),l.push(u+e,d),l.push(i,f,g,h),l.push(u,d+c),l.push(i,f,g,h),l.push(u+e,d+c),l.push(i,f,g,h),m.push(n,n,n+1,n+2,n+3,n+3)}r.lineWidth&&(r.points=[u,d,u+e,d,u+e,d+c,u,d+c,u,d],t.buildLine(r,a))},t.buildCircle=function(x,a){var v=x.points,c=v[0],d=v[1],e=v[2],f=v[3],g=40,h=2*Math.PI/g,i=0;if(x.fill){var b=T(x.fillColor),y=x.fillAlpha,l=b[0]*y,m=b[1]*y,n=b[2]*y,o=a.points,p=a.indices,_=o.length/6;for(p.push(_),i=0;g+1>i;i++)o.push(c,d,l,m,n,y),o.push(c+u(h*i)*e,d+s(h*i)*f,l,m,n,y),p.push(_++,_++);p.push(_-1)}if(x.lineWidth){for(x.points=[],i=0;g+1>i;i++)x.points.push(c+u(h*i)*e,d+s(h*i)*f);t.buildLine(x,a)}},t.buildLine=function(S,R){var b=0,c=S.points;if(0!==c.length){if(S.lineWidth%2)for(b=0;b<c.length;b++)c[b]+=.5;var d=new _(c[0],c[1]),e=new _(c[c.length-2],c[c.length-1]);if(d.x===e.x&&d.y===e.y){c.pop(),c.pop(),e=new _(c[c.length-2],c[c.length-1]);var f=e.x+.5*(d.x-e.x),g=e.y+.5*(d.y-e.y);c.unshift(f,g),c.push(f,g)}var h,i,U,k,l,m,n,o,p,Y,X,W,V,u,v,w,x,y,j,A,B,C,D,E=R.points,F=R.indices,G=c.length/2,z=c.length,I=E.length/6,H=S.lineWidth/2,J=T(S.lineColor),L=S.lineAlpha,M=J[0]*L,N=J[1]*L,O=J[2]*L;for(U=c[0],k=c[1],l=c[2],m=c[3],p=-(k-m),Y=U-l,D=a(p*p+Y*Y),p/=D,Y/=D,p*=H,Y*=H,E.push(U-p,k-Y,M,N,O,L),E.push(U+p,k+Y,M,N,O,L),b=1;G-1>b;b++)U=c[2*(b-1)],k=c[2*(b-1)+1],l=c[2*b],m=c[2*b+1],n=c[2*(b+1)],o=c[2*(b+1)+1],p=-(k-m),Y=U-l,D=a(p*p+Y*Y),p/=D,Y/=D,p*=H,Y*=H,X=-(m-o),W=l-n,D=a(X*X+W*W),X/=D,W/=D,X*=H,W*=H,v=-Y+k-(-Y+m),w=-p+l-(-p+U),x=(-p+U)*(-Y+m)-(-p+l)*(-Y+k),y=-W+o-(-W+m),j=-X+l-(-X+n),A=(-X+n)*(-W+m)-(-X+l)*(-W+o),B=v*j-y*w,.1>Math.abs(B)?(B+=10.1,E.push(l-p,m-Y,M,N,O,L),E.push(l+p,m+Y,M,N,O,L)):(h=(w*A-j*x)/B,i=(y*x-v*A)/B,C=(h-l)*(h-l)+(i-m)+(i-m),19600<C?(V=p-X,u=Y-W,D=a(V*V+u*u),V/=D,u/=D,V*=H,u*=H,E.push(l-V,m-u),E.push(M,N,O,L),E.push(l+V,m+u),E.push(M,N,O,L),E.push(l-V,m-u),E.push(M,N,O,L),z++):(E.push(h,i),E.push(M,N,O,L),E.push(l-(h-l),m-(i-m)),E.push(M,N,O,L)));for(U=c[2*(G-2)],k=c[2*(G-2)+1],l=c[2*(G-1)],m=c[2*(G-1)+1],p=-(k-m),Y=U-l,D=a(p*p+Y*Y),p/=D,Y/=D,p*=H,Y*=H,E.push(l-p,m-Y),E.push(M,N,O,L),E.push(l+p,m+Y),E.push(M,N,O,L),F.push(I),b=0;z>b;b++)F.push(I++);F.push(I-1)}},t.buildPoly=function(t,r){var a=t.points;if(!(6>a.length)){var o=r.points,s=r.indices,e=a.length/2,d=T(t.fillColor),u=t.fillAlpha,c=d[0]*u,i=d[1]*u,h=d[2]*u,f=p(a),l=o.length/6,m=0;for(m=0;m<f.length;m+=3)s.push(f[m]+l),s.push(f[m]+l),s.push(f[m+1]+l),s.push(f[m+2]+l),s.push(f[m+2]+l);for(m=0;e>m;m++)o.push(a[2*m],a[2*m+1],c,i,h,u)}}},function(e,t,r){'use strict';function d(x,a,T,c,d,e,f,g){var h=f-T,i=g-c,b=d-T,y=e-c,l=x-T,m=a-c,n=h*h+i*i,o=h*b+i*y,p=h*l+i*m,_=b*b+y*y,r=b*l+y*m,s=1/(n*_-o*o),t=(_*p-o*r)*s,u=(n*r-o*p)*s;return 0<=t&&0<=u&&1>t+u}function u(t,r,a,o,i,e,n){return 0<=(r-o)*(i-a)+(a-t)*(e-o)===n}var a=r(2);t.triangulate=function(t){var x=!0,v=t.length>>1;if(3>v)return[];for(var c=[],T=[],e=0;v>e;e++)T.push(e);e=0;for(var f=v;3<f;){var g=T[(e+0)%f],h=T[(e+1)%f],i=T[(e+2)%f],y=t[2*g],_=t[2*g+1],l=t[2*h],m=t[2*h+1],n=t[2*i],o=t[2*i+1],p=!1;if(u(y,_,l,m,n,o,x)){p=!0;for(var A,s=0;f>s;s++)if(A=T[s],A!==g&&A!==h&&A!==i&&d(t[2*A],t[2*A+1],y,_,l,m,n,o)){p=!1;break}}if(p)c.push(g,h,i),T.splice((e+1)%f,1),f--,e=0;else if(e++>3*f){if(!x)return a.console.warn('PIXI Warning: shape too complex to fill'),[];for(c=[],T=[],e=0;v>e;e++)T.push(e);e=0,f=v,x=!1}}return c.push(T[0],T[1],T[2]),c}},function(e,t,r){'use strict';var a=r(39);console.log(a)},function(e,t,r){'use strict';var a=r(0),o=r(14),i=r(9),n=e.exports=Object.create(a);n.Point=r(3),n.Rectangle=r(8),n.Polygon=r(43),n.Circle=r(44),n.Ellipse=r(45),n.Matrix=i.Matrix,n.mat3=i.mat3,n.mat4=i.mat4,n.blendModes=r(11),n.DisplayObject=r(19),n.DisplayObjectContainer=r(6),n.Sprite=r(7),n.MovieClip=r(46),n.AbstractFilter=r(1),n.BlurFilter=r(47),n.BlurXFilter=r(29),n.BlurYFilter=r(30),n.ColorMatrixFilter=r(48),n.ColorStepFilter=r(49),n.CrossHatchFilter=r(50),n.DisplacementFilter=r(51),n.DotScreenFilter=r(52),n.FilterBlock=r(15),n.GrayFilter=r(53),n.InvertFilter=r(54),n.PixelateFilter=r(55),n.RGBSplitFilter=r(56),n.SepiaFilter=r(57),n.SmartBlurFilter=r(58),n.TwistFilter=r(59),n.Text=r(60),n.BitmapText=r(31),n.InteractionManager=r(32),n.Stage=r(61),n.EventTarget=r(5),n.autoDetectRenderer=r(62),n.PolyK=r(37),n.WebGLGraphics=r(36),n.WebGLRenderer=r(35),n.WebGLBatch=r(23),n.WebGLRenderGroup=r(24),n.CanvasRenderer=r(20),n.CanvasGraphics=r(34),n.Graphics=r(10),n.Strip=r(16),n.Rope=r(64),n.TilingSprite=r(21),n.Spine=r(25),n.CustomRenderable=r(22),n.BaseTexture=r(12),n.Texture=r(4),n.RenderTexture=r(65),n.AssetLoader=r(13),n.JsonLoader=r(27),n.SpriteSheetLoader=r(66),n.ImageLoader=r(17),n.BitmapFontLoader=r(67),n.SpineLoader=r(68),n.initDefaultShaders=o.initDefaultShaders,n.activatePrimitiveShader=o.activatePrimitiveShader,n.deactivatePrimitiveShader=o.deactivatePrimitiveShader,n.activateStripShader=o.activateStripShader,n.deactivateStripShader=o.deactivateStripShader;var l=r(69);n.runList=l.runList},function(e,t,r){'use strict';function a(){this.program=null,this.fragmentSrc=['precision mediump float;','varying vec4 vColor;','void main(void) {','   gl_FragColor = vColor;','}'],this.vertexSrc=['attribute vec2 aVertexPosition;','attribute vec4 aColor;','uniform mat3 translationMatrix;','uniform vec2 projectionVector;','uniform vec2 offsetVector;','uniform float alpha;','varying vec4 vColor;','void main(void) {','   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);','   v -= offsetVector.xyx;','   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0, 1.0);','   vColor = aColor  * alpha;','}']}var o=r(18),i=r(0);a.prototype.init=function(){var e=i.gl,t=o.program(e,this.vertexSrc,this.fragmentSrc);e.useProgram(t),this.projectionVector=e.getUniformLocation(t,'projectionVector'),this.offsetVector=e.getUniformLocation(t,'offsetVector'),this.aVertexPosition=e.getAttribLocation(t,'aVertexPosition'),this.colorAttribute=e.getAttribLocation(t,'aColor'),this.translationMatrix=e.getUniformLocation(t,'translationMatrix'),this.alpha=e.getUniformLocation(t,'alpha'),this.program=t},e.exports=a},function(e){var t=function(){return this}();try{t=t||Function('return this')()||(1,eval)('this')}catch(r){'object'==typeof window&&(t=window)}e.exports=t},function(e,t,r){'use strict';function a(){this.program=null,this.fragmentSrc=['precision mediump float;','varying vec2 vTextureCoord;','varying float vColor;','uniform float alpha;','uniform sampler2D uSampler;','void main(void) {','   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y));','   gl_FragColor = gl_FragColor * alpha;','}'],this.vertexSrc=['attribute vec2 aVertexPosition;','attribute vec2 aTextureCoord;','attribute float aColor;','uniform mat3 translationMatrix;','uniform vec2 projectionVector;','varying vec2 vTextureCoord;','varying vec2 offsetVector;','varying float vColor;','void main(void) {','   vec3 v = translationMatrix * vec3(aVertexPosition, 1.0);','   v -= offsetVector.xyx;','   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / projectionVector.y + 1.0 , 0.0, 1.0);','   vTextureCoord = aTextureCoord;','   vColor = aColor;','}']}var o=r(18),i=r(0);a.prototype.init=function(){var e=i.gl,t=o.program(e,this.vertexSrc,this.fragmentSrc);e.useProgram(t),this.uSampler=e.getUniformLocation(t,'uSampler'),this.projectionVector=e.getUniformLocation(t,'projectionVector'),this.offsetVector=e.getUniformLocation(t,'offsetVector'),this.colorAttribute=e.getAttribLocation(t,'aColor'),this.aVertexPosition=e.getAttribLocation(t,'aVertexPosition'),this.aTextureCoord=e.getAttribLocation(t,'aTextureCoord'),this.translationMatrix=e.getUniformLocation(t,'translationMatrix'),this.alpha=e.getUniformLocation(t,'alpha'),this.program=t},e.exports=a},function(e,t,r){'use strict';function o(e){if(e instanceof Array||(e=Array.prototype.slice.call(arguments)),'number'==typeof e[0]){for(var t=[],r=0,a=e.length;a>r;r+=2)t.push(new i(e[r],e[r+1]));e=t}this.points=e}var i=r(3),a=o.prototype;a.clone=function(){for(var e=[],t=0;t<this.points.length;t++)e.push(this.points[t].clone());return new o(e)},a.contains=function(t,r){for(var a=!1,o=0,n=this.points.length-1;o<this.points.length;n=o++){var e=this.points[o].x,l=this.points[o].y,s=this.points[n].x,d=this.points[n].y;l>r!=d>r&&(s-e)*(r-l)/(d-l)+e>t&&(a=!a)}return a},e.exports=o},function(e){'use strict';function t(e,t,r){this.x=e||0,this.y=t||0,this.radius=r||0}var r=t.prototype;r.clone=function(){return new t(this.x,this.y,this.radius)},r.contains=function(t,r){if(0>=this.radius)return!1;var a=this.x-t,o=this.y-r,i=this.radius*this.radius;return a*=a,o*=o,i>=a+o},e.exports=t},function(e,t,r){'use strict';function a(e,t,r,a){this.x=e||0,this.y=t||0,this.width=r||0,this.height=a||0}var o=r(8),i=a.prototype;i.clone=function(){return new a(this.x,this.y,this.width,this.height)},i.contains=function(e,t){if(0>=this.width||0>=this.height)return!1;var r=(e-this.x)/this.width-.5,a=(t-this.y)/this.height-.5;return r*=r,a*=a,.25>r+a},i.getBounds=function(){return new o(this.x,this.y,this.width,this.height)},e.exports=a},function(e,t,r){'use strict';function a(e){o.call(this,e[0]),this.textures=e,this.animationSpeed=1,this.loop=!0,this.onComplete=null,this.currentFrame=0,this.playing=!1}var o=r(7),i=a.prototype=Object.create(o.prototype,{constructor:{value:a}});Object.defineProperty(i,'totalFrames',{get:function(){return this.textures.length}}),i.stop=function(){this.playing=!1},i.play=function(){this.playing=!0},i.gotoAndStop=function(e){this.playing=!1,this.currentFrame=e;var t=0|this.currentFrame+.5;this.setTexture(this.textures[t%this.textures.length])},i.gotoAndPlay=function(e){this.currentFrame=e,this.playing=!0},i.updateTransform=function(){if(o.prototype.updateTransform.call(this),this.playing){this.currentFrame+=this.animationSpeed;var e=0|this.currentFrame+.5;this.loop||e<this.textures.length?this.setTexture(this.textures[e%this.textures.length]):e>=this.textures.length&&(this.gotoAndStop(this.textures.length-1),this.onComplete&&this.onComplete())}},e.exports=a},function(e,t,r){'use strict';function a(){this.blurXFilter=new o,this.blurYFilter=new i,this.passes=[this.blurXFilter,this.blurYFilter]}var o=r(29),i=r(30),n=a.prototype;Object.defineProperty(n,'blur',{get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=this.blurYFilter.blur=e}}),Object.defineProperty(n,'blurX',{get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=e}}),Object.defineProperty(n,'blurY',{get:function(){return this.blurYFilter.blur},set:function(e){this.blurYFilter.blur=e}}),e.exports=a},function(e,t,r){'use strict';function a(){o.call(this),this.passes=[this],this.uniforms={matrix:{type:'mat4',value:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},this.fragmentSrc=['precision mediump float;','varying vec2 vTextureCoord;','varying float vColor;','uniform float invert;','uniform mat4 matrix;','uniform sampler2D uSampler;','void main(void) {','   gl_FragColor = texture2D(uSampler, vTextureCoord) * matrix;','   gl_FragColor = gl_FragColor * vColor;','}']}var o=r(1),i=a.prototype=Object.create(o.prototype,{constructor:{value:a}});Object.defineProperty(i,'matrix',{get:function(){return this.uniforms.matrix.value},set:function(e){this.uniforms.matrix.value=e}}),e.exports=a},function(e,t,r){'use strict';function a(){o.call(this),this.passes=[this],this.uniforms={step:{type:'1f',value:5}},this.fragmentSrc=['precision mediump float;','varying vec2 vTextureCoord;','varying float vColor;','uniform sampler2D uSampler;','uniform float step;','void main(void) {','   vec4 color = texture2D(uSampler, vTextureCoord);','   color = floor(color * step) / step;','   gl_FragColor = color * vColor;','}']}var o=r(1),i=a.prototype=Object.create(o.prototype,{constructor:{value:a}});Object.defineProperty(i,'step',{get:function(){return this.uniforms.step.value},set:function(e){this.uniforms.step.value=e}}),e.exports=a},function(e,t,r){'use strict';function a(){o.call(this),this.passes=[this],this.uniforms={blur:{type:'1f',value:1/512}},this.fragmentSrc=['precision mediump float;','varying vec2 vTextureCoord;','varying float vColor;','uniform float blur;','uniform sampler2D uSampler;','void main(void) {','    float lum = length(texture2D(uSampler, vTextureCoord.xy).rgb);','    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);','    if (lum < 1.00) {','        if (mod(gl_FragCoord.x + gl_FragCoord.y, 10.0) == 0.0) {','            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);','        }','    }','    if (lum < 0.75) {','        if (mod(gl_FragCoord.x - gl_FragCoord.y, 10.0) == 0.0) {','            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);','        }','    }','    if (lum < 0.50) {','        if (mod(gl_FragCoord.x + gl_FragCoord.y - 5.0, 10.0) == 0.0) {','            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);','        }','    }','    if (lum < 0.3) {','        if (mod(gl_FragCoord.x - gl_FragCoord.y - 5.0, 10.0) == 0.0) {','            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);','        }','    }','}']}var o=r(1),i=a.prototype=Object.create(o.prototype,{constructor:{value:a}});Object.defineProperty(i,'blur',{get:function(){return this.uniforms.blur.value/(1/7e3)},set:function(e){this.uniforms.blur.value=1/7e3*e}}),e.exports=a},function(e,t,r){'use strict';function a(e){o.call(this),this.passes=[this],e.baseTexture._powerOf2=!0,this.uniforms={displacementMap:{type:'sampler2D',value:e},scale:{type:'2f',value:{x:30,y:30}},offset:{type:'2f',value:{x:0,y:0}},mapDimensions:{type:'2f',value:{x:1,y:5112}},dimensions:{type:'4fv',value:[0,0,0,0]}},e.baseTexture.hasLoaded?(this.uniforms.mapDimensions.value.x=e.width,this.uniforms.mapDimensions.value.y=e.height):(this.boundLoadedFunction=this.onTextureLoaded.bind(this),e.baseTexture.on('loaded',this.boundLoadedFunction)),this.fragmentSrc=['precision mediump float;','varying vec2 vTextureCoord;','varying float vColor;','uniform sampler2D displacementMap;','uniform sampler2D uSampler;','uniform vec2 scale;','uniform vec2 offset;','uniform vec4 dimensions;','uniform vec2 mapDimensions;','void main(void) {','   vec2 mapCords = vTextureCoord.xy;','   mapCords += (dimensions.zw + offset)/ dimensions.xy ;','   mapCords.y *= -1.0;','   mapCords.y += 1.0;','   vec2 matSample = texture2D(displacementMap, mapCords).xy;','   matSample -= 0.5;','   matSample *= scale;','   matSample /= mapDimensions;','   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x + matSample.x, vTextureCoord.y + matSample.y));','   gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb, 1.0);','   vec2 cord = vTextureCoord;','   gl_FragColor = gl_FragColor * vColor;','}']}var o=r(1),i=a.prototype=Object.create(o.prototype,{constructor:{value:a}});i.onTextureLoaded=function(){this.uniforms.mapDimensions.value.x=this.uniforms.displacementMap.value.width,this.uniforms.mapDimensions.value.y=this.uniforms.displacementMap.value.height,this.uniforms.displacementMap.value.baseTexture.off('loaded',this.boundLoadedFunction)},Object.defineProperty(i,'map',{get:function(){return this.uniforms.displacementMap.value},set:function(e){this.uniforms.displacementMap.value=e}}),Object.defineProperty(i,'scale',{get:function(){return this.uniforms.scale.value},set:function(e){this.uniforms.scale.value=e}}),Object.defineProperty(i,'offset',{get:function(){return this.uniforms.offset.value},set:function(e){this.uniforms.offset.value=e}}),e.exports=a},function(e,t,r){'use strict';function a(){o.call(this),this.passes=[this],this.uniforms={scale:{type:'1f',value:1},angle:{type:'1f',value:5},dimensions:{type:'4fv',value:[0,0,0,0]}},this.fragmentSrc=['precision mediump float;','varying vec2 vTextureCoord;','varying float vColor;','uniform vec4 dimensions;','uniform sampler2D uSampler;','uniform float angle;','uniform float scale;','float pattern() {','   float s = sin(angle), c = cos(angle);','   vec2 tex = vTextureCoord * dimensions.xy;','   vec2 point = vec2(','       c * tex.x - s * tex.y,','       s * tex.x + c * tex.y','   ) * scale;','   return (sin(point.x) * sin(point.y)) * 4.0;','}','void main() {','   vec4 color = texture2D(uSampler, vTextureCoord);','   float average = (color.r + color.g + color.b) / 3.0;','   gl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);','}']}var o=r(1),i=a.prototype=Object.create(o.prototype,{constructor:{value:a}});Object.defineProperty(i,'scale',{get:function(){return this.uniforms.scale.value},set:function(e){this.dirty=!0,this.uniforms.scale.value=e}}),Object.defineProperty(i,'angle',{get:function(){return this.uniforms.angle.value},set:function(e){this.dirty=!0,this.uniforms.angle.value=e}}),e.exports=a},function(e,t,r){'use strict';function a(){o.call(this),this.passes=[this],this.uniforms={gray:{type:'1f',value:1}},this.fragmentSrc=['precision mediump float;','varying vec2 vTextureCoord;','varying float vColor;','uniform sampler2D uSampler;','uniform float gray;','void main(void) {','   gl_FragColor = texture2D(uSampler, vTextureCoord);','   gl_FragColor.rgb = mix(gl_FragColor.rgb, vec3(0.2126*gl_FragColor.r + 0.7152*gl_FragColor.g + 0.0722*gl_FragColor.b), gray);','   gl_FragColor = gl_FragColor * vColor;','}']}var o=r(1),i=a.prototype=Object.create(o.prototype,{constructor:{value:a}});Object.defineProperty(i,'gray',{get:function(){return this.uniforms.gray.value},set:function(e){this.uniforms.gray.value=e}}),e.exports=a},function(e,t,r){'use strict';function a(){o.call(this),this.passes=[this],this.uniforms={invert:{type:'1f',value:1}},this.fragmentSrc=['precision mediump float;','varying vec2 vTextureCoord;','varying float vColor;','uniform float invert;','uniform sampler2D uSampler;','void main(void) {','   gl_FragColor = texture2D(uSampler, vTextureCoord);','   gl_FragColor.rgb = mix( (vec3(1)-gl_FragColor.rgb) * gl_FragColor.a, gl_FragColor.rgb, 1.0 - invert);','   gl_FragColor = gl_FragColor * vColor;','}']}var o=r(1),i=a.prototype=Object.create(o.prototype,{constructor:{value:a}});Object.defineProperty(i,'invert',{get:function(){return this.uniforms.invert.value},set:function(e){this.uniforms.invert.value=e}}),e.exports=a},function(e,t,r){'use strict';function a(){o.call(this),this.passes=[this],this.uniforms={invert:{type:'1f',value:0},dimensions:{type:'4fv',value:new Float32Array([10000,100,10,10])},pixelSize:{type:'2f',value:{x:10,y:10}}},this.fragmentSrc=['precision mediump float;','varying vec2 vTextureCoord;','varying float vColor;','uniform vec2 testDim;','uniform vec4 dimensions;','uniform vec2 pixelSize;','uniform sampler2D uSampler;','void main(void) {','   vec2 coord = vTextureCoord;','   vec2 size = dimensions.xy/pixelSize;','   vec2 color = floor( ( vTextureCoord * size ) ) / size + pixelSize/dimensions.xy * 0.5;','   gl_FragColor = texture2D(uSampler, color);','}']}var o=r(1),i=a.prototype=Object.create(o.prototype,{constructor:{value:a}});Object.defineProperty(i,'size',{get:function(){return this.uniforms.pixelSize.value},set:function(e){this.dirty=!0,this.uniforms.pixelSize.value=e}}),e.exports=a},function(e,t,r){'use strict';function a(){o.call(this),this.passes=[this],this.uniforms={red:{type:'2f',value:{x:20,y:20}},green:{type:'2f',value:{x:-20,y:20}},blue:{type:'2f',value:{x:20,y:-20}},dimensions:{type:'4fv',value:[0,0,0,0]}},this.fragmentSrc=['precision mediump float;','varying vec2 vTextureCoord;','varying float vColor;','uniform vec2 red;','uniform vec2 green;','uniform vec2 blue;','uniform vec4 dimensions;','uniform sampler2D uSampler;','void main(void) {','   gl_FragColor.r = texture2D(uSampler, vTextureCoord + red/dimensions.xy).r;','   gl_FragColor.g = texture2D(uSampler, vTextureCoord + green/dimensions.xy).g;','   gl_FragColor.b = texture2D(uSampler, vTextureCoord + blue/dimensions.xy).b;','   gl_FragColor.a = texture2D(uSampler, vTextureCoord).a;','}']}var o=r(1),i=a.prototype=Object.create(o.prototype,{constructor:{value:a}});Object.defineProperty(i,'angle',{get:function(){return this.uniforms.blur.value/(1/7e3)},set:function(e){this.uniforms.blur.value=1/7e3*e}}),e.exports=a},function(e,t,r){'use strict';function a(){o.call(this),this.passes=[this],this.uniforms={sepia:{type:'1f',value:1}},this.fragmentSrc=['precision mediump float;','varying vec2 vTextureCoord;','varying float vColor;','uniform float sepia;','uniform sampler2D uSampler;','const mat3 sepiaMatrix = mat3(0.3588, 0.7044, 0.1368, 0.2990, 0.5870, 0.1140, 0.2392, 0.4696, 0.0912);','void main(void) {','   gl_FragColor = texture2D(uSampler, vTextureCoord);','   gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb * sepiaMatrix, sepia);','   gl_FragColor = gl_FragColor * vColor;','}']}var o=r(1),i=a.prototype=Object.create(o.prototype,{constructor:{value:a}});Object.defineProperty(i,'sepia',{get:function(){return this.uniforms.sepia.value},set:function(e){this.uniforms.sepia.value=e}}),e.exports=a},function(e,t,r){'use strict';function a(){o.call(this),this.passes=[this],this.uniforms={blur:{type:'1f',value:1/512}},this.fragmentSrc=['precision mediump float;','varying vec2 vTextureCoord;','uniform sampler2D uSampler;','const vec2 delta = vec2(1.0/10.0, 0.0);','float random(vec3 scale, float seed) {','   return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);','}','void main(void) {','   vec4 color = vec4(0.0);','   float total = 0.0;','   float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);','   for (float t = -30.0; t <= 30.0; t++) {','       float percent = (t + offset - 0.5) / 30.0;','       float weight = 1.0 - abs(percent);','       vec4 sample = texture2D(uSampler, vTextureCoord + delta * percent);','       sample.rgb *= sample.a;','       color += sample * weight;','       total += weight;','   }','   gl_FragColor = color / total;','   gl_FragColor.rgb /= gl_FragColor.a + 0.00001;','}']}var o=r(1),i=a.prototype=Object.create(o.prototype,{constructor:{value:a}});Object.defineProperty(i,'blur',{get:function(){return this.uniforms.blur.value},set:function(e){this.uniforms.blur.value=e}}),e.exports=a},function(e,t,r){'use strict';function a(){o.call(this),this.passes=[this],this.uniforms={radius:{type:'1f',value:.5},angle:{type:'1f',value:5},offset:{type:'2f',value:{x:.5,y:.5}}},this.fragmentSrc=['precision mediump float;','varying vec2 vTextureCoord;','varying float vColor;','uniform vec4 dimensions;','uniform sampler2D uSampler;','uniform float radius;','uniform float angle;','uniform vec2 offset;','void main(void) {','   vec2 coord = vTextureCoord - offset;','   float distance = length(coord);','   if (distance < radius) {','       float ratio = (radius - distance) / radius;','       float angleMod = ratio * ratio * angle;','       float s = sin(angleMod);','       float c = cos(angleMod);','       coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);','   }','   gl_FragColor = texture2D(uSampler, coord+offset);','}']}var o=r(1),i=a.prototype=Object.create(o.prototype,{constructor:{value:a}});Object.defineProperty(i,'offset',{get:function(){return this.uniforms.offset.value},set:function(e){this.dirty=!0,this.uniforms.offset.value=e}}),Object.defineProperty(i,'radius',{get:function(){return this.uniforms.radius.value},set:function(e){this.dirty=!0,this.uniforms.radius.value=e}}),Object.defineProperty(i,'angle',{get:function(){return this.uniforms.angle.value},set:function(e){this.dirty=!0,this.uniforms.angle.value=e}}),e.exports=a},function(e,t,r){'use strict';function o(e,t){this.canvas=i.createCanvas(),this.context=this.canvas.getContext('2d'),l.call(this,s.fromCanvas(this.canvas)),this.setText(e),this.setStyle(t),this.updateText(),this.dirty=!1}var i=r(2),a=r(0),n=r(3),l=r(7),s=r(4),d=o.prototype=Object.create(l.prototype,{constructor:{value:o}});d.setStyle=function(e){e=e||{},e.font=e.font||'bold 20pt Arial',e.fill=e.fill||'black',e.align=e.align||'left',e.stroke=e.stroke||'black',e.strokeThickness=e.strokeThickness||0,e.wordWrap=e.wordWrap||!1,e.wordWrapWidth=e.wordWrapWidth||100,this.style=e,this.dirty=!0},d.setText=function(e){this.text=e.toString()||' ',this.dirty=!0},d.updateText=function(){this.context.font=this.style.font;var t=this.text;this.style.wordWrap&&(t=this.wordWrap(this.text));for(var r,a=t.split(/(?:\r\n|\r|\n)/),o=[],i=0,l=0;l<a.length;l++)r=this.context.measureText(a[l]).width,o[l]=r,i=Math.max(i,r);this.canvas.width=i+this.style.strokeThickness;var e=this.determineFontHeight('font: '+this.style.font+';')+this.style.strokeThickness;for(this.canvas.height=e*a.length,this.context.fillStyle=this.style.fill,this.context.font=this.style.font,this.context.strokeStyle=this.style.stroke,this.context.lineWidth=this.style.strokeThickness,this.context.textBaseline='top',l=0;l<a.length;l++){var s=new n(this.style.strokeThickness/2,this.style.strokeThickness/2+l*e);'right'===this.style.align?s.x+=i-o[l]:'center'===this.style.align&&(s.x+=(i-o[l])/2),this.style.stroke&&this.style.strokeThickness&&this.context.strokeText(a[l],s.x,s.y),this.style.fill&&this.context.fillText(a[l],s.x,s.y)}this.updateTexture()},d.updateTexture=function(){this.texture.baseTexture.width=this.canvas.width,this.texture.baseTexture.height=this.canvas.height,this.texture.frame.width=this.canvas.width,this.texture.frame.height=this.canvas.height,this._width=this.canvas.width,this._height=this.canvas.height,a.texturesToUpdate.push(this.texture.baseTexture)},d.updateTransform=function(){this.dirty&&(this.updateText(),this.dirty=!1),l.prototype.updateTransform.call(this)},d.determineFontHeight=function(t){var r=o.heightCache[t];if(!r){var a=i.document.getElementsByTagName('body')[0],n=i.document.createElement('div'),l=i.document.createTextNode('M');n.appendChild(l),n.setAttribute('style',t+';position:absolute;top:0;left:0'),a.appendChild(n),r=n.offsetHeight,o.heightCache[t]=r,a.removeChild(n)}return r},d.wordWrap=function(t){for(var r='',a=t.split('\n'),o=0;o<a.length;o++){for(var n=this.style.wordWrapWidth,e=a[o].split(' '),l=0;l<e.length;l++){var s=this.context.measureText(e[l]).width,d=s+this.context.measureText(' ').width;d>n?(0<l&&(r+='\n'),r+=e[l]+' ',n=this.style.wordWrapWidth-s):(n-=d,r+=e[l]+' ')}r+='\n'}return r},d.destroy=function(e){e&&this.texture.destroy()},o.heightCache={},e.exports=o},function(e,t,r){'use strict';function a(e){l.call(this),this.worldTransform=i.create(),this.interactive=!0,this.interactionManager=new s(this),this.dirty=!0,this.__childrenAdded=[],this.__childrenRemoved=[],this.stage=this,this.stage.hitArea=new d(0,0,1e5,1e5),this.setBackgroundColor(e),this.worldVisible=!0}var o=r(0),i=r(9).mat3,n=r(33).hex2rgb,l=r(6),s=r(32),d=r(8),u=a.prototype=Object.create(l.prototype,{constructor:{value:a}});u.setInteractionDelegate=function(e){this.interactionManager.setTargetDomElement(e)},u.updateTransform=function(){this.worldAlpha=1,this.vcount=o.visibleCount;for(var e=0,t=this.children.length;t>e;e++)this.children[e].updateTransform();this.dirty&&(this.dirty=!1,this.interactionManager.dirty=!0),this.interactive&&this.interactionManager.update()},u.setBackgroundColor=function(e){this.backgroundColor=e||0,this.backgroundColorSplit=n(this.backgroundColor);var t=this.backgroundColor.toString(16);t='000000'.substr(0,6-t.length)+t,this.backgroundColorString='#'+t},u.getMousePosition=function(){return this.interactionManager.mouse.global},e.exports=a},function(e,t,r){'use strict';var o=r(2),i=r(20),n=r(35);e.exports=function(t,r,a,l,s){t||(t=800),r||(r=600);var e=function(){try{var e=o.createCanvas();return!!o.window.WebGLRenderingContext&&(e.getContext('webgl')||e.getContext('experimental-webgl'))}catch(e){return!1}}();if(e&&o.navigator){var d=-1!==o.navigator.userAgent.toLowerCase().indexOf('trident');e=!d}return e?new n(t,r,a,l,s):new i(t,r,a,l)}},function(e,t,r){'use strict';function o(e,t){var r=s.gl;this.frameBuffer=r.createFramebuffer(),this.texture=r.createTexture(),r.bindTexture(r.TEXTURE_2D,this.texture),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.bindFramebuffer(r.FRAMEBUFFER,this.framebuffer),r.bindFramebuffer(r.FRAMEBUFFER,this.frameBuffer),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,this.texture,0),this.resize(e,t)}function a(e){this.transparent=e,this.filterStack=[],this.texturePool=[],this.offsetX=0,this.offsetY=0,this.initShaderBuffers()}var s=r(0),T=r(7),_=r(10),i=r(28);o.prototype.resize=function(e,t){if(this.width!==e||this.height!==t){this.width=e,this.height=t;var r=s.gl;r.bindTexture(r.TEXTURE_2D,this.texture),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,e,t,0,r.RGBA,r.UNSIGNED_BYTE,null)}};var n=a.prototype;n.begin=function(e,t){this.width=2*e.x,this.height=2*-e.y,this.buffer=t},n.pushFilter=function(t){var r=s.gl;this.filterStack.push(t);var a=t.filterPasses[0];this.offsetX+=t.target.filterArea.x,this.offsetY+=t.target.filterArea.y;var i=this.texturePool.pop();i?i.resize(this.width,this.height):i=new o(this.width,this.height),r.bindTexture(r.TEXTURE_2D,i.texture),this.getBounds(t.target);var n=t.target.filterArea,e=a.padding;n.x-=e,n.y-=e,n.width+=2*e,n.height+=2*e,0>n.x&&(n.x=0),n.width>this.width&&(n.width=this.width),0>n.y&&(n.y=0),n.height>this.height&&(n.height=this.height),r.bindFramebuffer(r.FRAMEBUFFER,i.frameBuffer),r.viewport(0,0,n.width,n.height),s.projection.x=n.width/2,s.projection.y=-n.height/2,s.offset.x=-n.x,s.offset.y=-n.y,r.uniform2f(s.defaultShader.projectionVector,n.width/2,-n.height/2),r.uniform2f(s.defaultShader.offsetVector,-n.x,-n.y),r.colorMask(!0,!0,!0,!0),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),t._glFilterTexture=i},n.popFilter=function(){var t=s.gl,a=this.filterStack.pop(),u=a.target.filterArea,c=a._glFilterTexture;if(1<a.filterPasses.length){t.viewport(0,0,u.width,u.height),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),this.vertexArray[0]=0,this.vertexArray[1]=u.height,this.vertexArray[2]=u.width,this.vertexArray[3]=u.height,this.vertexArray[4]=0,this.vertexArray[5]=0,this.vertexArray[6]=u.width,this.vertexArray[7]=0,t.bufferSubData(t.ARRAY_BUFFER,0,this.vertexArray),t.bindBuffer(t.ARRAY_BUFFER,this.uvBuffer),this.uvArray[2]=u.width/this.width,this.uvArray[5]=u.height/this.height,this.uvArray[6]=u.width/this.width,this.uvArray[7]=u.height/this.height,t.bufferSubData(t.ARRAY_BUFFER,0,this.uvArray);var d=c,e=this.texturePool.pop();e||(e=new o(this.width,this.height)),t.bindFramebuffer(t.FRAMEBUFFER,e.frameBuffer),t.clear(t.COLOR_BUFFER_BIT),t.disable(t.BLEND);for(var f,h=0;h<a.filterPasses.length-1;h++){f=a.filterPasses[h],t.bindFramebuffer(t.FRAMEBUFFER,e.frameBuffer),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,d.texture),this.applyFilterPass(f,u,u.width,u.height);var g=d;d=e,e=g}t.enable(t.BLEND),c=d,this.texturePool.push(e)}var i=a.filterPasses[a.filterPasses.length-1];this.offsetX-=u.x,this.offsetY-=u.y;var x=this.width,v=this.height,T=0,b=0,y=this.buffer;if(0===this.filterStack.length)t.colorMask(!0,!0,!0,this.transparent);else{var _=this.filterStack[this.filterStack.length-1];u=_.target.filterArea,x=u.width,v=u.height,T=u.x,b=u.y,y=_._glFilterTexture.frameBuffer}s.projection.x=x/2,s.projection.y=-v/2,s.offset.x=T,s.offset.y=b,u=a.target.filterArea;var p=u.x-T,A=u.y-b;t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),this.vertexArray[0]=p,this.vertexArray[1]=A+u.height,this.vertexArray[2]=p+u.width,this.vertexArray[3]=A+u.height,this.vertexArray[4]=p,this.vertexArray[5]=A,this.vertexArray[6]=p+u.width,this.vertexArray[7]=A,t.bufferSubData(t.ARRAY_BUFFER,0,this.vertexArray),t.bindBuffer(t.ARRAY_BUFFER,this.uvBuffer),this.uvArray[2]=u.width/this.width,this.uvArray[5]=u.height/this.height,this.uvArray[6]=u.width/this.width,this.uvArray[7]=u.height/this.height,t.bufferSubData(t.ARRAY_BUFFER,0,this.uvArray),t.viewport(0,0,x,v),t.bindFramebuffer(t.FRAMEBUFFER,y),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,c.texture),this.applyFilterPass(i,u,x,v),t.useProgram(s.defaultShader.program),t.uniform2f(s.defaultShader.projectionVector,x/2,-v/2),t.uniform2f(s.defaultShader.offsetVector,-T,-b),this.texturePool.push(c),a._glFilterTexture=null},n.applyFilterPass=function(t,r,a,o){var n=s.gl,e=t.shader;e||(e=new i,e.fragmentSrc=t.fragmentSrc,e.uniforms=t.uniforms,e.init(),t.shader=e),n.useProgram(e.program),n.uniform2f(e.projectionVector,a/2,-o/2),n.uniform2f(e.offsetVector,0,0),t.uniforms.dimensions&&(t.uniforms.dimensions.value[0]=this.width,t.uniforms.dimensions.value[1]=this.height,t.uniforms.dimensions.value[2]=this.vertexArray[0],t.uniforms.dimensions.value[3]=this.vertexArray[5]),e.syncUniforms(),n.bindBuffer(n.ARRAY_BUFFER,this.vertexBuffer),n.vertexAttribPointer(e.aVertexPosition,2,n.FLOAT,!1,0,0),n.bindBuffer(n.ARRAY_BUFFER,this.uvBuffer),n.vertexAttribPointer(e.aTextureCoord,2,n.FLOAT,!1,0,0),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer),n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0)},n.initShaderBuffers=function(){var e=s.gl;this.vertexBuffer=e.createBuffer(),this.uvBuffer=e.createBuffer(),this.indexBuffer=e.createBuffer(),this.vertexArray=new Float32Array([0,0,1,0,0,1,1,1]),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,this.vertexArray,e.STATIC_DRAW),this.uvArray=new Float32Array([0,0,1,0,0,1,1,1]),e.bindBuffer(e.ARRAY_BUFFER,this.uvBuffer),e.bufferData(e.ARRAY_BUFFER,this.uvArray,e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,1,3,2]),e.STATIC_DRAW)},n.getBounds=function(S){var a,b,c,d,R,L,g,h,i,P,U,l,m,n,o,p,M,r,s,t,u,v,w,x,y=S.first,I=S.last._iNext,A=-(1/0),B=-(1/0),C=1/0,D=1/0;do{if(y.visible)if(y instanceof T)b=y.texture.frame.width,c=y.texture.frame.height,d=y.anchor.x,R=y.anchor.y,L=b*(1-d),g=b*-d,h=c*(1-R),i=c*-R,P=!0;else if(y instanceof _){y.updateFilterBounds();var E=y.bounds;b=E.width,c=E.height,L=E.x,g=E.x+E.width,h=E.y,i=E.y+E.height,P=!0}P&&(a=y.worldTransform,U=a[0],l=a[3],m=a[1],n=a[4],o=a[2],p=a[5],M=U*g+m*i+o,u=n*i+l*g+p,r=U*L+m*i+o,v=n*i+l*L+p,s=U*L+m*h+o,w=n*h+l*L+p,t=U*g+m*h+o,x=n*h+l*g+p,C=C>M?M:C,C=C>r?r:C,C=C>s?s:C,C=C>t?t:C,D=D>u?u:D,D=D>v?v:D,D=D>w?w:D,D=D>x?x:D,A=M>A?M:A,A=r>A?r:A,A=s>A?s:A,A=t>A?t:A,B=u>B?u:B,B=v>B?v:B,B=w>B?w:B,B=x>B?x:B),P=!1,y=y._iNext}while(y!==I);S.filterArea.x=C,S.filterArea.y=D,S.filterArea.width=A-C,S.filterArea.height=B-D},e.exports=a},function(e,t,r){'use strict';function a(e,t){o.call(this,e),this.points=t;try{this.verticies=new Float32Array(4*t.length),this.uvs=new Float32Array(4*t.length),this.colors=new Float32Array(2*t.length),this.indices=new Uint16Array(2*t.length)}catch(e){this.verticies=Array(4*t.length),this.uvs=Array(4*t.length),this.colors=Array(2*t.length),this.indices=Array(2*t.length)}this.refresh()}var o=r(16),n=r(6),i=a.prototype=Object.create(o.prototype,{constructor:{value:a}});i.refresh=function(){var t=this.points;if(!(1>t.length)){var r=this.uvs,a=t[0],o=this.indices,n=this.colors;this.count-=.2,r[0]=0,r[1]=1,r[2]=0,r[3]=1,n[0]=1,n[1]=1,o[0]=0,o[1]=1;for(var e,l,s,d=t.length,i=1;d>i;i++)e=t[i],l=4*i,s=i/(d-1),i%2?(r[l]=s,r[l+1]=0,r[l+2]=s,r[l+3]=1):(r[l]=s,r[l+1]=0,r[l+2]=s,r[l+3]=1),l=2*i,n[l]=1,n[l+1]=1,l=2*i,o[l]=l,o[l+1]=l+1,a=e}},i.updateTransform=function(){var t=this.points;if(!(1>t.length)){var r,a=t[0],o={x:0,y:0};this.count-=.2;var s=this.verticies;s[0]=a.x+o.x,s[1]=a.y+o.y,s[2]=a.x-o.x,s[3]=a.y-o.y;for(var e,d,u,c,i,p=t.length,h=1;p>h;h++)e=t[h],d=4*h,r=h<t.length-1?t[h+1]:e,o.y=-(r.x-a.x),o.x=r.y-a.y,u=10*(1-h/(p-1)),1<u&&(u=1),c=Math.sqrt(o.x*o.x+o.y*o.y),i=this.texture.height/2,o.x/=c,o.y/=c,o.x*=i,o.y*=i,s[d]=e.x+o.x,s[d+1]=e.y+o.y,s[d+2]=e.x-o.x,s[d+3]=e.y-o.y,a=e;n.prototype.updateTransform.call(this)}},i.setTexture=function(e){this.texture=e,this.updateFrame=!0},e.exports=a},function(e,t,r){'use strict';function a(e,t){u.call(this),this.width=e||100,this.height=t||100,this.identityMatrix=n.create(),this.frame=new d(0,0,this.width,this.height),o.gl?this.initWebGL():this.initCanvas()}var o=r(0),n=r(9).mat3,i=r(4),l=r(12),s=r(3),d=r(8),u=r(5),c=r(20),p=r(24),h=a.prototype=Object.create(i.prototype,{constructor:{value:a}});h.initWebGL=function(){var e=o.gl;this.glFramebuffer=e.createFramebuffer(),e.bindFramebuffer(e.FRAMEBUFFER,this.glFramebuffer),this.glFramebuffer.width=this.width,this.glFramebuffer.height=this.height,this.baseTexture=new l,this.baseTexture.width=this.width,this.baseTexture.height=this.height,this.baseTexture._glTexture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.baseTexture._glTexture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.width,this.height,0,e.RGBA,e.UNSIGNED_BYTE,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),this.baseTexture.isRender=!0,e.bindFramebuffer(e.FRAMEBUFFER,this.glFramebuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.baseTexture._glTexture,0),this.projection=new s(this.width/2,-this.height/2),this.render=this.renderWebGL},h.resize=function(e,t){if(this.width=e,this.height=t,o.gl){this.projection.x=this.width/2,this.projection.y=-this.height/2;var r=o.gl;r.bindTexture(r.TEXTURE_2D,this.baseTexture._glTexture),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,this.width,this.height,0,r.RGBA,r.UNSIGNED_BYTE,null)}else this.frame.width=this.width,this.frame.height=this.height,this.renderer.resize(this.width,this.height)},h.initCanvas=function(){this.renderer=new c(this.width,this.height,null,0),this.baseTexture=new l(this.renderer.view),this.frame=new d(0,0,this.width,this.height),this.render=this.renderCanvas},h.renderWebGL=function(t,r,a){var l=o.gl;l.colorMask(!0,!0,!0,!0),l.viewport(0,0,this.width,this.height),l.bindFramebuffer(l.FRAMEBUFFER,this.glFramebuffer),a&&(l.clearColor(0,0,0,0),l.clear(l.COLOR_BUFFER_BIT));var s=t.children,e=t.worldTransform;t.worldTransform=n.create(),t.worldTransform[4]=-1,t.worldTransform[5]=-2*this.projection.y,r&&(t.worldTransform[2]=r.x,t.worldTransform[5]-=r.y),o.visibleCount++,t.vcount=o.visibleCount;for(var d=0,u=s.length;u>d;d++)s[d].updateTransform();var c=t.__renderGroup;c?t===c.root?c.render(this.projection,this.glFramebuffer):c.renderSpecific(t,this.projection,this.glFramebuffer):(this.renderGroup||(this.renderGroup=new p(l)),this.renderGroup.setRenderable(t),this.renderGroup.render(this.projection,this.glFramebuffer)),t.worldTransform=e},h.renderCanvas=function(t,r,a){var o=t.children;t.worldTransform=n.create(),r&&(t.worldTransform[2]=r.x,t.worldTransform[5]=r.y);for(var i=0,e=o.length;e>i;i++)o[i].updateTransform();a&&this.renderer.context.clearRect(0,0,this.width,this.height),this.renderer.renderDisplayObject(t),this.renderer.context.setTransform(1,0,0,1,0,0)},e.exports=a},function(e,t,r){'use strict';function a(e,t){n.call(this),this.url=e,this.crossorigin=t,this.baseUrl=e.replace(/[^\/]*$/,''),this.texture=null,this.frames={}}var o=r(27),i=r(17),n=r(5),l=r(4),s=a.prototype;s.load=function(){var e=this,t=new o(this.url,this.crossorigin);t.addEventListener('loaded',function(t){e.json=t.content.json,e.onJSONLoaded()}),t.load()},s.onJSONLoaded=function(){var t=this,r=this.baseUrl+this.json.meta.image,a=new i(r,this.crossorigin),o=this.json.frames;for(var n in this.texture=a.texture.baseTexture,a.addEventListener('loaded',function(){t.onLoaded()}),o){var e=o[n].frame;e&&(l.cache[n]=new l(this.texture,{x:e.x,y:e.y,width:e.w,height:e.h}),o[n].trimmed&&(l.cache[n].realSize=o[n].spriteSourceSize,l.cache[n].trim.x=0))}a.load()},s.onLoaded=function(){this.dispatchEvent({type:'loaded',content:this})},e.exports=a},function(e,t,r){'use strict';function a(e,t){i.call(this),this.url=e,this.crossorigin=t,this.baseUrl=e.replace(/[^\/]*$/,''),this.texture=null}var o=r(13),s=r(17),n=r(8),i=r(5),u=r(31),l=r(4),d=r(2),c=a.prototype;c.handleEvent=function(e){switch(e.type){case'load':this.onXMLLoaded();break;default:this.onError();}},c.load=function(){this.request=d.createRequest(),this.request.addEventListener('load',this),this.request.addEventListener('error',this),this.request.open('GET',this.url,!0),this.request.overrideMimeType&&this.request.overrideMimeType('application/xml'),this.request.send(null)},c.onXMLLoaded=function(){var t=this.baseUrl+this.request.responseXML.getElementsByTagName('page')[0].attributes.getNamedItem('file').nodeValue,r=new s(t,this.crossorigin);this.texture=r.texture.baseTexture;var a={},o=this.request.responseXML.getElementsByTagName('info')[0],d=this.request.responseXML.getElementsByTagName('common')[0];a.font=o.attributes.getNamedItem('face').nodeValue,a.size=parseInt(o.attributes.getNamedItem('size').nodeValue,10),a.lineHeight=parseInt(d.attributes.getNamedItem('lineHeight').nodeValue,10),a.chars={};for(var e=this.request.responseXML.getElementsByTagName('char'),c=0;c<e.length;c++){var p=parseInt(e[c].attributes.getNamedItem('id').nodeValue,10),h=new n(parseInt(e[c].attributes.getNamedItem('x').nodeValue,10),parseInt(e[c].attributes.getNamedItem('y').nodeValue,10),parseInt(e[c].attributes.getNamedItem('width').nodeValue,10),parseInt(e[c].attributes.getNamedItem('height').nodeValue,10));a.chars[p]={xOffset:parseInt(e[c].attributes.getNamedItem('xoffset').nodeValue,10),yOffset:parseInt(e[c].attributes.getNamedItem('yoffset').nodeValue,10),xAdvance:parseInt(e[c].attributes.getNamedItem('xadvance').nodeValue,10),kerning:{},texture:l.cache[p]=new l(this.texture,h)}}var i=this.request.responseXML.getElementsByTagName('kerning');for(c=0;c<i.length;c++){var f=parseInt(i[c].attributes.getNamedItem('first').nodeValue,10),g=parseInt(i[c].attributes.getNamedItem('second').nodeValue,10),x=parseInt(i[c].attributes.getNamedItem('amount').nodeValue,10);a.chars[g].kerning[f]=x}u.fonts[a.font]=a;var m=this;r.addEventListener('loaded',function(){m.onLoaded()}),r.load()},c.onLoaded=function(){this.loaded=!0,this.dispatchEvent({type:'loaded',content:this})},c.onError=function(){this.dispatchEvent({type:'error',content:this})},o.registerLoaderType('xml',a),o.registerLoaderType('fnt',a),e.exports=a},function(e,t,r){'use strict';function a(e,t){n.call(this),this.url=e,this.crossorigin=t,this.loaded=!1}var o=r(13),i=r(27),n=r(5),l=r(25),s=r(26).SkeletonJson,d=a.prototype;d.load=function(){var e=this,t=new i(this.url,this.crossorigin);t.addEventListener('loaded',function(t){e.json=t.content.json,e.onJSONLoaded()}),t.load()},d.onJSONLoaded=function(){var e=new s,t=e.readSkeletonData(this.json);l.animCache[this.url]=t,this.onLoaded()},d.onLoaded=function(){this.loaded=!0,this.dispatchEvent({type:'loaded',content:this})},o.registerLoaderType('anim',a),e.exports=a},function(e,t,r){'use strict';function a(e){var t=i.console;t.groupCollapsed?t.groupCollapsed(e):t.group?t.group(e):t.log(e+' >>>>>>>>>')}function o(e){var t=i.console;t.groupEnd?t.groupEnd(e):t.log(e+' _________')}var i=r(2);t.runList=function(e,t){var r=0,n=e.first;for(t='pixi.runList'+(t?'('+t+')':''),a(t),i.console.log(n);n._iNext;)if(r++,n=n._iNext,i.console.log(n),100<r){i.console.log('BREAK');break}o(t)}}]);